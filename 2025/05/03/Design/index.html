

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="qpm">
  <meta name="keywords" content="">
  
    <meta name="description" content="点击展开&#x2F;折叠更新日志  	 		版本 2.0.1 		2026 年 1 月 7 日 		 			 				修复bug： 				● 感谢xikus修复找不到电机的bug  				● 感谢鱼大大修复传动比计算错误的bug  			 		 	 	 		版本 2.0.0 		2025 年 11 月 7 日 		 			 				主要更新： 				● 重构整个框架，更加容易维护 				● 更换报">
<meta property="og:type" content="article">
<meta property="og:title" content="Design">
<meta property="og:url" content="https://qpmhhh.github.io/2025/05/03/Design/index.html">
<meta property="og:site_name" content="qpm&#39;s blog">
<meta property="og:description" content="点击展开&#x2F;折叠更新日志  	 		版本 2.0.1 		2026 年 1 月 7 日 		 			 				修复bug： 				● 感谢xikus修复找不到电机的bug  				● 感谢鱼大大修复传动比计算错误的bug  			 		 	 	 		版本 2.0.0 		2025 年 11 月 7 日 		 			 				主要更新： 				● 重构整个框架，更加容易维护 				● 更换报">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://qpmhhh.github.io/img/design_yi1.png">
<meta property="og:image" content="https://qpmhhh.github.io/img/design_ji1.png">
<meta property="og:image" content="https://qpmhhh.github.io/img/design_schematic_diagram_of_trans.jpg">
<meta property="og:image" content="https://qpmhhh.github.io/img/vbelt_large_construction.png">
<meta property="og:image" content="https://qpmhhh.github.io/img/design_three_shafts.jpg">
<meta property="og:image" content="https://qpmhhh.github.io/img/design_highShaft.jpg">
<meta property="og:image" content="https://qpmhhh.github.io/img/design_middleShaft.jpg">
<meta property="og:image" content="https://qpmhhh.github.io/img/design_lowShaft.jpg">
<meta property="og:image" content="https://qpmhhh.github.io/img/design_highBearing.jpg">
<meta property="og:image" content="https://qpmhhh.github.io/img/design_middleBearing.jpg">
<meta property="og:image" content="https://qpmhhh.github.io/img/design_highBearing.jpg">
<meta property="article:published_time" content="2025-05-03T08:55:56.000Z">
<meta property="article:modified_time" content="2026-01-07T05:08:40.970Z">
<meta property="article:author" content="qpm">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://qpmhhh.github.io/img/design_yi1.png">
  
  
  
  <title>Design - qpm&#39;s blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/input_css.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"qpmhhh.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":false,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":"pO7P7mOWzR36NhFzs9TCZQ4L-MdYXbMMI","app_key":"bKqt1od9PmjqZ4RnkH9FAKKz","server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>QPM</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Design"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-05-03 16:55" pubdate>
          2025年5月3日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          15k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          124 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Design</h1>
            
            
              <div class="markdown-body">
                
                <details id="logger_details" onclick="check_new_logger(1)">
<summary id="logger">点击展开/折叠更新日志</summary>
<div class="update-log">
	<div class="update-entry">
		<div class="update-version">版本 2.0.1</div>
		<div class="update-date">2026 年 1 月 7 日</div>
		<div class="update-content">
			<div class="update-item">
				<span class="update-item-title">修复bug：</span>
				<span class="update-item-description">● 感谢<span class="static-rainbow_xikes">xikus</span>修复找不到电机的bug </span>
				<span class="update-item-description">● 感谢<span class="static-rainbow_yuda">鱼大大</span>修复传动比计算错误的bug </span>
			</div>
		</div>
	</div>
	<div class="update-entry">
		<div class="update-version">版本 2.0.0</div>
		<div class="update-date">2025 年 11 月 7 日</div>
		<div class="update-content">
			<div class="update-item">
				<span class="update-item-title">主要更新：</span>
				<span class="update-item-description">● 重构整个框架，更加容易维护</span>
				<span class="update-item-description">● 更换报告模板，更贴合课程要求</span>
				<span class="update-item-description">● 修复若干bug</span>
			</div>
		</div>
	</div>
	<div class="update-entry">
		<div class="update-version">版本 1.0.4</div>
		<div class="update-date">2025 年 6 月 30 日</div>
		<div class="update-content">
			<div class="update-item">
				<span class="update-item-title">新增功能：</span>
				<span class="update-item-description">● 更新版本后更新日志有提醒</span>
				<span class="update-item-description">● 更新口令：输入clear可以清除所有缓存，意思是所有数据都被设置为默认值</span>
			</div>
			<div class="update-item">
				<span class="update-item-title">修复bug：</span>
				<span class="update-item-description">● 修改刷新数据逻辑：每5s检测一次滑动，滑到底端时刷新所有数据。所以有什么显示问题，滑倒底部再滑回来就对了</span>
				<span class="update-item-description">● 修复最小转速错误的问题（较为智能地选择带传动比）</span>
				<span class="update-item-description">● 修复齿轮分度圆直径错误的问题（较为智能地选择齿轮齿数）</span>
				<span class="update-item-description">● 感谢<span class="static-rainbow_ssy">咸鱼</span>提出带效率和工作效率取反了的问题</span>
				<span class="update-item-description">● 感谢<span class="static-rainbow_qs">翔翔不爱未成年</span>修改部分bug</span>
				<span class="update-item-description">● 感谢<span class="dynamic-rainbow_bw">秦兵马俑王者</span>修改部分bug并添加调整垫片</span>
				<span class="update-item-description">● 感谢<span class="dynamic-rainbow_zp">左手抓住右车把</span>提出键宽计算逻辑错误的bug<span class="logger_new">(重大bug，建议清除缓存重算)</span>并对退刀槽部分提出见解</span>
				<span class="update-item-description">● 感谢<span class="dynamic-rainbow">zzzz</span>提示键宽出现问题并且最后长宽写反了的bug
			</div>
		</div>
	</div>
	<div class="update-entry">
		<div class="update-version">版本 1.0.3</div>
		<div class="update-date">2025 年 6 月 29 日</div>
		<div class="update-content">
			<div class="update-item">
				<span class="update-item-title">新增功能：</span>
				<span class="update-item-description">● 更新口令（输入img可以导出抽签图片）</span>
				<span class="update-item-description">● 增加抽签图片加载动画</span>
			</div>
			<div class="update-item">
				<span class="update-item-title">修复bug：</span>
				<span class="update-item-description">● 感谢<span class="dynamic-rainbow_zp">右手抓住左车把</span>改正了低速轴和高速轴轴长不正确的问题(增加凸缘厚度；增加凸台厚度；增加轴与齿轮间距离；增加齿轮间距离)</span>
				<span class="update-item-description">● 感谢<span class="static-rainbow_sy">EliraSolstice</span>为下版本更新提出建设性的意见</span>
				<span class="update-item-description">● 修复中间轴大齿轮宽度不正确和低速轴大齿轮宽度不正确的问题</span>
				<span class="update-item-description">● 修复减速箱整体高不正确的问题</span>
			</div>
		</div>
	</div>
	<div class="update-entry">
	<div class="update-version">版本 1.0.2</div>
		<div class="update-date">2025 年 6 月 8 日</div>
		<div class="update-content">
			<div class="update-item">
				<span class="update-item-title">新增签底：</span>
				<span class="update-item-description">● 感谢<span class="static-rainbow">SCUT_海吉星</span>提供的JOJO主题签底</span>
			</div>
			<div class="update-item">
				<span class="update-item-title">修复bug：</span>
				<span class="update-item-description">● 根据机械设计网站的“查看答题结果”修正使用的数据(但低速轴和高速轴长度仍然错误) </span>
				<span class="update-item-description">● 修正修改参数后偶现更新滞后的bug，如仍未更新，可以尝试滚动一下 </span>
				<span class="update-item-description">● 修复抽签内容的可爱字体没有加载的bug(可爱字体才是灵魂) </span>
			</div>
		</div>
	</div>
	<div class="update-entry">
		<div class="update-version"><span style='font-family:"Mamelon";'>版</span>本 1.0.1</div>
		<div class="update-date">2025 年 6 月 3 日</div>
		<div class="update-content">
			<div class="update-item">
				<span class="update-item-title">新增功能：</span>
				<span class="update-item-description">● 使用cookies保存输入的数据</span>
				<span class="update-item-description">● 添加更新日志，拒绝哑巴设计师</span>
			</div>
			<div class="update-item">
				<span class="update-item-title">修复bug：</span>
				<span class="update-item-description">● 之前的老黄历接口坏了，于是干脆不显示宜忌了(删除无用功能也是一种修复bug)</span>
				<span class="update-item-description">● 修复手机无法显示完整抽签内容的bug(签底图片可以定制，想制作自己主题的签底可以联系作者，现有主题：明日方舟；原神；碧蓝幻想；赛马娘；战双帕弥什；东方)</span>
			</div>
		</div>
	</div>
	<div class="update-entry">
		<div class="update-version">版本 1.0.0</div>
		<div class="update-date">2025 年 6 月 1 日</div>
		<div class="update-content">
			<div class="update-item">
				<span class="update-item-title">基本功能：</span>
				<span class="update-item-description">● 提供一种辅助设计二级齿轮减速器的方案</span>
				<span class="update-item-description">● 针对机械设计网上作业系统的填空进行整合并放在正文最后</span>
				<span class="update-item-description">● 每日黄历里可以进行二次元抽签</span>
				<span class="update-item-description">● 网站最后有评论功能，有什么改进方案欢迎提出</span>
			</div>
			<div class="update-item">
				<span class="update-item-title">温馨提醒：</span>
				<span class="update-item-description">● 使用电脑网页打开以获得最佳效果</span>
				<span class="update-item-description">● 网页搭建依托github平台，并且计算量大，需要等十秒左右才能加载完全，使用科学可加快网页访问</span>
				<span class="update-item-description">● <span style='font-family:"sakura";'>抽签主题</span>有：明日方舟；原神；碧蓝幻想；赛马娘；战双帕弥什；东方；JOJO</span>
			</div>
		</div>
	</div>
</div>
</details>
<details>
<summary>点击展开/折叠今日黄历</summary>
<div style="border: 2px solid #8B4513; border-radius: 10px; max-width: 600px; margin: 20px auto; font-family: 'SimHei', sans-serif; background-color: #FAEBD7; padding: 10px; box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.2);">
        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
            <!-- 左栏 -->
            <div style="flex: 3; background-color:rgb(255, 222, 173); padding: 10px; border-radius: 5px;">
				<div style="display: flex; flex-direction: column; height: 100%;">
					<div style="flex: 1; display: flex; align-items: center; justify-content: center;">
					</div>
					<img src="/img/design_yi1.png" alt="宜" style="max-width: 100%; height: auto; display: block; margin: 0 auto;">
					<div style="flex: 4; display: flex; align-items: center; justify-content: center;">
						<p style="text-align: center; color: #8B4513; font-size: 14px;" id="yc_yi">你猜宜啥</p>
					</div>
				</div>
            </div>
            <!-- 中间栏 -->
            <div style="flex: 4; background-color: #FFDEAD; padding: 10px; border-radius: 5px;">
                <p style="text-align: center; color: #8B4513;font-size: 24px;font-weight: bold;">日期</p>
                <p style="text-align: center; color: #8B4513; font-size: 14px;" id="yc_date">2025年05月31日</p>
                <div style="text-align: center; margin-top: 10px;">
                    <input type="text" style="padding: 5px; border: 1px solid #8B4513; border-radius: 5px; width: 80%; margin-bottom: 5px;font-size: 14px;" placeholder="请输入您的幸运号码" id="yc_luckynum">
                    <button style="padding: 5px 14px; background-color: #8B4513; color: #FAEBD7; border: none; border-radius: 5px; cursor: pointer;" id="yc_ok">抽签</button>
                </div>
            </div>
            <!-- 右栏 -->
            <div style="flex: 3; background-color: #FFDEAD; padding: 10px; border-radius: 5px;">
				<div style="display: flex; flex-direction: column; height: 100%;">
					<div style="flex: 1; display: flex; align-items: center; justify-content: center;">
					</div>
					<img src="/img/design_ji1.png" alt="忌" style="max-width: 100%; height: auto; display: block; margin: 0 auto;">
					<div style="flex: 4; display: flex; align-items: center; justify-content: center;">
						<p style="text-align: center; color: #8B4513; font-size: 14px;" id="yc_ji">你猜忌啥</p>
					</div>
				</div>
            </div>
        </div>
    </div>
<div id="yc_lot_cue">
</div>
<div id="yc_lot_cue2">
</div>
<div id="yc_lot_loading">
</div>
<div id="yc_lot" style="text-align: center; margin-top: 10px;transform-origin: left top;transform: scale(0.5, 0.5);">
</div>
</details>










<h2 class="text-annotation" id="原始数据">原始数据</h2>

<div class="text-annotation">
输送带工作拉力F：<input value="9340" type="text" class="input" id="F0" onchange="input_update(this)"> N<br>
输送带工作速度v：<input value="1.05" type="text" class="input" id="v0" onchange="input_update(this)"> m/s<br>
滚筒直径D：<input value="620" type="text" class="input" id="D0" onchange="input_update(this)"> mm<br>
滚筒及输送带效率(其实是工作效率)<span>$ \eta_{工}= $</span><input value="0.96" type="text" class="input" id="e4" onchange="input_update(this)"><br>
<button type="submit" onclick="update_all_force()">计算数据</button><br>
<br>
以下所有查表若无特殊说明均是《机械设计课程设计(第3版)》里面的。
绿色字体不会在报告书里出现。
</div>

<h2 id="设计任务书"><a href="#设计任务书" class="headerlink" title="设计任务书"></a>设计任务书</h2><h3 id="设计题目"><a href="#设计题目" class="headerlink" title="设计题目"></a>设计题目</h3><p>设计运送原料的带式运输机用的二级圆柱齿轮减速器。</p>
<h3 id="设计要求"><a href="#设计要求" class="headerlink" title="设计要求"></a>设计要求</h3><p>根据给定的工况参数，选择适当的电动机、选取联轴器、设计V带传动、设计二级齿轮减速器（所有的轴、齿轮、轴承、减速箱体、箱盖以及其他附件）和与输送带连接的联轴器。滚筒及运输带效率<span id="x1"></span>。工作时，载荷有轻微冲击。室内工作，水分和颗粒为正常状态，产品生产批量为成批生产，允许总速比误差&lt;±4%，要求齿轮使用寿命为10年，二班工作制，轴承使用寿命不小于15000小时。</p>
<h3 id="原始数据"><a href="#原始数据" class="headerlink" title="原始数据"></a>原始数据</h3><figcaption aria-hidden="true" class="image-caption data-t-only">表1 原始数据</figcaption>
<table id="t11" class="data-t-only"></table>

<h3 id="设计内容"><a href="#设计内容" class="headerlink" title="设计内容"></a>设计内容</h3><h4 style="font-weight: normal;">确定传动装置的类型，画出机械系统传动简图。</h4>
<h4 style="font-weight: normal;">选择电动机，进行传动装置的运动和动力参数计算。</h4>
<h4 style="font-weight: normal;">传动装置中的传动零件设计计算。</h4>
<h4 style="font-weight: normal;">绘制传动装置中二级减速器装配图一张（A1）。</h4>
<h4 style="font-weight: normal;">绘制高速轴、低速大齿轮零件图各一张（建议A3）。</h4>
<h4 style="font-weight: normal;">编写和提交设计计算说明书（电子版或纸版）各一份。</h4>


<h2 id="传动装置设计"><a href="#传动装置设计" class="headerlink" title="传动装置设计"></a>传动装置设计</h2><h3 id="传动方案拟定"><a href="#传动方案拟定" class="headerlink" title="传动方案拟定"></a>传动方案拟定</h3><p>根据本课程设计要求，采用一般的二级圆柱齿轮(斜齿)传动方案，其传动简图如下：<br><img src="/img/design_schematic_diagram_of_trans.jpg" alt="图1 传动装置简图"></p>
<h3 id="电动机的选择"><a href="#电动机的选择" class="headerlink" title="电动机的选择"></a>电动机的选择</h3><h4 id="电动机类型"><a href="#电动机类型" class="headerlink" title="电动机类型"></a>电动机类型</h4><p>按照工作条件和要求，选择Y系列（IP44）三相异步电动机。</p>
<h4 id="电机功率的确定"><a href="#电机功率的确定" class="headerlink" title="电机功率的确定"></a>电机功率的确定</h4><h5 id="工作机主轴所需功率计算"><a href="#工作机主轴所需功率计算" class="headerlink" title="工作机主轴所需功率计算"></a>工作机主轴所需功率计算</h5><p>已知工作机主轴上的传动滚筒、链轮或其他零件上的圆周力（有效拉力）F（N）和圆周速度（线速度）v（m&#x2F;s），则在稳定运转下工作机主轴上所需功率<span>$ P_w $</span>按下式计算：<br><span id="f1"> </span></p>
<h5 id="电机所需功率"><a href="#电机所需功率" class="headerlink" title="电机所需功率"></a>电机所需功率</h5><p>初选：联轴器为弹性连轴器，滚动轴承为圆锥滚子滚动轴承，齿轮为精度等级为 7 的闭式圆柱斜齿轮，带传动为普通 V 带传动。根据表2.3<span class="text-annotation">(P8)</span>，分效率为：<br>V带效率为<span>$ \eta_{带}&#x3D; $</span><input value="0.95" type="text" class="input" id="e0" onchange="input_update(this)"><br>圆柱齿轮效率为<span>$ \eta_{齿轮}&#x3D; $</span><input value="0.98" type="text" class="input" id="e1" onchange="input_update(this)"><br>轴承效率为<span>$ \eta_{轴承}&#x3D; $</span><input value="0.98" type="text" class="input" id="e2" onchange="input_update(this)"><br>联轴器效率为<span>$ \eta_{联轴器}&#x3D; $</span><input value="0.99" type="text" class="input" id="e3" onchange="input_update(this)"><br>工作效率为<span id="fe0">$ \eta_{工}&#x3D; $</span><br>故总效率为:<br><span id="f2"> </span><br>电机所需功率<span>$ P_d $</span>按下式计算：<br><span id="f3"> </span><br>考虑到在各零件设计时需要有一定的工况参数，查《机械设计》表2.6<span class="text-annotation">(P350，原因见下面带传动设计)</span>得<span>$ K_A&#x3D; $</span><input value="1.3" type="text" class="input" id="K0" onchange="input_update(this)"> ，则电动机的额定功率：<br><span id="f4"> </span></p>
<h4 id="选择电动机转速"><a href="#选择电动机转速" class="headerlink" title="选择电动机转速"></a>选择电动机转速</h4><p>计算工作机主轴转速：<br><span id="f5"> </span><br>传动比<span>$ i_{带}&#x3D; $</span>2 ~ 4,一级圆柱齿轮传动比<span>$ i_{1}&#x3D;i_{2}&#x3D; $</span>3 ~ 6，可计算电动机转速的合理范围为：<br><span id="f6"> </span><br>依照前面算的额定功率和转速，查表18.1<span class="text-annotation">(P199)</span>，选择的电机型号为：<select id="s1" onchange="input_update(this)"><option value=0>占位符</option></select></p>
<figcaption aria-hidden="true" class="image-caption data-t-only">表2 电动机主要参数</figcaption>
<table id="t1" class="data-t-only"></table>

<figcaption aria-hidden="true" class="image-caption data-t-only">表3 电动机安装及有关尺寸主要参数</figcaption>
<table id="t13" class="data-t-only"></table>


<h3 id="总传动比及其分配"><a href="#总传动比及其分配" class="headerlink" title="总传动比及其分配"></a>总传动比及其分配</h3><p>传动装置的总传动比为：<br><span id="f7"> </span><br>取V带的传动比<span>$ i_{带}&#x3D; $</span><input value="3" type="text" class="input" id="i0" onchange="input_update(this)"><br>查表(表2.4，P10)得：一级齿轮传动比<span id="i1">$ i_1&#x3D;i1_value $</span>，二级齿轮传动比<span id="i2">$ i_2&#x3D;i2_value $</span></p>
<p id="warning0" class="warning"></p>
<p id="warning1" class="warning"></p>

<h3 id="各轴运动和动力参数计算"><a href="#各轴运动和动力参数计算" class="headerlink" title="各轴运动和动力参数计算"></a>各轴运动和动力参数计算</h3><h4 id="计算各轴输入功率"><a href="#计算各轴输入功率" class="headerlink" title="计算各轴输入功率"></a>计算各轴输入功率</h4><p>小带轮轴功率<br><span id="P1"> </span><br>齿轮轴Ⅰ功率<br><span id="P2"> </span><br>齿轮轴Ⅱ功率<br><span id="P3"> </span><br>齿轮轴Ⅲ功率<br><span id="P4"> </span></p>
<h4 id="计算各轴转速"><a href="#计算各轴转速" class="headerlink" title="计算各轴转速"></a>计算各轴转速</h4><p>小带轮轴转速<br><span id="n1"> </span><br>齿轮轴Ⅰ转速<br><span id="n2"> </span><br>齿轮轴Ⅱ转速<br><span id="n3"> </span><br>齿轮轴Ⅲ转速<br><span id="n4"> </span></p>
<h4 id="计算各轴转矩"><a href="#计算各轴转矩" class="headerlink" title="计算各轴转矩"></a>计算各轴转矩</h4><p>小带轮轴转矩<br><span id="T1"> </span><br>齿轮轴Ⅰ转矩<br><span id="T2"> </span><br>齿轮轴Ⅱ转矩<br><span id="T3"> </span><br>齿轮轴Ⅲ转矩<br><span id="T4"> </span></p>
<h4 id="计算结果汇总"><a href="#计算结果汇总" class="headerlink" title="计算结果汇总"></a>计算结果汇总</h4><p>上述计算结果汇总如表4</p>
<figcaption aria-hidden="true" class="image-caption data-t-only">表4 各级传动功率、转速与转矩</figcaption>
<table id="t14" class="data-t-only"></table>


<h2 id="传动零件的设计计算"><a href="#传动零件的设计计算" class="headerlink" title="传动零件的设计计算"></a>传动零件的设计计算</h2><h3 id="V带传动设计"><a href="#V带传动设计" class="headerlink" title="V带传动设计"></a>V带传动设计</h3><h4 id="计算功率"><a href="#计算功率" class="headerlink" title="计算功率"></a>计算功率</h4><p>每班是8小时，两班制为16小时，查《机械设计》附表2.6<span class="text-annotation">(P350)</span>得工作情况系数<span id="K1">$ K_A $</span><span class="text-annotation">(修改请在前面电机功率选择里面改)</span>,可得计算功率:<br><span id="f8"> </span></p>
<h4 id="带型选择"><a href="#带型选择" class="headerlink" title="带型选择"></a>带型选择</h4><p>由所求得功率和转速，根据《机械设计》附图2.1<span class="text-annotation">(P353，也可以参考下图)</span>可查得，选择的带型为<span id="f9">A</span>型带。</p>
<p id="warning2" class="warning"></p>
<div style="width: 100%; height: 300px;overflow-y: hidden;overflow-x: scroll;">
<iframe src="" frameborder="no" id="v_belt" style="width: 600px; height: 400px;transform-origin: left top; transform: scale(0.8, 0.75);overflow:scroll;"></iframe>
</div>

<h4 id="带轮设计"><a href="#带轮设计" class="headerlink" title="带轮设计"></a>带轮设计</h4><p>由《机械设计》附表2.7<span class="text-annotation">(P352)</span>取主动轮基准直径为：<br><span id="f10"> </span><br>根据式<span>$ D_2 &#x3D; i_{带}*D_1 $</span>计算从动轮基准直径<span>$ D_2 $</span>，得<br><span id="f11"> </span><br>由《机械设计》附表2.7<span class="text-annotation">(P352)</span>取从动轮基准直径为：<br><span id="f12"> </span></p>
<h4 id="验算带速"><a href="#验算带速" class="headerlink" title="验算带速"></a>验算带速</h4><p>计算带的速度:<br><span id="f13"> </span><br>V带的速度不大于30 m&#x2F;s，亦不小于5 m&#x2F;s，带速合适。</p>
<h4 id="传动中心距和基准长度"><a href="#传动中心距和基准长度" class="headerlink" title="传动中心距和基准长度"></a>传动中心距和基准长度</h4><p id="warning3" class="warning"></p>
根据<span>$  0.7(D_1+D_2) < a_0 < 2(D_1+D_2)  $</span>,初步确定中心距<span id="f14">$  a_0 =  mm  $</span>，根据带传动的几何关系，计算带所需的基准长度
<span id="f15"> </span>
<p id="warning30" class="warning"></p>
由附表2.3选带的基准长度为：<span id="f16">$  L_d = f16_value mm  $</span>
按式<span>$  a = a_0 + \frac{L_d-L_d^{'}}{2}  $</span>计算实际中心距
<span id="f17"> </span>

<h4 id="包角及其验算"><a href="#包角及其验算" class="headerlink" title="包角及其验算"></a>包角及其验算</h4><p>由式子<span>$  \alpha_1 &#x3D; 180° - \frac{D_2-D_1}{a} \times 60°  $</span>得：<br><span id="f18"> </span>包角符合要求。</p>
<p id="warning4" class="warning"></p>

<h4 id="带的根数"><a href="#带的根数" class="headerlink" title="带的根数"></a>带的根数</h4><p>由带的参数<span id="f19_1">$ n &#x3D; n1_value rpm $</span>, <span id="f19_2">$ D_1 &#x3D; f10_value mm $</span>, <span id="f19_3">$  i &#x3D; i0_value $</span><br>查《机械设计》附表2.5a和附表2.5b<span class="text-annotation">(P347)</span>得：<span id="f20_1">$ P_0 $</span>, <span id="f20_2">$ \Delta P_0 $</span><br>查《机械设计》附表2.8<span class="text-annotation">(P351)</span>得：<span id="f20_3">$  K_{\alpha} $</span><br>查附表2.9得：<span id="f20_4">$  K_L $</span><br></span><br>则带的根数为：<br><span id="f21"> </span><br>取<span id="f22_1">$  z  $</span>。则z &lt; 10 ，符合要求。</p>
<h4 id="预紧力计算"><a href="#预紧力计算" class="headerlink" title="预紧力计算"></a>预紧力计算</h4><p>查《机械设计》附表2.2<span class="text-annotation">(P346)</span>得<span id="f23_1">$  q   kg&#x2F;m $</span>，则预紧力为：<br><span id="f24"> </span></p>
<h4 id="压轴力计算"><a href="#压轴力计算" class="headerlink" title="压轴力计算"></a>压轴力计算</h4><p>压轴力为：<br><span id="f25"> </span></p>
<h4 id="带轮的结构"><a href="#带轮的结构" class="headerlink" title="带轮的结构"></a>带轮的结构</h4><figcaption aria-hidden="true" class="image-caption data-t-only">表5 带轮结构尺寸（mm）</figcaption>
<table id="t15" class="data-t-only"></table>
V带轮采用HT200制造，允许最大圆周速度为25m/s。

<p><img src="/img/vbelt_large_construction.png" alt="图2 V带大带轮结构简图"></p>
<h3 id="齿轮传动设计"><a href="#齿轮传动设计" class="headerlink" title="齿轮传动设计"></a>齿轮传动设计</h3><h4 id="高速齿轮传动设计"><a href="#高速齿轮传动设计" class="headerlink" title="高速齿轮传动设计"></a>高速齿轮传动设计</h4><p>齿轮类型为斜齿圆柱齿轮。大、小齿轮都选用硬齿面。选大、小齿轮的材料均为 45 钢，并经调质后表面淬火，齿面硬度为HRC1&#x3D;HRC2&#x3D;45 。初选 7 级精度（GB&#x2F;T 10095.1—2001）。<br>选小齿轮齿数为：<input value="25" type="text" class="input" id="g0" onchange="input_update(this)"><br>则大齿轮齿数<span id="f26">$  z_2 &#x3D; i z_1 $</span><br>取大齿轮齿数为<span id="f27_1">$  z_2 $</span><br>初选螺旋角为<span>$  \beta_1 &#x3D;  $</span><input value="15" type="text" class="input" id="g13" onchange="input_update(this)">°<br>齿轮压力角为<span>$  \alpha_{n1} &#x3D; 20° $</span></p>
<h5 id="按齿面接触强度设计"><a href="#按齿面接触强度设计" class="headerlink" title="按齿面接触强度设计"></a>按齿面接触强度设计</h5><p>载荷系数<span>$  K_{t1} $</span>：<input value="1.5" type="text" class="input" id="g1" onchange="input_update(this)"><br>查《机械设计》表12.5<span class="text-annotation">(p384)</span>，得齿宽系数<span>$  \phi_{d1} $</span>：<input value="1" type="text" class="input" id="g2" onchange="input_update(this)"><br>查《机械设计》表12.4<span class="text-annotation">(p384)</span>，得弹性影响系数<span>$  Z_{E1} $</span>：<input value="189.8" type="text" class="input" id="g3" onchange="input_update(this)"><span>$  MPa^{\frac{1}{2}} $</span><br>节点区域系数<span>$ Z_{H1} $</span>由下式计算：<br><span id="f39_1"> </span><br><span id="f39_2"> </span><br><span id="f39_3"> </span><br>端面重合度按下式计算：<br><span id="f40_1"> </span><br><span id="f40_2"> </span><br><span id="f40_3"> </span><br>查《机械设计》图12.6<span class="text-annotation">(p390)</span>，得接触疲劳强度极限<span>$  \sigma_{Hlim1} &#x3D; \sigma_{Hlim2}&#x3D; $</span><input value="1000" type="text" class="input" id="g5" onchange="input_update(this)">MPa<br>小齿轮传递转矩为<span id="f28">$  T_{Ⅰ} &#x3D; T2_value $</span><br>应力循环次数为<br><span id="f29_1"> </span><br><span id="f29_2"> </span><br>查《机械设计》图12.4<span class="text-annotation">(P387)</span>，得接触疲劳寿命系数<span>$  K_{HN1} &#x3D; $</span><input value="0.92" type="text" class="input" id="g6" onchange="input_update(this)"><br><span>$  K_{HN2} &#x3D; $</span><input value="0.96" type="text" class="input" id="g7" onchange="input_update(this)"><span class="text-annotation">(这个一定要查表改！！！！！！！！！！！！！！！！！！！！！！！！！不改其实也看不出来)</span><br>接触疲劳许用应力(取失效概率为1%，安全系数<span>$  S_H &#x3D; 1 $</span>)<br><span id="f30_1"> </span><br><span id="f30_2"> </span><br>取<span id="f31_1">$ [\sigma_{H}]<em>{g1} &#x3D; f31_value MPa $</span><br>试算小齿轮分度圆直径：<br><span id="f32"> </span><br>计算圆周速度：<br><span id="f33"> </span><br>计算齿宽：<br><span id="f34"> </span><br>计算齿宽与齿高之比：<br><span id="f35"> </span><br>计算载荷系数K:<br>查《机械设计》图12.1<span class="text-annotation">(P385)</span>，由圆周速度和精度查得<span>$  K</em>{v1} &#x3D; $</span><input value="1.06" type="text" class="input" id="g8" onchange="input_update(this)"><br>查《机械设计》表12.2<span class="text-annotation">(P383)</span>，齿间载荷分配系数<span>$ K_{\alpha 1}  &#x3D; $</span><input value="1.2" type="text" class="input" id="g9" onchange="input_update(this)"><br>查《机械设计》表12.1<span class="text-annotation">(P382)</span>，使用系数<span>$  K_{A1} &#x3D; $</span><input value="1.25" type="text" class="input" id="g10" onchange="input_update(this)"><br>查《机械设计》表12.3<span class="text-annotation">(P383)</span>，齿向载荷分布系数<span>$  K_{H\beta 1} &#x3D; $</span><input value="1.55" type="text" class="input" id="g11" onchange="input_update(this)"><br>则载荷系数为<br><span id="f36"> </span><br>按实际的载荷系数修正分度圆直径：<br><span id="f37"> </span><br>计算模数<br><span id="f38"> </span><br>则取模数为<span id="f51_1">$ m_1 &#x3D; f51_value $<br></span></p>
<h5 id="按齿根弯曲疲劳强度校核"><a href="#按齿根弯曲疲劳强度校核" class="headerlink" title="按齿根弯曲疲劳强度校核"></a>按齿根弯曲疲劳强度校核</h5><p>查《机械设计》图12.2<span class="text-annotation">(P386)</span>，齿向载荷分布系数<span>$  K_{F\beta 1} &#x3D; $</span><input value="1.38" type="text" class="input" id="g12" onchange="input_update(this)"><br>载荷系数为<br><span id="f41"> </span><br>当量齿数为<br><span id="f42_1"> </span><br><span id="f42_2"> </span><br>齿形系数和应力校正系数：<br><span id="f43_11">$ Y_{Fa1} $</span>，<span id="f43_21">$ Y_{sa1} $</span><br><span id="f43_31">$ Y_{Fa2} $</span>， <span id="f43_41">$ Y_{sa2} $</span><br>轴面重合度：<br><span id="f44"> </span><br>取<span id="f45_1">$ \varepsilon_{\beta 1} &#x3D; f45_value $</span>，计算螺旋角影响系数：<br><span id="f46"> </span><br>查《机械设计》图12.5<span class="text-annotation">(P387)</span>，弯曲疲劳强度极限<span>$  \sigma_{Flim1} &#x3D; \sigma_{Flim2}&#x3D; $</span><input value="500" type="text" class="input" id="g14" onchange="input_update(this)">MPa<br>查《机械设计》图12.3<span class="text-annotation">(P386)</span>，弯曲疲劳寿命系数<span>$  K_{FN1} &#x3D; $</span><input value="0.86" type="text" class="input" id="g15" onchange="input_update(this)"><br><span>$  K_{FN2} &#x3D; $</span><input value="0.88" type="text" class="input" id="g16" onchange="input_update(this)"><br>取安全系数<span>$  S_{F1} &#x3D; $</span><input value="1.4" type="text" class="input" id="g17" onchange="input_update(this)"><br><span id="f47_1"> </span><br><span id="f47_2"> </span><br>校核小齿轮：<br><span id="f48"> </span><br>校核大齿轮：<br><span id="f49"> </span></p>
<p id="warning41" class="warning"></p>
<p id="warning42" class="warning"></p>
校核合格

<h5 id="几何尺寸计算"><a href="#几何尺寸计算" class="headerlink" title="几何尺寸计算"></a>几何尺寸计算</h5><p>中心距<br><span id="f52"> </span><br>取中心距<span id="f53_1">$  a_1  $</span><br>修正螺旋角：<br><span id="f54"> </span><br>分度圆直径<br><span id="f55_1"> </span><br><span id="f55_2"> </span><br>齿宽<br><span id="f56"> </span><br>取<span id="f57_1">$ B_2 $</span>，则小齿轮齿宽<br><span id="f57_2">$ B_1 &#x3D; B_2 + 5 $</span></p>
<figcaption aria-hidden="true" class="image-caption data-t-only">表6 高速级齿轮几何尺寸</figcaption>
<table id="t16" class="data-t-only"></table>


<h4 id="低速齿轮传动设计"><a href="#低速齿轮传动设计" class="headerlink" title="低速齿轮传动设计"></a>低速齿轮传动设计</h4><p>齿轮类型为斜齿圆柱齿轮。大、小齿轮都选用硬齿面。选大、小齿轮的材料均为 45 钢，并经调质后表面淬火，齿面硬度为HRC1&#x3D;HRC2&#x3D;45 。初选 7 级精度（GB&#x2F;T 10095.1—2001）。<br>选小齿轮齿数为：<input value="26" type="text" class="input" id="g18" onchange="input_update(this)"><br>则大齿轮齿数<span id="f58">$ z_2 &#x3D; i z_1 $</span><br>取大齿轮齿数为<span id="f59_1">$ z_2 $</span><br>初选螺旋角为<span>$  \beta_2 &#x3D;  $</span><input value="15" type="text" class="input" id="g31" onchange="input_update(this)">°<br>齿轮压力角为<span>$  \alpha_{n2} &#x3D; 20° $</span></p>
<h5 id="按齿面接触强度设计-1"><a href="#按齿面接触强度设计-1" class="headerlink" title="按齿面接触强度设计"></a>按齿面接触强度设计</h5><p>载荷系数<span>$  K_{t2} $</span>：<input value="1.5" type="text" class="input" id="g19" onchange="input_update(this)"><br>查《机械设计》表12.5<span class="text-annotation">(P384)</span>，齿宽系数<span>$  \phi_d $</span>：<input value="1" type="text" class="input" id="g20" onchange="input_update(this)"><br>查《机械设计》表12.4<span class="text-annotation">(P384)</span>，弹性影响系数<span>$  Z_E $</span>：<input value="189.8" type="text" class="input" id="g21" onchange="input_update(this)"><span>$  MPa^{\frac{1}{2}} $</span><br>节点区域系数<span>$ Z_H $</span>由下式计算：<br><span id="f71_1"> </span><br><span id="f71_2"> </span><br><span id="f71_3"> </span><br>端面重合度按下式计算：<br><span id="f72_1"> </span><br><span id="f72_2"> </span><br><span id="f72_3"> </span><br>查《机械设计》图12.6<span class="text-annotation">(P390)</span>，接触疲劳强度极限<span>$  \sigma_{Hlim3} &#x3D; \sigma_{Hlim4}&#x3D; $</span><input value="1000" type="text" class="input" id="g23" onchange="input_update(this)">MPa<br>小齿轮传递转矩为<span id="f60">$  T_{Ⅱ}  $</span><br>应力循环次数为<br><span id="f61_1"> </span><br><span id="f61_2"> </span><br>查《机械设计》图12.4<span class="text-annotation">(P387)</span>，接触疲劳寿命系数<span>$  K_{HN3} &#x3D; $</span><input value="0.92" type="text" class="input" id="g24" onchange="input_update(this)"><br><span>$  K_{HN4} &#x3D; $</span><input value="0.96" type="text" class="input" id="g25" onchange="input_update(this)"><span class="text-annotation">(这个一定要查表改！！！！！！！！！！！！！！！！！！！！！！！！！不改其实也看不出来)</span><br>接触疲劳许用应力(取失效概率为1%，安全系数<span>$  S_H &#x3D; 1 $</span>)<br><span id="f62_1"> </span><br><span id="f62_2"> </span><br>取<span id="f63_1">$ [\sigma_{H}]<em>{g3} $</span><br>试算小齿轮分度圆直径：<br><span id="f64"> </span><br>计算圆周速度：<br><span id="f65"> </span><br>计算齿宽：<br><span id="f66"> </span><br>计算齿宽与齿高之比：<br><span id="f67"> </span><br>计算载荷系数K:<br>查《机械设计》图12.1<span class="text-annotation">(P385)</span>，由圆周速度和精度查得<span>$  K</em>{v2} &#x3D; $</span><input value="1.06" type="text" class="input" id="g26" onchange="input_update(this)"><br>查《机械设计》表12.2<span class="text-annotation">(P383)</span>，齿间载荷分配系数<span>$ K_{\alpha 2}  &#x3D; $</span><input value="1.2" type="text" class="input" id="g27" onchange="input_update(this)"><br>查《机械设计》表12.1<span class="text-annotation">(P382)</span>，使用系数<span>$  K_{A2} &#x3D; $</span><input value="1.25" type="text" class="input" id="g28" onchange="input_update(this)"><br>查《机械设计》表12.3<span class="text-annotation">(P383)</span>，齿向载荷分布系数<span>$  K_{H\beta 2} &#x3D; $</span><input value="1.55" type="text" class="input" id="g29" onchange="input_update(this)"><br>则载荷系数为<br><span id="f68"> </span><br>按实际的载荷系数修正分度圆直径：<br><span id="f69"> </span><br>计算模数<br><span id="f70"> </span><br>则最终模数为<span id="f83_1">$ m $</span></p>
<h5 id="按齿根弯曲疲劳强度校核-1"><a href="#按齿根弯曲疲劳强度校核-1" class="headerlink" title="按齿根弯曲疲劳强度校核"></a>按齿根弯曲疲劳强度校核</h5><p>查《机械设计》图12.2<span class="text-annotation">(P386)</span>，齿向载荷分布系数<span>$  K_{F\beta 2} &#x3D; $</span><input value="1.38" type="text" class="input" id="g30" onchange="input_update(this)"><br>载荷系数为<br><span id="f73"> </span><br>当量齿数为<br><span id="f74_1"> </span><br><span id="f74_2"> </span><br>齿形系数和应力校正系数：<br><span id="f75_11">$ Y_{Fa3} $</span>，<span id="f75_21">$ Y_{sa3} $</span><br><span id="f75_31">$ Y_{Fa4} $</span>，<span id="f75_41">$ Y_{sa4} $</span><br>轴面重合度：<br><span id="f76"> </span><br>取<span id="f77_1">$ \varepsilon_{\beta 2} $</span>，计算螺旋角影响系数：<br><span id="f78"> </span><br>查《机械设计》图12.5<span class="text-annotation">(P387)</span>，弯曲疲劳强度极限<span>$  \sigma_{Flim3} &#x3D; \sigma_{Flim4}&#x3D; $</span><input value="500" type="text" class="input" id="g32" onchange="input_update(this)">MPa<br>查《机械设计》图12.3<span class="text-annotation">(P386)</span>，弯曲疲劳寿命系数<span>$  K_{FN3} &#x3D; $</span><input value="0.86" type="text" class="input" id="g33" onchange="input_update(this)"><br><span>$  K_{FN4} &#x3D; $</span><input value="0.88" type="text" class="input" id="g34" onchange="input_update(this)"><br>取安全系数<span>$  S_{F2} &#x3D; $</span><input value="1.4" type="text" class="input" id="g35" onchange="input_update(this)"><br><span id="f79_1"> </span><br><span id="f79_2"> </span><br>校核小齿轮：<br><span id="f80"> </span><br>校核大齿轮：<br><span id="f81"> </span></p>
<p id="warning43" class="warning"></p>
<p id="warning44" class="warning"></p>
校核合格


<h5 id="几何尺寸计算-1"><a href="#几何尺寸计算-1" class="headerlink" title="几何尺寸计算"></a>几何尺寸计算</h5><p>中心距<br><span id="f84"> </span><br>取中心距<span id="f85_1">$  a  $</span><br>修正螺旋角：<br><span id="f86"> </span><br>分度圆直径<br><span id="f87_1"> </span><br><span id="f87_2"> </span><br>齿宽<br><span id="f88"> </span><br>取<span id="f89_1">$ B_4 $</span>，<span id="f89_2">$ B_3 &#x3D; B_4 + 5 $</span></p>
<figcaption aria-hidden="true" class="image-caption data-t-only">表7 低速级齿轮几何尺寸</figcaption>
<table id="t17" class="data-t-only"></table>

<h2 id="轴的设计"><a href="#轴的设计" class="headerlink" title="轴的设计"></a>轴的设计</h2><p>在二级齿轮减速器设计时，轴的长度直接决定了减速箱的尺寸。因为在高速轴和低速轴上分别只有一个齿轮，所以它们都有一段自由长度。而在中间轴上的两个齿轮宽度就直接决定了减速箱内部的宽度，所以应当首先设计中间轴。在中间轴确定之后，就可以通过确定减速箱内宽而确定高速轴和低速轴的长度，从而确定它们各自的自由段长。</p>
<h3 id="中间轴的设计"><a href="#中间轴的设计" class="headerlink" title="中间轴的设计"></a>中间轴的设计</h3><h4 id="中间轴-选择轴的材料"><a href="#中间轴-选择轴的材料" class="headerlink" title="中间轴-选择轴的材料"></a>中间轴-选择轴的材料</h4><p>选用45钢，调质，硬度为230HBS。</p>
<h4 id="估算轴的最小直径"><a href="#估算轴的最小直径" class="headerlink" title="估算轴的最小直径"></a>估算轴的最小直径</h4><p>由《机械设计》附表10.2中查取<span>$ A_m&#x3D; $</span><input value="110" type="text" class="input" id="d0" onchange="input_update(this)"><br><span id="f90"> </span><br>因为中间轴两端弯矩和转矩均为零，也没有键槽，所以可选其最小直径<span id="f91">$ d $</span></p>
<h4 id="中间轴的结构设计"><a href="#中间轴的结构设计" class="headerlink" title="中间轴的结构设计"></a>中间轴的结构设计</h4><p>考虑轴的结构及轴的刚度，取装滚动轴承处轴径<span>$ d_{滚m}&#x3D; $</span><select id="d1" onchange="input_update(this)"><option value=0>70</option></select>mm<br>根据轴的直径初选滚动轴承，因斜齿轮会产生较大的径向和轴向推力，滚动轴承选定圆锥滚子轴承，由轴颈<span id="f92">$ d_{滚m} $</span>选定圆锥滚子轴承<select id="d2" onchange="input_update(this)"><option value=0>“30214”</option></select>，正装布置。</p>
<p id="warning5" class="warning"></p>
<br>查《机械设计课程设计》表15.1可得<span class="text-annotation">(P175)</span>，滚动轴承宽度<span id="f99_1">$ T_m^{'} $</span> 、<span id="f99_2">$ B_m^{'} $</span> 、<span id="f99_3">$ a_m^{'} $</span> 、<span id="f99_4">$ D_m^{'} $</span>
<br>由齿轮设计可知：高速级大齿轮轮毂宽 <span id="f93_1">$ B_2 $</span>，低速级小齿轮宽<span id="f93_2">$ B_3 $</span>
<br>选两齿轮端面间距<span>$ \Delta_m= $</span><input value="10" type="text" class="input" id="d3" onchange="input_update(this)"> mm
<br>齿轮端面到箱内壁距离<span>$ \Delta_{1m}= $</span><input value="12" type="text" class="input" id="d4" onchange="input_update(this)"> mm
<br>滚动轴承端面到箱内壁距离<span>$ \Delta_{2m}= $</span><input value="15" type="text" class="input" id="d5" onchange="input_update(this)"> mm
<br>则箱内壁宽(加2.5是为了对齐齿轮)：
<span id="f94"> </span>
<br>为了使挡油环伸出一部分，实际上取箱内壁宽为：
<span id="f94_1"> </span>
<br>中间轴总长：
<span id="f95"> </span>
<br><span class="text-annotation">画出中间轴结构示意图(低速齿轮轴径按小齿轮齿顶圆直径算，高速齿轮轴径按轴承处轴径加5算)如图：</span>
<br>
<div style="width: 100%; height: 300px;overflow-y: hidden;overflow-x: scroll;
">
<iframe src="" frameborder="no" id="zhou_m" style="width: 1400px; height: 550px;transform-origin: left top; transform: scale(0.5, 0.5);" class="data-zhou-pic-only"></iframe>
</div>
<br>端盖螺钉为<span>$ M $</span><select id="d6" onchange="input_update(this)"><option value=0>8</option></select> mm，对应的螺栓头高度<span id="f404">$ k $</span> ；
<br>轴承端盖厚度<span>$ t = $</span><input value="10" type="text" class="input" id="d6_1" onchange="input_update(this)"> mm；（一般取端盖螺钉直径×1.2并圆整）
<br>查表3.15<span class="text-annotation">(P32)</span>选择箱体连接螺钉直径<span>$ d_{4m}=16mm $</span>
<br>查表3.16<span class="text-annotation">(P34)</span>得<span id="f96">$ c_1=26mm, c_2=21mm $</span>
<br>按壁厚为<span>$ \delta_1 =   $</span><input value="8" type="text" class="input" id="d7" onchange="input_update(this)"> mm
<br>取凸台厚度<span>$ d_{凸台} =   $</span><input value="10" type="text" class="input" id="d8" onchange="input_update(this)"> mm
<br>可得箱体凸缘厚度为
<span id="f97"> </span>
<br>可以得减速箱外壁宽度
<span id="f98"> </span>
<br>取轴端倒角为C1.5,各轴肩处的圆角半径则由各轴肩决定。

<h3 id="高速轴的设计"><a href="#高速轴的设计" class="headerlink" title="高速轴的设计"></a>高速轴的设计</h3><h4 id="高速轴-选择轴的材料"><a href="#高速轴-选择轴的材料" class="headerlink" title="高速轴-选择轴的材料"></a>高速轴-选择轴的材料</h4><p>选用45钢，调质，硬度为230HBS。</p>
<h4 id="估算轴的最小直径-1"><a href="#估算轴的最小直径-1" class="headerlink" title="估算轴的最小直径"></a>估算轴的最小直径</h4><p>由《机械设计》附表10.2中查取<span>$ A&#x3D; $</span><input value="110" type="text" class="input" id="d9" onchange="input_update(this)"><br><span id="f100"> </span></p>
<h4 id="高速轴结构设计"><a href="#高速轴结构设计" class="headerlink" title="高速轴结构设计"></a>高速轴结构设计</h4><p>考虑带轮需要键槽等结构要求，以及轴的刚度，取装带轮处轴径<span>$ d_{带h}&#x3D; $</span><select id="d10" onchange="input_update(this)"><option value=0>45</option></select>mm<br>取密封处的直径<span id="f101">$ d_{密h} $</span><br>那么，滚动轴承处轴径<span id="f102">$ d_{滚动h} $</span><br>根据轴的直径初选滚动轴承，因斜齿轮会产生较大的径向和轴向推力，滚动轴承选定圆锥滚子轴承，由轴颈<span id="f103">$ d&#x3D; f102_value mm $</span>。选定滚动轴承<select id="d11" onchange="input_update(this)"><option value=0>“30211”</option></select>，正装布置。</p>
<p id="warning6" class="warning"></p>
<br>查《机械设计课程设计》表15.1可得<span class="text-annotation">(P175)</span>，滚动轴承宽度<span id="f104_1">$ T_h^{'} $ </span> 、<span id="f104_2">$ B_h^{'} $ </span> 、<span id="f104_3">$ a_h^{'} $ </span> 、<span id="f104_4">$ D_h^{'} $ </span>，滚动轴承的安装尺寸为<span id="f104_5">$ d_{ah}^{'} $ </span> 
<br>高速齿轮的分度圆直径为<span id="f105_1">$ d1 $</span>，齿根圆直径为<span id="f105_2">$ df1 $</span>
<br><span id="f422">$ d_{f1} < d_a $ ，选带退刀槽结构的齿轮轴，退刀槽直径为(齿根圆直径向下圆整)</span>
<br><span id="f106">$ d_{退} $</span>
<br>选带轮侧端面据端盖螺钉距离为<span>$ l_3 = $</span><input value="20" type="text" class="input" id="d12" onchange="input_update(this)"> mm；
<br>端盖螺钉为<span>$ M $</span><select id="d13" onchange="input_update(this)"><option value=0>8</option></select> mm，对应的螺栓头高度<span id="f107">$ k $</span> ;
<br>轴承端盖厚度<span>$ t = $</span><input value="10" type="text" class="input" id="d14" onchange="input_update(this)"> mm；（一般取端盖螺钉直径×1.2并圆整）
<br>端盖调整垫片厚度为1mm；
<br>并由前面已知计算：带轮宽度至少为
<span id="f108"> </span>
<span class="text-annotation">(z为带的根数，e和f由《机械设计》表2.1查得，P346)</span><br>取带轮宽度为<span id="f109">$ d_{带轮} $</span> mm
<br>高速轴伸出段长为： 
<span id="f110"> </span>
<br>圆整为<span id="f111">$ l_{sh} = f111_value mm $</span> 
<br>即取<span id="f112">$ l_3 = f112_value mm $</span> 
<br>取滚动轴承端面到箱内壁距离<span>$ \Delta_{2h} = $</span><input value="15" type="text" class="input" id="d15" onchange="input_update(this)"> mm
<br>则另一未伸出端在箱体凸缘内的长度为：
<span id="f113"> </span>
<br>高速轴总长为：
<span id="f114"> </span>
<br>取轴端倒角为C1.5,各轴肩处的圆角半径则由各轴肩决定
<span id="f423" class="text-annotation">画出高速轴结构示意图(右边轴承<br>挡板按5mm算，退刀槽宽度按"齿轮端面到箱内壁距离-5"算)如图：</span>
<div style="width: 100%; height: 300px;overflow-y: hidden;overflow-x: scroll;
">
<iframe src="" frameborder="no" id="zhou_h" style="width: 1400px; height: 550px;transform-origin: left top; transform: scale(0.5, 0.5);" class="data-zhou-pic-only"></iframe>
</div>

<h3 id="低速轴的设计"><a href="#低速轴的设计" class="headerlink" title="低速轴的设计"></a>低速轴的设计</h3><h4 id="低速轴-选择轴的材料"><a href="#低速轴-选择轴的材料" class="headerlink" title="低速轴-选择轴的材料"></a>低速轴-选择轴的材料</h4><p>选用45钢，调质，硬度为230HBS。</p>
<h4 id="估算轴的最小直径-2"><a href="#估算轴的最小直径-2" class="headerlink" title="估算轴的最小直径"></a>估算轴的最小直径</h4><p>由《机械设计》附表10.2查取<span>$ A&#x3D; $</span><input value="110" type="text" class="input" id="d16" onchange="input_update(this)"><br><span id="f115"> </span></p>
<h4 id="低速轴结构设计"><a href="#低速轴结构设计" class="headerlink" title="低速轴结构设计"></a>低速轴结构设计</h4><p>考虑带轮需要键槽等结构要求，以及轴的刚度，取装联轴器处轴径<span>$ d_{联轴}&#x3D; $</span><select id="d17" onchange="input_update(this)"><option value=0>70</option></select>mm<br>取密封处的直径<span id="f116">$ d_{密} $</span><br>那么，滚动轴承处轴径<span id="f117">$ d_{滚动} $</span><br>根据轴的直径初选滚动轴承，因斜齿轮会产生较大的径向和轴向推力，滚动轴承选定圆锥滚子轴承，由轴颈<span id="f118">$ d $</span>。选定滚动轴承<select id="d18" onchange="input_update(this)"><option value=0>“30211”</option></select>，正装布置。</p>
<p id="warning7" class="warning"></p>
<br>查《机械设计课程设计》表15.1可得<span class="text-annotation">(P175)</span>，滚动轴承宽度<span id="f119_1">$ T_l^{'} $ </span> 、<span id="f119_2">$ B_l^{'} $ </span> 、<span id="f119_3">$ a_l^{'} $ </span> <span id="f119_4">$ D_l^{'} $ </span>，滚动轴承的安装尺寸为 <span id="f119_5">$ d_{al}^{'} $ </span> 
<br>选带轮侧端面据端盖螺钉距离为<span>$ l_5 = $</span><input value="20" type="text" class="input" id="d19" onchange="input_update(this)"> mm；
<br>端盖螺钉为<span>$ M $</span><select id="d20" onchange="input_update(this)"><option value=0>8</option></select> mm，对应的螺栓头高度<span id="f122">$ k  $</span> ；
<br>轴承端盖厚度<span>$ t = $</span><input value="10" type="text" class="input" id="d21" onchange="input_update(this)"> mm；（一般取端盖螺钉直径×1.2并圆整）
<br>端盖调整垫片厚度为1mm；
<br>预留联轴器配合长度为<span>$ B_5= $</span><input value="172" type="text" class="input" id="d23" onchange="input_update(this)"> mm；
<br>低速轴伸出段长为： 
<span id="f125"> </span>
<br>圆整为<span id="f126">$ l_s $</span> 
<br>即取<span id="f127">$ l_5 $</span> 
<br>取滚动轴承端面到箱内壁距离<span>$ \Delta_{2l} = $</span><input value="15" type="text" class="input" id="d22" onchange="input_update(this)"> mm
<br>则另一未伸出端在箱体凸缘内的长度为：
<span id="f128"> </span>
<br>低速轴总长为：
<span id="f129"> </span>
<br>取轴端倒角为C1.5,各轴肩处的圆角半径则由各轴肩决定
<span class="text-annotation">画出低速轴结构示意图(齿轮轴径按轴承处轴径加5算；齿轮挡板和未伸出部分轴承挡板按中间轴里面的齿轮端面间距算)如图：</span>
<div style="width: 100%; height: 300px;overflow-y: hidden;overflow-x: scroll;
">
<iframe src="" frameborder="no" id="zhou_l" style="width: 1400px; height: 550px;transform-origin: left top; transform: scale(0.5, 0.5);" class="data-zhou-pic-only"></iframe>
</div>

<p><img src="/img/design_three_shafts.jpg" alt="图3 三轴在减速箱中的装配简图"></p>
<h3 id="轴的强度校核"><a href="#轴的强度校核" class="headerlink" title="轴的强度校核"></a>轴的强度校核</h3><h4 id="按弯扭组合校核高速轴的强度"><a href="#按弯扭组合校核高速轴的强度" class="headerlink" title="按弯扭组合校核高速轴的强度"></a>按弯扭组合校核高速轴的强度</h4><p><img src="/img/design_highShaft.jpg" alt="图4 高速轴受力简图"></p>
<p>其中<span>$ l_{DAh} $ 取轴伸出最远处到第一个轴承中点，$ l_{ACh} $ 取第一个轴承中点到小齿轮中点，$ l_{CBh} $ 取小齿轮中点到第二个轴承中点</span><br><span id="f135_1"> </span><br><span id="f135_2"> </span><br><span id="f135_3"> </span><br><span id="f135_4"> </span></p>
<h5 id="计算作用在轴上的力"><a href="#计算作用在轴上的力" class="headerlink" title="计算作用在轴上的力"></a>计算作用在轴上的力</h5><p>轴转矩<span id="f130">$ T_{Ⅰ} $</span><br>高速小齿轮受力分析<br>圆周力<br><span id="f131"> </span><br>径向力<br><span id="f132"> </span><br>轴向力<br><span id="f133"> </span></p>
<p>带传动作用在轴上的压力(压轴力)：<br><span id="f134"> </span></p>
<h5 id="水平平面支反力"><a href="#水平平面支反力" class="headerlink" title="水平平面支反力"></a>水平平面支反力</h5><p>计算水平面支反力(以<span>$ F_{t1} $</span>为正方向)：<br><span id="f136_1"> </span><br><span id="f136_2"> </span></p>
<h5 id="垂直平面支反力"><a href="#垂直平面支反力" class="headerlink" title="垂直平面支反力"></a>垂直平面支反力</h5><p>计算垂直面支反力(以<span>$ F_{r1} $</span>为正方向)：<br>由<span>$ \sum M_{Bh}&#x3D;0 $</span>得：<br><span id="f137"> </span><br>由<span>$ \sum F&#x3D;0 $</span>得：<br><span id="f138"> </span></p>
<h5 id="水平平面弯矩"><a href="#水平平面弯矩" class="headerlink" title="水平平面弯矩"></a>水平平面弯矩</h5><p>计算水平面弯矩<br><span id="f139"> </span></p>
<h5 id="垂直平面弯矩"><a href="#垂直平面弯矩" class="headerlink" title="垂直平面弯矩"></a>垂直平面弯矩</h5><p>计算垂直面弯矩<br><span id="f140"> </span><br><span id="f141"> </span><br><span id="f142"> </span></p>
<h5 id="合成弯矩"><a href="#合成弯矩" class="headerlink" title="合成弯矩"></a>合成弯矩</h5><p>计算合成弯矩<br><span id="f143"> </span><br><span id="f144"> </span><br><span id="f145"> </span></p>
<h5 id="扭矩"><a href="#扭矩" class="headerlink" title="扭矩"></a>扭矩</h5><p>轴转矩为<span id="f156">$ T_{Ⅰ} &#x3D; f130_value N·mm $</span> ，当扭转剪应力为脉动循环变应力时，取系数<span>$ \alpha_h &#x3D; $</span><input value="0.6" type="text" class="input" id="d30" onchange="input_update(this)"></p>
<h5 id="计算弯矩"><a href="#计算弯矩" class="headerlink" title="计算弯矩"></a>计算弯矩</h5><p><span id="f146"> </span><br><span id="f147"> </span><br><span id="f148"> </span><br><span id="f149"> </span></p>
<h5 id="绘制弯矩、转矩图"><a href="#绘制弯矩、转矩图" class="headerlink" title="绘制弯矩、转矩图"></a>绘制弯矩、转矩图</h5><div style="width: 100%; height: 300px;overflow-y: scroll;overflow-x: scroll;
">
<iframe src="" frameborder="no" id="zhou_tu_h" style="width: 900px; height: 1700px;transform-origin: left top; transform: scale(0.7, 0.7);"></iframe>
</div>
<figcaption aria-hidden="true" class="image-caption">图5 高速轴的受力、弯矩、合成弯矩、转矩、计算弯矩图</figcaption>

<h5 id="强度校核"><a href="#强度校核" class="headerlink" title="强度校核"></a>强度校核</h5><p>轴的材料为 45 号钢，调质，按HBS&#x3D;230查表9.2得拉伸强度极限<span>$ σ_B&#x3D;600MPa $</span>，对称循环变应力时的许用应力<span>$ [σ_{-1}]&#x3D; 60MPa $</span><br>由计算弯矩图可见，<span id="f150">A</span>剖面的计算弯矩最大，该处轴径为<span id="f151"> $ d_A&#x3D; f151_value mm $ </span>的计算应力为：<br><span id="f152"> </span><br><span id="f153">D</span>剖面轴径最小<span id="f154"> $ d_D&#x3D; f154_value mm $ </span>，该处的计算应力为：<br><span id="f155"> </span></p>
<p id="warning8_1" class="warning"></p>
<p id="warning8_2" class="warning"></p>


<h4 id="按弯扭组合校核中间轴的强度"><a href="#按弯扭组合校核中间轴的强度" class="headerlink" title="按弯扭组合校核中间轴的强度"></a>按弯扭组合校核中间轴的强度</h4><p><img src="/img/design_middleShaft.jpg" alt="图6 中间轴受力简图"></p>
<p>其中<span>$ l_{ABm} $ 取轴承中点到低速轴小齿轮中点，$ l_{BCm} $ 取低速轴小齿轮中点到高速轴大齿轮中点，$ l_{CDm} $ 取高速轴大齿轮中点到第轴承中点</span><br><span id="f160_1"> </span><br><span id="f160_2"> </span><br><span id="f160_3"> </span><br><span id="f160_4"> </span></p>
<h5 id="计算作用在轴上的力-1"><a href="#计算作用在轴上的力-1" class="headerlink" title="计算作用在轴上的力"></a>计算作用在轴上的力</h5><p>高速大齿轮齿轮受力分析<br>圆周力<br><span id="f161"> </span><br>径向力<br><span id="f162"> </span><br>轴向力<br><span id="f163"> </span><br>低速小齿轮受力分析<br>圆周力<br><span id="f164"> </span><br>径向力<br><span id="f165"> </span><br>轴向力<br><span id="f166"> </span></p>
<h5 id="水平平面支反力-1"><a href="#水平平面支反力-1" class="headerlink" title="水平平面支反力"></a>水平平面支反力</h5><p>计算水平面支反力(以<span>$ F_{t2} $</span>为正方向)：<br><span id="f167_1"> </span><br><span id="f167_2"> </span></p>
<h5 id="垂直平面支反力-1"><a href="#垂直平面支反力-1" class="headerlink" title="垂直平面支反力"></a>垂直平面支反力</h5><p>计算垂直面支反力(以<span>$ F_{r2} $</span>为正方向)：<br>由<span>$ \sum M_{D}&#x3D;0 $</span>得：<br><span id="f168"> </span><br>由<span>$ \sum F&#x3D;0 $</span>得：<br><span id="f169"> </span></p>
<h5 id="水平平面弯矩-1"><a href="#水平平面弯矩-1" class="headerlink" title="水平平面弯矩"></a>水平平面弯矩</h5><p>计算水平面弯矩<br><span id="f170"> </span><br><span id="f171"> </span></p>
<h5 id="垂直平面弯矩-1"><a href="#垂直平面弯矩-1" class="headerlink" title="垂直平面弯矩"></a>垂直平面弯矩</h5><p>计算垂直面弯矩<br><span id="f172"> </span><br><span id="f173"> </span><br><span id="f174"> </span><br><span id="f175"> </span></p>
<h5 id="合成弯矩-1"><a href="#合成弯矩-1" class="headerlink" title="合成弯矩"></a>合成弯矩</h5><p>计算合成弯矩<br><span id="f176"> </span><br><span id="f177"> </span><br><span id="f178"> </span><br><span id="f179"> </span></p>
<h5 id="转矩"><a href="#转矩" class="headerlink" title="转矩"></a>转矩</h5><p>轴转矩为<span id="f180">$ T_{Ⅱ} &#x3D; T3_value N·mm $</span><br>当扭转剪应力为脉动循环变应力时，取系数<span>$ \alpha_m &#x3D; $</span><input value="0.6" type="text" class="input" id="d40" onchange="input_update(this)"></p>
<h5 id="计算弯矩-1"><a href="#计算弯矩-1" class="headerlink" title="计算弯矩"></a>计算弯矩</h5><p><span id="f181"> </span><br><span id="f182"> </span><br><span id="f183"> </span><br><span id="f184"> </span></p>
<h5 id="绘制弯矩、扭矩图"><a href="#绘制弯矩、扭矩图" class="headerlink" title="绘制弯矩、扭矩图"></a>绘制弯矩、扭矩图</h5><div style="width: 100%; height: 300px;overflow-y: scroll;overflow-x: scroll;
">
<iframe src="" frameborder="no" id="zhou_tu_m" style="width: 900px; height: 1700px;transform-origin: left top; transform: scale(0.7, 0.7);"></iframe>
</div>
<figcaption aria-hidden="true" class="image-caption">图7 中间轴的受力、弯矩、合成弯矩、转矩、计算弯矩图</figcaption>

<h5 id="强度校核-1"><a href="#强度校核-1" class="headerlink" title="强度校核"></a>强度校核</h5><p>轴的材料为 45 号钢，调质，按HBS&#x3D;230查表9.2得拉伸强度极限<span>$ σ_B&#x3D;600MPa $</span>，对称循环变应力时的许用应力<span>$ [σ_{-1}]&#x3D; 60MPa $</span><br>由计算弯矩图可见，<span id="f185"> B </span>剖面的计算弯矩最大，该处轴径为<span id="f186"> $ d_B mm $ </span>的计算应力为：<br><span id="f187"> </span><br><span id="f188">C</span>剖面轴径偏小<span id="f189"> $ d_D mm $ </span>，弯矩次大，该处的计算应力为：<br><span id="f190"> </span></p>
<p id="warning9_1" class="warning"></p>
<p id="warning9_2" class="warning"></p>


<h4 id="按弯扭组合校核低速轴的强度"><a href="#按弯扭组合校核低速轴的强度" class="headerlink" title="按弯扭组合校核低速轴的强度"></a>按弯扭组合校核低速轴的强度</h4><p><img src="/img/design_lowShaft.jpg" alt="图8 低速轴受力简图"></p>
<p>其中<span>$ l_{DAl} $ 取轴伸出最远处到第一个轴承中点，$ l_{ACl} $ 取第一个轴承中点到小齿轮中点，$ l_{CBl} $ 取小齿轮中点到第二个轴承中点</span><br><span id="f199_1"> </span><br><span id="f199_2"> </span><br><span id="f199_3"> </span><br><span id="f199_4"> </span></p>
<h5 id="计算作用在轴上的力-2"><a href="#计算作用在轴上的力-2" class="headerlink" title="计算作用在轴上的力"></a>计算作用在轴上的力</h5><p>轴转矩<span id="f200">$ T_{Ⅲ} &#x3D; T4_value N·mm $</span><br>低速大齿轮受力分析<br>圆周力<br><span id="f201"> </span><br>径向力<br><span id="f202"> </span><br>轴向力<br><span id="f203"> </span></p>
<h5 id="水平平面支反力-2"><a href="#水平平面支反力-2" class="headerlink" title="水平平面支反力"></a>水平平面支反力</h5><p>计算水平面支反力(以<span>$ F_{t4} $</span>为正方向)：<br><span id="f206_1"> </span><br><span id="f206_2"> </span></p>
<h5 id="垂直平面支反力-2"><a href="#垂直平面支反力-2" class="headerlink" title="垂直平面支反力"></a>垂直平面支反力</h5><p>计算垂直面支反力(以<span>$ F_{r4} $</span>为正方向)：<br>由<span>$ \sum M_{B}&#x3D;0 $</span>得：<br><span id="f207"> </span><br>由<span>$ \sum F&#x3D;0 $</span>得：<br><span id="f208"> </span></p>
<h5 id="水平平面弯矩-2"><a href="#水平平面弯矩-2" class="headerlink" title="水平平面弯矩"></a>水平平面弯矩</h5><p>计算水平面弯矩<br><span id="f209"> </span></p>
<h5 id="垂直平面弯矩-2"><a href="#垂直平面弯矩-2" class="headerlink" title="垂直平面弯矩"></a>垂直平面弯矩</h5><p>计算垂直面弯矩<br><span id="f210"> </span><br><span id="f211"> </span><br><span id="f212"> </span></p>
<h5 id="合成弯矩-2"><a href="#合成弯矩-2" class="headerlink" title="合成弯矩"></a>合成弯矩</h5><p>计算合成弯矩<br><span id="f213"> </span><br><span id="f214"> </span><br><span id="f215"> </span></p>
<h5 id="转矩-1"><a href="#转矩-1" class="headerlink" title="转矩"></a>转矩</h5><p>轴转矩为<span id="f226">$ T_{Ⅲ} &#x3D; f200_value N·mm $</span> ，当扭转剪应力为脉动循环变应力时，取系数<span>$ \alpha_l &#x3D; $</span><input value="0.6" type="text" class="input" id="d50" onchange="input_update(this)"></p>
<h5 id="计算弯矩-2"><a href="#计算弯矩-2" class="headerlink" title="计算弯矩"></a>计算弯矩</h5><p><span id="f216"> </span><br><span id="f217"> </span><br><span id="f218"> </span><br><span id="f219"> </span></p>
<h5 id="绘制弯矩、扭矩图-1"><a href="#绘制弯矩、扭矩图-1" class="headerlink" title="绘制弯矩、扭矩图"></a>绘制弯矩、扭矩图</h5><div style="width: 100%; height: 300px;overflow-y: scroll;overflow-x: scroll;
">
<iframe src="" frameborder="no" id="zhou_tu_l" style="width: 900px; height: 1700px;transform-origin: left top; transform: scale(0.7, 0.7);"></iframe>
</div>
<figcaption aria-hidden="true" class="image-caption">图9 低速轴的受力、弯矩、合成弯矩、转矩、计算弯矩图</figcaption>

<h5 id="强度校核-2"><a href="#强度校核-2" class="headerlink" title="强度校核"></a>强度校核</h5><p>轴的材料为 45 号钢，调质，按HBS&#x3D;230查表9.2得拉伸强度极限<span>$ σ_B&#x3D;600MPa $</span>，对称循环变应力时的许用应力<span>$ [σ_{-1}]&#x3D; 60MPa $</span><br>由计算弯矩图可见，<span id="f220">C</span>剖面的计算弯矩最大，该处轴径为<span id="f221"> $ d_C&#x3D; f221_value mm $ </span>的计算应力为：<br><span id="f222"> </span><br><span id="f223">D</span>剖面轴径最小<span id="f224"> $ d_D&#x3D; f224_value mm $ </span>，该处的计算应力为：<br><span id="f225"> </span></p>
<p id="warning10_1" class="warning"></p>
<p id="warning10_2" class="warning"></p>


<h2 id="滚动轴承的选择和计算"><a href="#滚动轴承的选择和计算" class="headerlink" title="滚动轴承的选择和计算"></a>滚动轴承的选择和计算</h2><h3 id="高速轴滚动轴承设计"><a href="#高速轴滚动轴承设计" class="headerlink" title="高速轴滚动轴承设计"></a>高速轴滚动轴承设计</h3><h4 id="轴上径向、轴向载荷分析"><a href="#轴上径向、轴向载荷分析" class="headerlink" title="轴上径向、轴向载荷分析"></a>轴上径向、轴向载荷分析</h4><p>轴向力<span id="f230">$ F_{a1} N $</span><br>由<span id="f231_1">$ R_{AHh} N $ </span> 和 <span id="f231_2">$ R_{AVh} N $</span>得：<br><span id="f232"> </span><br>由<span id="f233_1">$ R_{BHh} N $</span> 和 <span id="f233_2">$ R_{BVh} N $</span>得：<br><span id="f234"> </span></p>
<h4 id="轴承选型与校核"><a href="#轴承选型与校核" class="headerlink" title="轴承选型与校核"></a>轴承选型与校核</h4><p>因斜齿轮会产生较大的径向和轴向推力，滚动轴承选定圆锥滚子轴承，由轴径选定滚动轴承30211，正装布置。<br>选用轴承代号为<span id="f235"> 30214 </span>的圆锥滚子轴承，采用正装安装方式。轴承参数如下:<span id="f236_1"> $ e_h $ </span>，<span id="f236_2"> $ Y_h $ </span>，<span id="f236_3"> $ C_{rh} $ </span><br>受力如下图所示：<br><img src="/img/design_highBearing.jpg" alt="图10 高速轴径向、轴向载荷分析图"></p>
<p>计算派生轴向力<br><span id="f237"> </span><br><span id="f238"> </span><br>因为<span id="f239"> $ S_{Bh} + F_{a1} &gt; S_{Ah} $ </span>，所以<br><span id="f240"> </span><br><span id="f241"> </span><br>计算轴承当量载荷，因为<span id="f241_1"></span>，并且<br><span id="f242"> </span><br><span id="f243"> </span><br>所以查《机械设计》表9.1<span class="text-annotation">(P373)</span>，得<span id="f244_1"> $ X_{Ah} $ </span>、<span id="f244_2"> $ Y_{Ah} $ </span>；<span id="f244_3"> $ X_{Bh} $ </span>、<span id="f244_4"> $ Y_{Bh} $ </span><br><span id="f245"> </span><br><span id="f246"> </span><br>由于<span id="f247"> $ P_{Ah} &gt; P_{Bh} $ </span>，按轴承<span id="f248"> $ A $ </span> 验算寿命(在轻微冲击，室温下，ft，fp都取1)：<br><span id="f249"> </span></p>
<p id="warning12" class="warning"></p>
<br>因此，初选的轴承<span id="f250"> $ 30211 $ </span>满足使用寿命的要求。


<h3 id="中间轴滚动轴承设计"><a href="#中间轴滚动轴承设计" class="headerlink" title="中间轴滚动轴承设计"></a>中间轴滚动轴承设计</h3><h4 id="轴上径向、轴向载荷分析-1"><a href="#轴上径向、轴向载荷分析-1" class="headerlink" title="轴上径向、轴向载荷分析"></a>轴上径向、轴向载荷分析</h4><p>轴向力<span id="f260">$ F_{a3} $</span><br>由<span id="f261_1">$ R_{AHm} $</span> 和 <span id="f261_2">$ R_{AVm} $</span>得：<br><span id="f262"> </span><br>由<span id="f263_1">$ R_{DHm} $</span> 和 <span id="f263_2">$ R_{DVm} $</span>得：<br><span id="f264"> </span></p>
<h4 id="轴承选型与校核-1"><a href="#轴承选型与校核-1" class="headerlink" title="轴承选型与校核"></a>轴承选型与校核</h4><p>因斜齿轮会产生较大的径向和轴向推力，滚动轴承选定圆锥滚子轴承，由轴径选定滚动轴承30213，正装布置。<br>选用轴承代号为<span id="f265"> 30214 </span>的圆锥滚子轴承，采用正装安装方式。轴承参数如下:<span id="f266_1">$ e_m $ </span>，<span id="f266_2">$ Y_m $ </span>，<span id="f266_3">$ C_{rm} $ </span><br>受力如下图所示：<br><img src="/img/design_middleBearing.jpg" alt="图11 中间轴径向、轴向载荷分析图"></p>
<p>计算派生轴向力<br><span id="f267"> </span><br><span id="f268"> </span><br>因为<span id="f269"> $ S_{Am} + F_{a3} &gt; S_{Dm} $ </span>，所以<br><span id="f270"> </span><br><span id="f271"> </span><br>计算轴承当量载荷，因为<span id="f271_1"></span>，并且<br><span id="f272"> </span><br><span id="f273"> </span><br>所以查《机械设计》表9.1<span class="text-annotation">(P373)</span>，得<span id="f274_1">$ X_{Am} $ </span>、<span id="f274_2">$ Y_{Am} $ </span>；<span id="f274_3">$ X_{Dm} $ </span>、<span id="f274_4">$ Y_{Dm} $ </span><br><span id="f275"> </span><br><span id="f276"> </span><br>由于<span id="f277"> $ P_{Am} &gt; P_{Dm} $ </span>，按轴承<span id="f278"> $ A $ </span> 验算寿命(在轻微冲击，室温下，ft，fp都取1)：<br><span id="f279"> </span></p>
<p id="warning14" class="warning"></p>
<br>因此，初选的轴承<span id="f280"> $ 30211 $ </span>满足使用寿命的要求。



<h3 id="低速轴滚动轴承设计"><a href="#低速轴滚动轴承设计" class="headerlink" title="低速轴滚动轴承设计"></a>低速轴滚动轴承设计</h3><h4 id="轴上径向、轴向载荷分析-2"><a href="#轴上径向、轴向载荷分析-2" class="headerlink" title="轴上径向、轴向载荷分析"></a>轴上径向、轴向载荷分析</h4><p>轴向力<span id="f290">$ F_{a4} $</span><br>由<span id="f291_1">$ R_{AHl} $</span> 和 <span id="f291_2">$ R_{AVl} $</span>得：<br><span id="f292"> </span><br>由<span id="f293_1">$ R_{BHl} $</span>和 <span id="f293_2">$ R_{BVl} $</span>得：<br><span id="f294"> </span></p>
<h4 id="轴承选型与校核-2"><a href="#轴承选型与校核-2" class="headerlink" title="轴承选型与校核"></a>轴承选型与校核</h4><p>因斜齿轮会产生较大的径向和轴向推力，滚动轴承选定圆锥滚子轴承，由轴径选定滚动轴承30213，正装布置。<br>选用轴承代号为<span id="f295"> 30214 </span>的圆锥滚子轴承，采用正装安装方式。轴承参数如下:<span id="f296_1">$ e_l $</span>，<span id="f296_2">$ Y_l $</span>，<span id="f296_3">$ C_{rl} $</span><br>受力如下图所示：<br><img src="/img/design_highBearing.jpg" alt="图12 低速轴径向、轴向载荷分析图"></p>
<p>计算派生轴向力<br><span id="f297"> </span><br><span id="f298"> </span><br>因为<span id="f299"> $ S_{Al} + F_{a4} &gt; S_{Bl} $ </span>，所以<br><span id="f300"> </span><br><span id="f301"> </span><br>计算轴承当量载荷，因为<span id="f301_1"></span>，并且<br><span id="f302"> </span><br><span id="f303"> </span><br>所以查《机械设计》表9.1<span class="text-annotation">(P373)</span>，得<span id="f304_1">$ X_{Al} $</span>、<span id="f304_2">$ Y_{Al} $</span>；<span id="f304_3">$ X_{Bl} $</span>、<span id="f304_4">$ Y_{Bl} $</span><br><span id="f305"> </span><br><span id="f306"> </span><br>由于<span id="f307"> $ P_A &gt; P_B $ </span>，按轴承<span id="f308"> $ A $ </span> 验算寿命(在轻微冲击，室温下，ft，fp都取1)：<br><span id="f309"> </span></p>
<p id="warning16" class="warning"></p>
<br>因此，初选的轴承<span id="f310"> $ 30211 $ </span>满足使用寿命的要求。

<figcaption aria-hidden="true" class="image-caption data-t-only">表8 滚动轴承参数</figcaption>
<table id="t18" class="data-t-only"></table>


<h2 id="铸造减速器箱体的主要结构尺寸"><a href="#铸造减速器箱体的主要结构尺寸" class="headerlink" title="铸造减速器箱体的主要结构尺寸"></a>铸造减速器箱体的主要结构尺寸</h2><p><span class="text-annotation">说明：<span>a</span>值为低速齿轮中心距:<span id="f320"> $ a $</span>，<span>D</span>值为三个轴的轴承外径:分别为 <span id="f321_1">$ N97_value $</span> | <span id="f321_2">$ N98_value $</span> | <span id="f321_3">$ N99_value $</span>，<span>$ d_a $</span>值为最大齿顶圆直径:<span id="f322">$ d_{a4} $ </span>，选平耳座，则<span>$ h_3&#x3D;0 $ 即其他圆角中 $ r_1,r_2 $不存在</span>，数据均圆整处理。<br>主要见《机械设计课程设计》表3.15(P32)和表7.16(P87)<br></span></p>
<figcaption aria-hidden="true" class="image-caption data-t-only">表9 铸造减速器箱体主要结构尺寸计算结果</figcaption>
<table id="t2" class="data-t-only">
    
</table>


<h2 id="联轴器的选择"><a href="#联轴器的选择" class="headerlink" title="联轴器的选择"></a>联轴器的选择</h2><p>由教材中查得工作情况系数<span id="f330"> $ K_A $</span>，因此有：<br><span id="f331"> </span><br>又<span id="f334">$ n_{Ⅲ}&#x3D;f334_value rpm $</span><br>轴径为<span id="f332">$ d_{带轮}&#x3D; mm $</span><br>查表17.1到17.7<span class="text-annotation">(P188-P198)</span>，则选用<select id="g40" onchange="input_update(this)"><option value=0>“LX”</option></select><span id="f333">$  $</span></p>
<figcaption aria-hidden="true" class="image-caption data-t-only">表10 联轴器参数</figcaption>
<table id="t3" class="data-t-only">
    <tr>
    	<th>联轴器型号</th>
        <th>许用转矩</th>
        <th>许用转速</th>
        <th>配合轴径</th>
        <th>配合长度</th>
    </tr>
</table>


<h2 id="键连接的选择和强度校核"><a href="#键连接的选择和强度校核" class="headerlink" title="键连接的选择和强度校核"></a>键连接的选择和强度校核</h2><h3 id="高速轴V带轮用键连接"><a href="#高速轴V带轮用键连接" class="headerlink" title="高速轴V带轮用键连接"></a>高速轴V带轮用键连接</h3><h4 id="选用键类型"><a href="#选用键类型" class="headerlink" title="选用键类型"></a>选用键类型</h4><p>选用<span id="f340">$ A $</span>型平键，按轴颈<span id="f341">$ d_{} $</span>，轮毂长度<span id="f342">$ L $</span>，查表12.2选键的长度，网上找表选键的宽度和高度，则选用：<span id="f343"> b×l GB&#x2F;T 1096-2003 </span></p>
<h4 id="轴的强度校核-1"><a href="#轴的强度校核-1" class="headerlink" title="轴的强度校核"></a>轴的强度校核</h4><p>键和齿轮的材料为 45 钢，轴的材料为 40Cr 钢，由教材或设计手册中查得，该键连接的许用应力<span id="f346">$ [σ_p]&#x3D;100∼120 MPa $</span>，键的工作长度<br><span id="f347">$ l’&#x3D;l-b $</span><br>则:<br><span id="f348"> </span><span id="f349">强度不满足要求，故采用双键布置</span><span id="f350"> </span><br>键的工作挤压应力满足要求。</p>
<p id="warning20" class="warning"></p>


<h3 id="中间轴齿轮用键连接"><a href="#中间轴齿轮用键连接" class="headerlink" title="中间轴齿轮用键连接"></a>中间轴齿轮用键连接</h3><h4 id="选用键类型-1"><a href="#选用键类型-1" class="headerlink" title="选用键类型"></a>选用键类型</h4><p>选用<span id="f360">$ A $</span>型平键，按轴颈<span id="f361">$ d $</span>，轮毂长度<span id="f362">$ L $</span>，查表12.2选键的长度，网上找表选键的宽度和高度，则选用：<span id="f363">$ f364_value×f363_value GB&#x2F;T 1096-2003 $</span></p>
<h4 id="轴的强度校核-2"><a href="#轴的强度校核-2" class="headerlink" title="轴的强度校核"></a>轴的强度校核</h4><p>键和齿轮的材料为 45 钢，轴的材料为 40Cr 钢，由教材或设计手册中查得，该键连接的许用应力<span id="f366">$ [σ_p]&#x3D;100∼120 MPa $</span>，键的工作长度<span id="f367">$ l’&#x3D;l-b mm $</span>，则:<br><span id="f368"> </span><br><span id="f369">强度不满足要求，故采用双键布置</span><span id="f370"> </span>键的工作挤压应力满足要求。</p>
<p id="warning21" class="warning"></p>

<h3 id="低速轴齿轮用键连接"><a href="#低速轴齿轮用键连接" class="headerlink" title="低速轴齿轮用键连接"></a>低速轴齿轮用键连接</h3><h4 id="选用键类型-2"><a href="#选用键类型-2" class="headerlink" title="选用键类型"></a>选用键类型</h4><p>选用<span id="f380">$ A $</span>型平键，按轴颈<span id="f381">$ d $</span>，轮毂长度<span id="f382">$ L $</span>，查表12.2选键的长度，网上找表选键的宽度和高度，则选用：<span id="f383">$ f384_value×f383_value GB&#x2F;T 1096-2003 $</span></p>
<h4 id="轴的强度校核-3"><a href="#轴的强度校核-3" class="headerlink" title="轴的强度校核"></a>轴的强度校核</h4><p>键和齿轮的材料为 45 钢，轴的材料为 40Cr 钢，由教材或设计手册中查得，该键连接的许用应力<span id="f386">$ [σ_p]&#x3D;100∼120 MPa $</span>，键的工作长度<span id="f387">$ l’&#x3D;l-b mm $</span>，则:<br><span id="f388"> </span><br><span id="f389">强度不满足要求，故采用双键布置</span><span id="f390"> </span>键的工作挤压应力满足要求。</p>
<p id="warning22" class="warning"></p>


<h3 id="低速轴联轴器用键连接"><a href="#低速轴联轴器用键连接" class="headerlink" title="低速轴联轴器用键连接"></a>低速轴联轴器用键连接</h3><h4 id="选用键类型-3"><a href="#选用键类型-3" class="headerlink" title="选用键类型"></a>选用键类型</h4><p>选用<span id="f400">$ C $</span>型平键，按轴颈<span id="f401">$ d $</span>，轮毂长度<span id="f402">$ L $</span>，查表12.2选键的长度，网上找表选键的宽度和高度，则选用：<span id="f403">$ f404_value×f403_value GB&#x2F;T 1096-2003 $</span></p>
<h4 id="轴的强度校核-4"><a href="#轴的强度校核-4" class="headerlink" title="轴的强度校核"></a>轴的强度校核</h4><p>键和齿轮的材料为 45 钢，轴的材料为 40Cr 钢，由教材或设计手册中查得，该键连接的许用应力<span id="f406">$ [σ_p]&#x3D;100∼120 MPa $</span>，键的工作长度<span id="f407">$ l’&#x3D;l-b $</span>，则:<br><span id="f408"> </span><br><span id="f409">强度不满足要求，故采用双键布置</span><span id="f410"> </span>键的工作挤压应力满足要求。</p>
<p id="warning23" class="warning"></p>

<figcaption aria-hidden="true" class="image-caption data-t-only">表11 各键参数(mm)</figcaption>
<table id="t21" class="data-t-only"></table>


<h2 id="减速器的润滑"><a href="#减速器的润滑" class="headerlink" title="减速器的润滑"></a>减速器的润滑</h2><h3 id="齿轮传动的圆周速度"><a href="#齿轮传动的圆周速度" class="headerlink" title="齿轮传动的圆周速度"></a>齿轮传动的圆周速度</h3><p><span id="f420"> </span></p>
<p id="warning24" class="warning"></p>

<h3 id="齿轮的润滑方式与润滑油选择"><a href="#齿轮的润滑方式与润滑油选择" class="headerlink" title="齿轮的润滑方式与润滑油选择"></a>齿轮的润滑方式与润滑油选择</h3><p>根据齿轮传动的圆周速度可采用浸油润滑，润滑油选择代号为 L-AN68 的全损耗系统用油（GB 443-1989），大齿轮浸入油中的深度约为1~2个齿高，但不少于 10mm。</p>
<h3 id="轴承的润滑方式与润滑剂选择"><a href="#轴承的润滑方式与润滑剂选择" class="headerlink" title="轴承的润滑方式与润滑剂选择"></a>轴承的润滑方式与润滑剂选择</h3><p>因为浸油齿轮圆周速度ν&lt;2m&#x2F;s，故滚动轴承采用润滑脂润滑，可选用钙基润滑。<br>L-XAAMHA2（GB 491-1987），只需填充滚动轴承空间的1&#x2F;3~1&#x2F;2，并在滚动轴承内侧设置挡油环，使油池中的油不至于进入滚动轴承以致稀释润滑脂。<br><br></p>
<h2 id="绘制装配图及零件工作图"><a href="#绘制装配图及零件工作图" class="headerlink" title="绘制装配图及零件工作图"></a>绘制装配图及零件工作图</h2><p>减速器的装配图和零件工作图参考附带的图纸。</p>
<h2 id="设计小结"><a href="#设计小结" class="headerlink" title="设计小结"></a>设计小结</h2><p>（不少于500字）</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><br>1. 黄平、朱文坚，机械设计基础—理论、方法与标准，北京：清华大学出版社，2012<br><br>2. 朱文坚、黄平，机械设计课程设计，广州：华南理工大学出版社，2004<br><br>3. 朱文坚、黄平，机械设计，北京：高等教育出版社，2008<br><br>4. 机械设计手册，北京：化学工业出版社<br><br>5. 机械设计手册，北京：冶金工业出版社<br><br></p>
<h2 class="text-annotation" id="机械设计网站">机械设计网站</h2>
<div class="text-annotation">
不管怎样请先点击按钮：<button type="submit" onclick="jxsj_web()">导出网站数据</button><br>

<span id="f421">
</span>
</div>




<script>
const INITARRAY = ["F0","v0","D0","e4","yc"];
function setCookie(name, value, expires) {
    document.cookie = `${name}=${encodeURIComponent(value)};expires=${expires.toUTCString()};path=/`;
}
function getCookie(name) {
    const arr = document.cookie.split('; ');
    for (let i = 0; i < arr.length; i++) {
        const kv = arr[i].split('=');
        if (kv[0] === name) return decodeURIComponent(kv[1]);
    }
    return null;
}
function clearAllCookiesExcept() {
	var cookies = document.cookie.split(";");
	for (var i = 0; i < cookies.length; i++) {
		var cookie = cookies[i];
		var eqPos = cookie.indexOf("=");
		var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
		if(INITARRAY.indexOf(name.trim().slice(0,2))!==-1){
			continue;
		}
		document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";
	}
}
function getToday2359() {
    const now = new Date();
    const expires = new Date();
    expires.setHours(23, 59, 0, 0);
    // 若当前已过23:59，则设置为明天的23:59
    if (now > expires) {
        expires.setDate(expires.getDate() + 1);
    }
    return expires;
}
</script>
<script>  
MathJax = {  
	tex: {  
		inlineMath: [['$', '$'], ['\\(', '\\)']]  
	}  
};
</script>
<script id="MathJax-script" async src="/js/es5/tex-chtml.js">  </script>

<script id="my_extract_latex" src="/js/my_extract_latex.js">//解析latex的类</script>

<script>
function mtan(a){
	// 自定义tan函数，角度制
	return Math.tan(a/180*Math.PI);
}
function mcos(a){
	// 自定义cos函数，角度制
	return Math.cos(a/180*Math.PI);
}
function msin(a){
	// 自定义sin函数，角度制
	return Math.sin(a/180*Math.PI);
}
function matan(a){
	// 自定义arctan函数，角度制
	return Math.atan(a)*180/Math.PI;
}
function macos(a){
	// 自定义arccos函数，角度制
	return Math.acos(a)*180/Math.PI;
}
function masin(a){
	// 自定义arcsin函数，角度制
	return Math.asin(a)*180/Math.PI;
}
function formatDegree(value) {
    // 将度转换成为度分秒
    value = Math.abs(value);
    var v1 = Math.floor(value);
    var v2 = Math.floor((value - v1) * 60);
    var v3 = Math.round((value - v1) * 3600 % 60);
    return v1 + '°' + v2 + '\'' + v3 + '\'\'';
};
let defense_dog = false;// 原为防狗标志位，后狗得到密码，但仍保留作为彩蛋吧。现在换了个密码，嘻嘻。
DesignData.DP = 3;// 保留小数位数
let change_all_flag = 1;// 改变所有数据标志

/***********************
原始数据、电机选型及传动比计算
************************/
const F0 = new DataInput("F0","F");// 原始数据：工作拉力F
const v0 = new DataInput("v0","v");// 原始数据：工作速度v
const D0 = new DataInput("D0","D");// 原始数据：滚筒直径D
const e4 = new DataInput("e4","\\eta_{工}");// 原始数据：工作效率η
const x1 = new DataDisplay("x1",e4);
const t11 = new DataTable("t11","t_{原始数据}");
t11.table_head = ["输送带拉力F/N","输送带速度v /(m/s)","驱动带轮直径D /mm"];
t11.set_rows([[F0,v0,D0]]);
t11.pre_update_flag = true;
const e0 = new DataInput("e0","\\eta_{带}");// 查表数据：V带效率η带
const e1 = new DataInput("e1","\\eta_{齿轮}");// 查表数据：圆柱齿轮效率η齿轮
const e2 = new DataInput("e2","\\eta_{轴承}");// 查表数据：轴承效率η轴承
const e3 = new DataInput("e3","\\eta_{联轴器}");// 查表数据：联轴器效率η联轴器
const K0 = new DataInput("K0","K_A");// 查表数据：工况系数
const f1 = new DataFormula("f1","P_w","=","\\frac{F v}{1000}","kW");
const fe0 = new DataDisplay("fe0",e4);
const f2 = new DataFormula("f2","\\eta_{总}","=","\\eta_{带} \\eta_{齿轮}^2 \\eta_{轴承}^3 \\eta_{联轴器} \\eta_{工}");
const f3 = new DataFormula("f3","P_d","=","\\frac{P_w}{\\eta_{总}}","kW");
const f4 = new DataFormula("f4","P_{ed}","\\ge","K_A \\times P_d","kW");
const f5 = new DataFormula("f5","n_w","=","\\frac{60 \\times 1000v}{\\pi D}","r/min");
const DATA_IBMIN = new DataConst("DATA_IBMIN","i_{带min}",2);
const DATA_IG1MIN = new DataConst("DATA_IG1MIN","i_{1min}",3);
const DATA_IG2MIN = new DataConst("DATA_IG2MIN","i_{2min}",3);
const DATA_IBMAX = new DataConst("DATA_IBMAX","i_{带max}",4);
const DATA_IG1MAX = new DataConst("DATA_IG1MAX","i_{1max}",6);
const DATA_IG2MAX = new DataConst("DATA_IG2MAX","i_{2max}",6);
const f6 = new DataFormula("f6","n_{d}","=","n_w i_{带min} i_{1min} i_{2min} \\sim n_w i_{带max} i_{1max} i_{2max}","rpm");
const s1 = new DataSelect("s1","v_{电机型号}");
f4.add_child(s1);
f6.add_child(s1);
const t1 = new DataTable("t1","t_{电机参数}");
t1.table_head = ["型号","额定功率","同步转速","满载转速","堵转转矩/额定转矩","最大转矩/额定转矩"];
const t1_name = new DataMiddle("t1_name","t_{电机型号}");
const t1_rspeed = new DataMiddle("t1_rspeed","t_{同步转速}",0,"rpm");
const t1_power = new DataMiddle("t1_power","P",0,"kW");
const t1_rspeedmax = new DataMiddle("t1_rspeedmax","n_d",0,"rpm");
const t1_torquelocked = new DataMiddle("t1_torquelocked","t_{堵转转矩}",0,"N·m");
const t1_torquemax = new DataMiddle("t1_torquemax","t_{最大转矩}",0,"N·m");
var s1_result = [];
s1.children = [t1_name,t1_power,t1_rspeed,t1_rspeedmax,t1_torquelocked,t1_torquemax];
t1.set_rows([[t1_name,t1_power,t1_rspeed,t1_rspeedmax,t1_torquelocked,t1_torquemax]]);

const t13 = new DataTable("t13","t_{电动机安装及有关尺寸}");
t13.table_head = ["中心高","外形尺寸L×(AC/2+AD)×HD","底脚安装尺寸A×B","地脚螺栓直径K","轴伸尺寸D×E","键公称尺寸F×h"];
const t13_1 = new DataMiddle("t13_1","t13_{中心高}");
const t13_2 = new DataMiddle("t13_2","t13_{外形尺寸}");
const t13_3 = new DataMiddle("t13_3","t13_{底脚安装尺寸}");
const t13_4 = new DataMiddle("t13_4","t13_{地脚螺栓直径}");
const t13_5 = new DataMiddle("t13_5","t13_{轴伸尺寸}");
const t13_6 = new DataMiddle("t13_6","t13_{键公称尺寸}");
var motor_size = [];
t13.set_rows([[t13_1,t13_2,t13_3,t13_4,t13_5,t13_6]]);
t13.pre_update_flag = true;
s1.add_child(t13);
s1.before_update = function(){
	const min_power = f4.value;
	const min_r = f6.main_node.node[0].ranges[0];
	const result1 = T18_1.filter((item) => item[2] > min_power);
	s1_result = result1.filter((item) => item[1] > min_r);
	const names = s1_result.reduce((accumulator, currentValue) => accumulator.concat(currentValue[0]), []);
	if(names[0]!==s1.options[0]){
		s1.selected = 0;
		s1.value = s1.ele.options[s1.selected].text;
		s1.options = names;
		s1.options_change_flag = true;
	}
};
s1.after_update = function(){
	t1_name.value = s1_result[s1.selected][0];
	t1_rspeed.value = s1_result[s1.selected][1];
	t1_power.value = s1_result[s1.selected][2];
	t1_rspeedmax.value = s1_result[s1.selected][3];
	t1_torquelocked.value = s1_result[s1.selected][4];
	t1_torquemax.value = s1_result[s1.selected][5];

	const regex_ms = /[0-9]{2,3}[A-Z]/;
	const match = s1_result[s1.selected][0].match(regex_ms);
	console.log(match);
	for(var i of T18_2){
		if(match[0]==i[0]){
			motor_size = i;
			break;
		}
	}
	if(motor_size.length==0){
		throw new Error("未找到合适的电机尺寸");
	}else{
		t13_1.value = motor_size[0].slice(0,-1);
		t13_2.value = "".concat(motor_size[7],"×",parseFloat(motor_size[9])/2+parseFloat(motor_size[10]),"×",motor_size[11]);
		t13_3.value = "".concat(motor_size[1],"×",motor_size[2]);
		t13_4.value = motor_size[8];
		t13_5.value = "".concat(motor_size[3],"×",motor_size[4]);
		t13_6.value = "".concat(motor_size[5],"×",motor_size[6]);
	}
	s1.set_children_update_flag();
}



const f7 = new DataFormula("f7","i","=","\\frac{n_d}{n_w}","");
const i0 = new DataInput("i0","i_{带}");
t13.add_child(i0);
const i1 = new DataMiddle("i_gear1","i_1");
const i2 = new DataMiddle("i_gear2","i_2");
i0.add_child(i1);
i0.add_child(i2);
const i_1 = new DataDisplay("i1",i1);
const i_2 = new DataDisplay("i2",i2);
const warning0 = new DataWarning("warning0",i0,"<",2,"带的传动比需要大于2");
const warning1 = document.getElementById("warning1");

i0.after_update = function(){
	warning1.innerText = "";
	const threshold = 0.3;	//传动比差值阈值
	if(!i0.cookie_flag){
		for(var i=35;i>=23;i--){
			const temp_value = i/10;
			var gear_ratio = f7.value/temp_value;
			var best_item = T2_4[0];
			var delta_ratio = Math.abs(T2_4[0][0]-gear_ratio);
			T2_4.forEach(a_item=>{
				if(Math.abs(a_item[0]-gear_ratio)<=delta_ratio){
					best_item = a_item;
					delta_ratio = Math.abs(a_item[0]-gear_ratio);
					i1.set_value(a_item[1]);
					i2.set_value(a_item[2]);
				}
			});
			if(Math.abs(temp_value*best_item[0]-f7.value)<=threshold){
				i0.value = temp_value;
				i0.ele.value = temp_value;
				break;
			}
		}
	}else{
		var gear_ratio = f7.value/i0.value;
		var best_item = T2_4[0];
		var delta_ratio = Math.abs(T2_4[0][0]-gear_ratio);
		T2_4.forEach(a_item=>{
			if(Math.abs(a_item[0]-gear_ratio)<delta_ratio){
				best_item = a_item;
				delta_ratio = Math.abs(a_item[0]-gear_ratio);
				i1.set_value(a_item[1]);
				i2.set_value(a_item[2]);
			}
		});
	}
	i0.set_children_update_flag();
    if(Math.abs(delta_ratio)>1){
    	warning1.innerText = "传动比差值大于1，请尝试在上文选择其他电机型号";
    }
}

const P1 = new DataDisplay("P1",f3,true);
const P2 = new DataFormula("P2","P_{Ⅰ}","=","P_d \\times \\eta_{带}","kW");
const P3 = new DataFormula("P3","P_{Ⅱ}","=","P_{Ⅰ}\\times \\eta_{齿轮} \\times \\eta_{轴承}","kW");
const P4 = new DataFormula("P4","P_{Ⅲ}","=","P_{Ⅱ} \\times \\eta_{齿轮} \\times \\eta_{轴承}","kW");
const n1 = new DataDisplay("n1",t1_rspeedmax,true);
const n2 = new DataFormula("n2","n_{Ⅰ}","=","\\frac{n_d}{i_{带}}","rpm");
const n3 = new DataFormula("n3","n_{Ⅱ}","=","\\frac{n_{Ⅰ}}{i_1}","rpm");
const n4 = new DataFormula("n4","n_{Ⅲ}","=","\\frac{n_{Ⅱ}}{i_2}","rpm");
const T1 = new DataFormula("T1","T_d","=","9550 \\times \\frac{P_d}{n_d}","N·m");
const T2 = new DataFormula("T2","T_{Ⅰ}","=","9550 \\times \\frac{P_{Ⅰ}}{n_{Ⅰ}}","N·m");
const T3 = new DataFormula("T3","T_{Ⅱ}","=","9550 \\times \\frac{P_{Ⅱ}}{n_{Ⅱ}}","N·m");
const T4 = new DataFormula("T4","T_{Ⅲ}","=","9550 \\times \\frac{P_{Ⅲ}}{n_{Ⅲ}}","N·m");

const t14 = new DataTable("t14","t_{各级传动}");
t14.pre_update_flag = true;
P4.add_child(t14);
n4.add_child(t14);
T4.add_child(t14);
t14.latex_update = function(){
	t14.ele.innerHTML = `
	<tr>
		<th>参数</th>
		<th>输入功率（kW）</th>
		<th>转速n（rpm）</th>
		<th>输入转矩T（N·m）</th>
		<th>传动比i</th>
		<th>效率η</th>
	</tr>
	<tr>
		<td>电动机轴</td>
		<td>${Math.round(P1.value *100)/100}</td>
		<td>${Math.round(n1.value *100)/100}</td>
		<td>${Math.round(T1.value *100)/100}</td>
		<td rowspan="2">${i0.value}</td>
		<td rowspan="2">${e0.value}</td>
	</tr>
	<tr>
		<td>高速轴</td>
		<td rowspan="2">${Math.round(P2.value *100)/100}</td>
		<td rowspan="2">${Math.round(n2.value *100)/100}</td>
		<td rowspan="2">${Math.round(T2.value *100)/100}</td>
	</tr>
	<tr>
		<td></td>
		<td rowspan="2">${i1.value}</td>
		<td rowspan="2">${Math.round(e1.value*e2.value*1000)/1000}</td>
	</tr>
	<tr>
		<td>中间轴</td>
		<td rowspan="2">${Math.round(P3.value *100)/100}</td>
		<td rowspan="2">${Math.round(n3.value *100)/100}</td>
		<td rowspan="2">${Math.round(T3.value *100)/100}</td>
	</tr>
	<tr>
		<td></td>
		<td rowspan="2">${i2.value}</td>
		<td rowspan="2">${Math.round(e1.value*e2.value*1000)/1000}</td>
	</tr>
	<tr>
		<td>低速轴</td>
		<td>${Math.round(P4.value *100)/100}</td>
		<td>${Math.round(n4.value *100)/100}</td>
		<td>${Math.round(T4.value *100)/100}</td>
	</tr>
	`
}

const K1 = new DataDisplay("K1",K0);
const f8 = new DataFormula("f8","P_{ca}","=","K_A \\times P_d","kW");
const v_belt = new DataIframe("v_belt","/external/v_belt.html");
f8.add_child(v_belt);
t1_rspeedmax.add_child(v_belt);
v_belt.send_data = [f8,t1_rspeedmax];
const f9 = new DataText("f9", "带型");
const warning2 = document.getElementById("warning2");
function dealMessage(data){
	DesignData.is_waiting = false;
	if(data[0]==="v_belt"){
		warning2.innerText = "";
		data = data[1];
		if(data.slice(0, 1)=="D" || data.slice(0, 1)=="E"){
			f9.ele.textContent = "错误";
			warning2.innerText = "表2.5和2.8缺少D带或E带的数据，请选择其他带型或联系作者";
			return;
		}
		if(belt_type.indexOf(data)!=-1){
			f9.value = data.slice(0, 1);
			f9.value1 = data;
			f9.latex_update();
			choose_belt_d();
			f9.set_children_update_flag();
			DesignData.latex_update_all();
		}
		else{
			f9.ele.textContent = "错误";
			warning2.innerText = "没有合适的带型，可能要选窄V带，请联系作者添加";
		};
		return;
	}
};


const re_dia1 = new DataMiddle("re_dia1", "D_1",0,"mm");
f9.add_child(re_dia1);
const f10 = new DataDisplay("f10", re_dia1, true);
function choose_belt_d(){
	const d_threshold = belt_fig[f9.value1];
	const d_range = T2_7.slice(T2_7.indexOf(d_threshold[0]),T2_7.indexOf(d_threshold[1])+1);
	//console.log(d_range);
	re_dia1.value = d_range[Math.ceil(d_range.length/2)];
};
const f11 = new DataFormula("f11", "D_{2}", "=", "i_{带} \\times D_1", "mm");
const re_dia2 = new DataMiddle("re_dia2", "D_2",0,"mm");
const f12 = new DataDisplay("f12", re_dia2, true);
f11.add_child(re_dia2);
f11.after_update = function(){
	var best_d = T2_7[0];
	var best_delta = Math.abs(T2_7[0]-f11.value);
	for(i of T2_7){
		if(best_delta>Math.abs(i-f11.value)){
			best_d = i;
			best_delta = Math.abs(i-f11.value);
		}
	}
	re_dia2.value = best_d;
};
const f13 = new DataFormula("f13", "v_{带}", "=", "\\frac{\\pi D_1 n_d}{60 \\times 1000}", "m/s",0,["< 30 m/s"]);
const warning3 = new DataWarning("warning3", f13, ">", 30, "带速大于30m/s，某个地方出错了，请联系作者");
const center_dis = new DataMiddle("center_dis", "a_0", 0, "mm");
const f14 = new DataDisplay("f14", center_dis);
f13.add_child(center_dis);
f13.after_update = function(){
	center_dis.value = Math.ceil((f10.value + f12.value)*1.2/100)*100;
}
const f15 = new DataFormula("f15", "L_d^{'}", "=", "2a_0+\\frac{\\pi}{2}(D_1+D_2) + \\frac{(D_2-D_1)^{2}}{4a_0}", "mm");
const warning30 = new DataWarning("warning30", f15, ">", 4000, "LFT:你的带传动比疑似太高了哦，同学");
const base_len = new DataMiddle("base_len", "L_d", 0, "mm");
const f16 = new DataDisplay("f16", base_len);
f15.add_child(base_len);
f15.after_update = function(){
	for(i of T2_6[f9.value]){
		if(i>f15.value){
			base_len.value = i;
			break;
		}
	}
}
const f17 = new DataFormula("f17", "a", "=", "a_0 + \\frac{L_d-L_d^{'}}{2}", "mm");
const f18 = new DataFormula("f18", "\\alpha_1", "=", "180° - \\frac{D_2-D_1}{a} \\times 60°", "°",0,["> 120°"]);
const warning4 = new DataWarning("warning4", f18, "<", 120, "包角小于120度，请分析错误原因后再找作者");
const f19_1 = new DataDisplay("f19_1", t1_rspeedmax);
const f19_2 = new DataDisplay("f19_2", re_dia1);
const f19_3 = new DataDisplay("f19_3", i0);
const P50 = new DataMiddle("P50", "P_0", 0, "kW");
const P51 = new DataMiddle("P51", "\\Delta P_0", 0, "kW");
const K2 = new DataMiddle("K2", "K_{\\alpha}");
const K3 = new DataMiddle("K3", "K_L");
const f20_1 = new DataDisplay("f20_1",P50);
const f20_2 = new DataDisplay("f20_2",P51);
const f20_3 = new DataDisplay("f20_3",K2);
const f20_4 = new DataDisplay("f20_4",K3);
f18.add_child(P50);
f18.add_child(P51);
f18.add_child(K2);
f18.add_child(K3);
f18.after_update = function(){
	const small_25 = T2_5.filter(i=>i[0]==f9.value);
	const belt_num = belt_type_to_num[f9.value];
	var best_index = 0;
	var best_delta = Math.abs(small_25[0][1]-f10.value);
	for(i in small_25){
		if(Math.abs(small_25[i][1]-f10.value)<best_delta){
			best_index = i;
			best_delta = Math.abs(small_25[i][1]-f10.value);
		}
	}
	if(Math.abs(t1_rspeedmax.value-980)<80){
        P50.value = small_25[best_index][2];
        P51.value = small_25[best_index][3];
	}
	else{
        P50.value = small_25[best_index][4];
        P51.value = small_25[best_index][5];
	}
	for(i of T2_8){
		if(Math.abs(i[0]-f18.value) <= 2.5){
			K2.value = i[1];
		}
	}
	K3.value = T2_9[f16.value][belt_num];
}
const f21 = new DataFormula("f21", "z_{min}", "=", "\\frac{P_{ca}}{(P_0+\\Delta P_0) K_{\\alpha} K_L}");
const f22 = new DataMiddle("f22", "z", 0, "根");
const f23 = new DataMiddle("f23", "q", 0, "kg/m");
const f22_1 = new DataDisplay("f22_1",f22);
const f23_1 = new DataDisplay("f23_1",f23);
f21.add_child(f22);
f21.add_child(f23);
f21.after_update = function(){
	f22.value = Math.ceil(f21.value);
	f23.value = T2_2[f9.value];
}
const f24 = new DataFormula("f24", "F_0", "=", "500 \\frac{P_{ca}}{v_{带} z}( \\frac{2.5}{K_{\\alpha}}-1) + q v_{带}^{2}", "N");
const f25 = new DataFormula("f25", "F_{Qh}", "=", "2 z F_0 \\sin(\\frac{\\alpha_1}{2})", "N");

const e_dl = new DataMiddle("e_dl","e_{带}");
const f_dl = new DataMiddle("f_dl","f_{带}");
const f108 = new DataFormula("f108","d_{带轮min}","=","(z-1)e_{带}+2f_{带}","mm");
const f109_11 = new DataMiddle("f109_11","d_{带轮}",0,"mm");
const f109 = new DataDisplay("f109",f109_11);
f108.add_child(f109_11);
f108.before_update = function(){
	e_dl.value = T2_1[f9.value][0];
	f_dl.value = T2_1[f9.value][1];
}
f108.after_update = function(){
	f109_11.value = Math.ceil(f108.value/5)*5;
}


const t15_1 = new DataMiddle("t15_1","t15_{基准宽度}",0,"mm");
const t15_2 = new DataMiddle("t15_2","t15_{基准线槽深}",0,"mm");
const t15_3 = new DataMiddle("t15_3","t15_{基准线下槽深}",0,"mm");
const t15_4 = new DataMiddle("t15_4","t15_{槽间距}",0,"mm");
const t15_5 = new DataMiddle("t15_5","t15_{槽边距}",0,"mm");
const t15_6 = new DataMiddle("t15_6","t15_{最小轮缘厚}",0,"mm");
f9.after_update = function(){
	for(var i of TB2_1){
		if(i[0]==f9.value){
			t15_1.value = i[1];
			t15_2.value = i[2];
			t15_3.value = i[3];
			t15_4.value = i[4];
			t15_5.value = i[5];
			t15_6.value = i[6];
			break;
		}
	}
}
const belt_construct = [
	["小带轮外径$d_{a1}$",re_dia1],
	["大带轮外径$d_{a2}$",re_dia2],
	["基准宽度$b_{d}$",t15_1],
	["基准线槽深$h_{amin}$",t15_2],
	["基准线下槽深$h_{amax}$",t15_3],
	["槽间距$e$",t15_4],
	["槽边距$f_{min}$",t15_5],
	["最小轮缘厚$\\delta_{min}$",t15_6],
	["带轮宽$B$",f109_11],
	["槽型",f9]
];
const t15 = new DataTable("t15","t_{带轮结构尺寸}");
f9.add_child(t15);
t15.set_rows(belt_construct);
t15.pre_update_flag = true;



//高速齿轮传动部分
const g0 = new DataInput("g0","z_1");
const f26 = new DataFormula("f26", "z_{2}", "=", "i_1 z_1");
const f27 = new DataMiddle("f27", "z_2", 0);
const f27_1 = new DataDisplay("f27_1", f27);
f26.add_child(f27);
f26.after_update = function(){
	f27.value = Math.round(f26.value);
}

const aplpha_n1 = new DataConst("ALPHA_N1","\\alpha_{n1}",20,"°");
f26.add_child(aplpha_n1);
const g13 = new DataInput("g13","\\beta_1", 0, "°");
const g1 = new DataInput("g1","K_{t1}");
const g2 = new DataInput("g2","\\phi_{d1}");
const g3 = new DataInput("g3","Z_{E1}","MPa^{\\frac{1}{2}}");
const f39_1 = new DataFormula("f39_1", "\\alpha_{t1}", "=", "\\arctan(\\frac{\\tan(\\alpha_{n1})}{\\cos(\\beta_1)})", "°");
const f39_2 = new DataFormula("f39_2", "\\beta_{b1}", "=", "\\arctan(\\tan(\\beta_1) \\cos(\\alpha_{t1})) °", "°");
const f39_3 = new DataFormula("f39_3", "Z_{H1}", "=", "\\sqrt{\\frac{2\\cos(\\beta_{b1})}{\\sin(\\alpha_{t1}) \\cos(\\alpha_{t1})}}");
const h_an = new DataConst("H_AN","h_{an}^{*}",1);
const f40_1 = new DataFormula("f40_1", "\\alpha_{at1}", "=", "\\arccos(\\frac{z_1 \\cos(\\alpha_{t1})}{z_1 + 2 h_{an}^{*} \\cos(\\beta_1)}) °", "°");
const f40_2 = new DataFormula("f40_2", "\\alpha_{at2}", "=", "\\arccos(\\frac{z_2 \\cos(\\alpha_{t1})}{z_2 + 2 h_{an}^{*} \\cos(\\beta_1)}) °", "°");
const f40_3 = new DataFormula("f40_3", "\\varepsilon_{\\alpha 1}", "=", "\\frac{z_1 (\\tan(\\alpha_{at1}) - \\tan(\\alpha_{t1})) + z_2 (\\tan(\\alpha_{at2}) - \\tan(\\alpha_{t1}))}{2 \\pi}");

const g5 = new DataInput("g5","\\sigma_{Hlim1}","MPa");
const g5_1 = new DataMiddle("g5_1","\\sigma_{Hlim2}");
f40_3.add_child(g5);
g5.add_child(g5_1);
g5.after_update = function(){
	g5_1.value = g5.value;
}
const f28 = new DataDisplay("f28",T2);
const j_const = new DataConst("J_CONST","j",1);
const L_h = new DataConst("L_H","L_h",48000);
const f29_1 = new DataFormula("f29_1", "N_1", "=", "60 n_{Ⅰ} j L_h");
const f29_2 = new DataFormula("f29_2", "N_2", "=", "\\frac{N_1}{i_1}");

const g6 = new DataInput("g6","K_{HN1}");
const g7 = new DataInput("g7","K_{HN2}");
f29_1.add_child(g6);
f29_2.add_child(g7);
g6.after_update = function(){
	if(!g6.cookie_flag){
		g6.value = Math.round(((5*(10**7)/f29_1.value)**0.0306)*100)/100;
		g6.ele.value = g6.value;
	}
}
g7.after_update = function(){
	if(!g7.cookie_flag){
		g7.value = Math.round(((5*(10**7)/f29_2.value)**0.0306)*100)/100;
		g7.ele.value = g7.value;
	}
}
const S_H = new DataConst("S_H","S_H",1);
const f30_1 = new DataFormula("f30_1", "[\\sigma_{H}]_1", "=", "\\frac{K_{HN1} \\sigma_{Hlim1}}{S_H}","MPa");
const f30_2 = new DataFormula("f30_2", "[\\sigma_{H}]_2", "=", "\\frac{K_{HN2} \\sigma_{Hlim2}}{S_H}","MPa");
const f31 = new DataMiddle("f31","[\\sigma_{H}]_{g1}", 0, "MPa");
const f31_1 = new DataDisplay("f31_1",f31);
f29_2.add_child(f30_1);
f29_2.add_child(f30_2);
f30_2.add_child(f31);
f30_2.after_update = function(){
	f31.value = Math.round((f30_1.value+f30_2.value)/2);
}

const f32 = new DataFormula("f32", "d_{1t}", "\\ge", "\\sqrt[3]{\\frac{2000 K_{t1} T_{Ⅰ}}{\\phi_{d1} \\varepsilon_{\\alpha 1}} \\times \\frac{i_1+1}{i_1} \\times (\\frac{Z_{H1} Z_{E1}}{[\\sigma_{H}]_{g1}})^{2}}","mm");
const f33 = new DataFormula("f33", "v_{g1}", "=", "\\frac{\\pi d_{1t} n_{Ⅰ}}{60 \\times 1000}","m/s");
const f34 = new DataFormula("f34", "b_{g1}", "=", "\\phi_{d1} d_{1t}","mm");
const f35 = new DataFormula("f35", "\\frac{b1}{h1}", "=", "\\frac{\\phi_{d1} z_1}{2.25 \\cos(\\beta_1)}");
f34.add_child(f35);

const g8 = new DataInput("g8","K_{v1}");
const g9 = new DataInput("g9","K_{\\alpha 1}");
const g10 = new DataInput("g10","K_{A1}");
const g11 = new DataInput("g11","K_{H\\beta 1}");
const f36 = new DataFormula("f36", "K_1", "=", "K_{A1} K_{v1} K_{\\alpha 1} K_{H\\beta 1}");
const f37 = new DataFormula("f37", "d_{1}", "=", "d_{1t} \\sqrt[3]{\\frac{K_1}{K_{t1}}}","mm");
const f38 = new DataFormula("f38", "m_{1min}", "=", "\\frac{d_{1} \\cos(\\beta_1)}{z_1}", "mm");
const f51 = new DataMiddle("f51","m_1", 0, "mm");
const f51_1 = new DataDisplay("f51_1",f51);
f35.add_child(f36);
f38.add_child(f51);
f38.after_update = function(){
	for(var i in T12_0){
		if(f38.value+0.5-T12_0[i] < 0){
			f51.value = T12_0[i];
			break;
		}
	}
}

const g12 = new DataInput("g12","K_{F\\beta 1}");
const f41 = new DataFormula("f41", "K_2", "=", "K_{A1} K_{v1} K_{\\alpha 1} K_{F\\beta 1}");
const f42_1 = new DataFormula("f42_1", "z_{v1}", "=", "\\frac{z_1}{(\\cos(\\beta_1))^3}");
const f42_2 = new DataFormula("f42_2", "z_{v2}", "=", "\\frac{z_2}{(\\cos(\\beta_1))^3}");
f35.add_child(f41);
f35.add_child(f42_1);
const f43_1 = new DataMiddle("f43_1", "Y_{Fa1}");
const f43_2 = new DataMiddle("f43_2", "Y_{sa1}");
const f43_3 = new DataMiddle("f43_3", "Y_{Fa2}");
const f43_4 = new DataMiddle("f43_4", "Y_{sa2}");
const f43_11 = new DataDisplay("f43_11",f43_1);
const f43_21 = new DataDisplay("f43_21",f43_2);
const f43_31 = new DataDisplay("f43_31",f43_3);
const f43_41 = new DataDisplay("f43_41",f43_4);
f42_2.children = [f43_1,f43_2,f43_3,f43_4];
f42_2.after_update = function(){
	var zi1=0;
	var zi1_flag = 1;
	var zi2=0;
	for(i in T12_6){
		if(f42_1.value-T12_6[i][0] < 0 && zi1_flag){
			zi1 = i-1;
			zi1_flag = 0;
		}
		if(f42_2.value-T12_6[i][0] < 0){
			zi2 = i-1;
			break;
		}
	}
	f43_1.value = (T12_6[zi1+1][1]-T12_6[zi1][1])/(T12_6[zi1+1][0]-T12_6[zi1][0])*(f42_1.value-T12_6[zi1][0])+T12_6[zi1][1];
	f43_2.value = (T12_6[zi1+1][2]-T12_6[zi1][2])/(T12_6[zi1+1][0]-T12_6[zi1][0])*(f42_1.value-T12_6[zi1][0])+T12_6[zi1][2];
	f43_3.value = (T12_6[zi2+1][1]-T12_6[zi2][1])/(T12_6[zi2+1][0]-T12_6[zi2][0])*(f42_2.value-T12_6[zi2][0])+T12_6[zi2][1];
	f43_4.value = (T12_6[zi2+1][2]-T12_6[zi2][2])/(T12_6[zi2+1][0]-T12_6[zi2][0])*(f42_2.value-T12_6[zi2][0])+T12_6[zi2][2];
}

const f44 = new DataFormula("f44", "\\varepsilon_{\\beta 1ref}", "=", "0.318 \\phi_{d1} z_1 \\tan(\\beta_1)");
const f45 = new DataMiddle("f45","\\varepsilon_{\\beta 1}");
const f45_1 = new DataDisplay("f45_1",f45);
f43_4.add_child(f44);
f44.add_child(f45);
f44.after_update = function(){
	if(f44.value>1){
		f45.value = 1;
	}else{
		f45.value = f44.value;
	}
}
const f46 = new DataFormula("f46", "Y_{\\beta 1}", "=", "1- \\varepsilon_{\\beta 1} \\times \\frac{\\beta_1}{120 °}");

const g14 = new DataInput("g14","\\sigma_{Flim1}");
const sigma_flim2 = new DataMiddle("SIGMA_FLIM2","\\sigma_{Flim2}");
f46.add_child(g14);
g14.add_child(sigma_flim2);
g14.after_update = function(){
	sigma_flim2.value = g14.value;
}
const g15 = new DataInput("g15","K_{FN1}");
const g16 = new DataInput("g16","K_{FN2}");
const g17 = new DataInput("g17","S_{F1}");
const f47_1 = new DataFormula("f47_1", "[\\sigma_{F}]_1", "=", "\\frac{K_{FN1} \\sigma_{Flim1}}{S_{F1}}", "MPa");
const f47_2 = new DataFormula("f47_2", "[\\sigma_{F}]_2", "=", "\\frac{K_{FN2} \\sigma_{Flim2}}{S_{F1}}", "MPa");
const f48 = new DataFormula("f48", "[ \\sigma_{F} ]_{1s}", "=", "\\frac{2000 K_1 T_{Ⅰ} Y_{\\beta 1} (\\cos(\\beta_1))^2}{\\phi_{d1} \\varepsilon_{\\alpha 1} z_1^{2} m_1^{3}} Y_{Fa1} Y_{sa1}", "MPa", 0, ["\\le [\\sigma_{F}]_1 = ",f47_1,"MPa"]);
const f49 = new DataFormula("f49", "[ \\sigma_{F} ]_{2s}", "=", "\\frac{2000 K_1 T_{Ⅰ} Y_{\\beta 1} (\\cos(\\beta_1))^2}{\\phi_{d1} \\varepsilon_{\\alpha 1} z_1^{2} m_1^{3}} Y_{Fa2} Y_{sa2}", "MPa", 0, ["\\le [\\sigma_{F}]_2 = ",f47_2,"MPa"]);
const warning41 = new DataWarning("warning41", f48, ">", f47_1, "小齿轮校验不合格");
const warning42 = new DataWarning("warning42", f49, ">", f47_2, "大齿轮校验不合格");

const f52 = new DataFormula("f52", "a_{1}", "=", "m_1 \\frac{z_1 + z_2}{2 \\cos(\\beta_1)}", "mm");
const f53 = new DataMiddle("f53","a_1",0,"mm");
const f53_1 = new DataDisplay("f53_1",f53)
f52.add_child(f53);
f52.after_update = function(){
	f53.value = Math.ceil(f52.value);
}
const f54 = new DataFormula("f54", "\\beta_{1}^{'}", "=", "\\arccos(m_1 \\frac{z_1+z_2}{2 a_1})", "°");
const f54_1 = new DataMiddle("f54_1", " \\beta_{1}^{'} ");
f54.addition_latex_list = ["=",f54_1];
f54.after_update = function(){
	f54_1.value = formatDegree(f54.value);
}
const f55_1 = new DataFormula("f55_1", "d_1", "=", "\\frac{m_1 z_1}{\\cos(\\beta_{1}^{'})}", "mm");
const f55_2 = new DataFormula("f55_2", "d_2", "=", "\\frac{m_1 z_2}{\\cos(\\beta_{1}^{'})}", "mm");
const f56 = new DataFormula("f56", "b_{1}", "=", "\\phi_{d1} d_1", "mm");
const f57_11 = new DataMiddle("f57_11", "B_2", 0, "mm");
const f57_2 = new DataDisplay("f57_1",f57_11);
const f57_1 = new DataFormula("f57_2", "B_1", "=", "B_2 + 5", "mm");
f56.add_child(f57_11);
f56.after_update = function(){
	f57_11.value = Math.ceil(f56.value/5)*5;
}


const gearh_size = [
	["法向模数","$ m_n $",getdd("m_1")],
	["端面模数","$ m_t $",getdd("\\frac{m_1}{\\cos(\\beta_{1}^{'})}","mm")],
	["螺旋角","$ \\beta $",getdd(" \\beta_{1}^{'} ")],
	["法向压力角","$ \\alpha_n $",getdd("\\alpha_{n1}")],
	["端面压力角","$ \\alpha_t $",getdd("\\arctan(\\frac{\\tan(\\alpha_{n1})}{\\cos(\\beta_{1}^{'})})","°")],
	["分度圆直径","$ d_1、d_2 $",[getdd("d_1"),"、",getdd("d_2")]],
	["齿顶高","$ h_d $",getdd("m_1")],
	["齿根高","$ h_f $",getdd("1.25 m_1","mm")],
	["全齿高","$ h $",getdd("2.25 m_1","mm")],
	["顶隙","$ c $",getdd("0.25 m_1","mm")],
	["齿顶圆直径","$ d_{a1}、d_{a2} $",[getdd("d_1+2 m_1","mm"),"、",getdd("d_2+2 m_1","mm")]],
	["齿根圆直径","$ d_{f1}、d_{f2} $",[getdd("d_1-2.5 m_1","mm"),"、",getdd("d_2-2.5 m_1","mm")]],
	["中心距","$ a $",getdd("a_1")],
	["传动比","$ i $",getdd("i_1")],
	["压力角","$ \\alpha_n $",getdd("\\alpha_{n1}")],
	["齿数","$ z_1、z_2 $",[getdd("z_1"),"、",getdd("z_2")]],
	["齿宽","$ b_1、b_2 $",[getdd("B_1"),"、",getdd("B_2")]],
	["螺旋方向","","小齿轮右旋，大齿轮左旋"],
];
const t16 = new DataTable("t16","t_{高速级齿轮几何尺寸}");
t16.table_head = ["名称","代号","计算公式与结果"];
t16.set_rows(gearh_size);
t16.pre_update_flag = true;


//低速齿轮部分
const g18 = new DataInput("g18","z_3");
const f58 = new DataFormula("f58", "z_{4}", "=", "i_2 z_3");
const f59 = new DataMiddle("f59", "z_4", 0);
const f59_1 = new DataDisplay("f59_1", f59);
f58.add_child(f59);
f58.after_update = function(){
	f59.value = Math.round(f58.value);
}

const aplpha_n2 = new DataConst("ALPHA_N2","\\alpha_{n2}",20,"°");
f58.add_child(aplpha_n2);
const g31 = new DataInput("g31","\\beta_2", 0, "°");
const g19 = new DataInput("g19","K_{t2}");
const g20 = new DataInput("g20","\\phi_{d2}");
const g21 = new DataInput("g21","Z_{E2}","MPa^{\\frac{1}{2}}");
const f71_1 = new DataFormula("f71_1", "\\alpha_{t2}", "=", "\\arctan(\\frac{\\tan(\\alpha_{n2})}{\\cos(\\beta_2)})", "°");
const f71_2 = new DataFormula("f71_2", "\\beta_{b2}", "=", "\\arctan(\\tan(\\beta_2) \\cos(\\alpha_{t2})) °", "°");
const f71_3 = new DataFormula("f71_3", "Z_{H2}", "=", "\\sqrt{\\frac{2\\cos(\\beta_{b2})}{\\sin(\\alpha_{t2}) \\cos(\\alpha_{t2})}}");
const f72_1 = new DataFormula("f72_1", "\\alpha_{at3}", "=", "\\arccos(\\frac{z_3 \\cos(\\alpha_{t2})}{z_3 + 2 h_{an}^{*} \\cos(\\beta_2)}) °", "°");
const f72_2 = new DataFormula("f72_2", "\\alpha_{at4}", "=", "\\arccos(\\frac{z_4 \\cos(\\alpha_{t2})}{z_4 + 2 h_{an}^{*} \\cos(\\beta_2)}) °", "°");
const f72_3 = new DataFormula("f72_3", "\\varepsilon_{\\alpha 2}", "=", "\\frac{z_3 (\\tan(\\alpha_{at3}) - \\tan(\\alpha_{t2})) + z_4 (\\tan(\\alpha_{at4}) - \\tan(\\alpha_{t2}))}{2 \\pi}");

const g23 = new DataInput("g23","\\sigma_{Hlim3}","MPa");
const g23_1 = new DataMiddle("g23_1","\\sigma_{Hlim4}");
f72_3.add_child(g23);
g23.add_child(g23_1);
g23.after_update = function(){
	g23_1.value = g23.value;
}
const f60 = new DataDisplay("f60",T3);
const f61_1 = new DataFormula("f61_1", "N_3", "=", "60 n_{Ⅱ} j L_h");
const f61_2 = new DataFormula("f61_2", "N_4", "=", "\\frac{N_3}{i_2}");

const g24 = new DataInput("g24","K_{HN3}");
const g25 = new DataInput("g25","K_{HN4}");
f61_1.add_child(g24);
f61_2.add_child(g25);
g24.after_update = function(){
	if(!g24.cookie_flag){
		g24.value = Math.round(((5*(10**7)/f61_1.value)**0.0306)*100)/100;
		g24.ele.value = g24.value;
	}
}
g25.after_update = function(){
	if(!g25.cookie_flag){
		g25.value = Math.round(((5*(10**7)/f61_2.value)**0.0306)*100)/100;
		g25.ele.value = g25.value;
	}
}
const f62_1 = new DataFormula("f62_1", "[\\sigma_{H}]_3", "=", "\\frac{K_{HN3} \\sigma_{Hlim3}}{S_H}","MPa");
const f62_2 = new DataFormula("f62_2", "[\\sigma_{H}]_4", "=", "\\frac{K_{HN4} \\sigma_{Hlim4}}{S_H}","MPa");
const f63 = new DataMiddle("f63","[\\sigma_{H}]_{g3}", 0, "MPa");
const f63_1 = new DataDisplay("f63_1",f63);
f61_2.add_child(f62_1);
f61_2.add_child(f62_2);
f62_2.add_child(f63);
f62_2.after_update = function(){
	f63.value = Math.round((f62_1.value+f62_2.value)/2);
}

const f64 = new DataFormula("f64", "d_{2t}", "\\ge", "\\sqrt[3]{\\frac{2000 K_{t2} T_{Ⅱ}}{\\phi_{d2} \\varepsilon_{\\alpha 2}} \\times \\frac{i_2+1}{i_2} \\times (\\frac{Z_{H2} Z_{E2}}{[\\sigma_{H}]_{g3}})^{2}}","mm");
const f65 = new DataFormula("f65", "v_{g2}", "=", "\\frac{\\pi d_{2t} n_{Ⅱ}}{60 \\times 1000}","m/s");
const f66 = new DataFormula("f66", "b_{g2}", "=", "\\phi_{d2} d_{2t}","mm");
const f67 = new DataFormula("f67", "\\frac{b2}{h2}", "=", "\\frac{\\phi_{d2} z_3}{2.25 \\cos(\\beta_2)}");
f66.add_child(f67);

const g26 = new DataInput("g26","K_{v2}");
const g27 = new DataInput("g27","K_{\\alpha 2}");
const g28 = new DataInput("g28","K_{A2}");
const g29 = new DataInput("g29","K_{H\\beta 2}");
const f68 = new DataFormula("f68", "K_3", "=", "K_{A2} K_{v2} K_{\\alpha 2} K_{H\\beta 2}");
const f69 = new DataFormula("f69", "d_{2}", "=", "d_{2t} \\sqrt[3]{\\frac{K_3}{K_{t2}}}","mm");
const f70 = new DataFormula("f70", "m_{2min}", "=", "\\frac{d_{2} \\cos(\\beta_2)}{z_3}", "mm");
const f83 = new DataMiddle("f83","m_2", 0, "mm");
const f83_1 = new DataDisplay("f83_1",f83);
f67.add_child(f68);
f70.add_child(f83);
f70.after_update = function(){
	for(var i in T12_0){
		if(f70.value+0.5-T12_0[i] < 0){
			f83.value = T12_0[i];
			break;
		}
	}
}

const g30 = new DataInput("g30","K_{F\\beta 2}");
const f73 = new DataFormula("f73", "K_4", "=", "K_{A2} K_{v2} K_{\\alpha 2} K_{F\\beta 2}");
const f74_1 = new DataFormula("f74_1", "z_{v3}", "=", "\\frac{z_3}{(\\cos(\\beta_2))^3}");
const f74_2 = new DataFormula("f74_2", "z_{v4}", "=", "\\frac{z_4}{(\\cos(\\beta_2))^3}");
f67.add_child(f73);
f67.add_child(f74_1);
const f75_1 = new DataMiddle("f75_1", "Y_{Fa3}");
const f75_2 = new DataMiddle("f75_2", "Y_{sa3}");
const f75_3 = new DataMiddle("f75_3", "Y_{Fa4}");
const f75_4 = new DataMiddle("f75_4", "Y_{sa4}");
const f75_11 = new DataDisplay("f75_11",f75_1);
const f75_21 = new DataDisplay("f75_21",f75_2);
const f75_31 = new DataDisplay("f75_31",f75_3);
const f75_41 = new DataDisplay("f75_41",f75_4);
f74_2.children = [f75_1,f75_2,f75_3,f75_4];
f74_2.after_update = function(){
	var zi1=0;
	var zi1_flag = 1;
	var zi2=0;
	for(i in T12_6){
		if(f74_1.value-T12_6[i][0] < 0 && zi1_flag){
			zi1 = i-1;
			zi1_flag = 0;
		}
		if(f74_2.value-T12_6[i][0] < 0){
			zi2 = i-1;
			break;
		}
	}
	f75_1.value = (T12_6[zi1+1][1]-T12_6[zi1][1])/(T12_6[zi1+1][0]-T12_6[zi1][0])*(f74_1.value-T12_6[zi1][0])+T12_6[zi1][1];
	f75_2.value = (T12_6[zi1+1][2]-T12_6[zi1][2])/(T12_6[zi1+1][0]-T12_6[zi1][0])*(f74_1.value-T12_6[zi1][0])+T12_6[zi1][2];
	f75_3.value = (T12_6[zi2+1][1]-T12_6[zi2][1])/(T12_6[zi2+1][0]-T12_6[zi2][0])*(f74_2.value-T12_6[zi2][0])+T12_6[zi2][1];
	f75_4.value = (T12_6[zi2+1][2]-T12_6[zi2][2])/(T12_6[zi2+1][0]-T12_6[zi2][0])*(f74_2.value-T12_6[zi2][0])+T12_6[zi2][2];
}

const f76 = new DataFormula("f76", "\\varepsilon_{\\beta 2ref}", "=", "0.318 \\phi_{d2} z_3 \\tan(\\beta_2)");
const f77 = new DataMiddle("f77","\\varepsilon_{\\beta 2}");
const f77_1 = new DataDisplay("f77_1",f77);
f75_4.add_child(f76);
f76.add_child(f77);
f76.after_update = function(){
	if(f76.value>1){
		f77.value = 1;
	}else{
		f77.value = f76.value;
	}
}
const f78 = new DataFormula("f78", "Y_{\\beta 2}", "=", "1- \\varepsilon_{\\beta 2} \\times \\frac{\\beta_2}{120 °}");

const g32 = new DataInput("g32","\\sigma_{Flim3}");
const sigma_flim4 = new DataMiddle("SIGMA_FLIM4","\\sigma_{Flim4}");
f78.add_child(g32);
g32.add_child(sigma_flim4);
g32.after_update = function(){
	sigma_flim4.value = g32.value;
}
const g33 = new DataInput("g33","K_{FN3}");
const g34 = new DataInput("g34","K_{FN4}");
const g35 = new DataInput("g35","S_{F2}");
const f79_1 = new DataFormula("f79_1", "[\\sigma_{F}]_3", "=", "\\frac{K_{FN3} \\sigma_{Flim3}}{S_{F2}}", "MPa");
const f79_2 = new DataFormula("f79_2", "[\\sigma_{F}]_4", "=", "\\frac{K_{FN4} \\sigma_{Flim4}}{S_{F2}}", "MPa");
const f80 = new DataFormula("f80", "[ \\sigma_{F} ]_{3s}", "=", "\\frac{2000 K_4 T_{Ⅱ} Y_{\\beta 2} (\\cos(\\beta_2))^2}{\\phi_{d2} \\varepsilon_{\\alpha 2} z_3^{2} m_2^{3}} Y_{Fa3} Y_{sa3}", "MPa", 0, ["\\le [\\sigma_{F}]_3 = ",f79_1,"MPa"]);
const f81 = new DataFormula("f81", "[ \\sigma_{F} ]_{4s}", "=", "\\frac{2000 K_4 T_{Ⅱ} Y_{\\beta 2} (\\cos(\\beta_2))^2}{\\phi_{d2} \\varepsilon_{\\alpha 2} z_3^{2} m_2^{3}} Y_{Fa4} Y_{sa4}", "MPa", 0, ["\\le [\\sigma_{F}]_4 = ",f79_2,"MPa"]);
const warning43 = new DataWarning("warning43", f80, ">", f79_1, "小齿轮校验不合格");
const warning44 = new DataWarning("warning44", f81, ">", f79_2, "大齿轮校验不合格");

const f84 = new DataFormula("f84", "a_{2}", "=", "m_2 \\frac{z_3 + z_4}{2 \\cos(\\beta_2)}", "mm");
const f85 = new DataMiddle("f85","a_2",0,"mm");
const f85_1 = new DataDisplay("f85_1",f85)
f84.add_child(f85);
f84.after_update = function(){
	f85.value = Math.ceil(f84.value);
}
const f86 = new DataFormula("f86", "\\beta_{2}^{'}", "=", "\\arccos(m_2 \\frac{z_3+z_4}{2 a_2})", "°");
const f86_1 = new DataMiddle("f86_1", " \\beta_{2}^{'} ");
f86.addition_latex_list = ["=",f86_1];
f86.after_update = function(){
	f86_1.value = formatDegree(f86.value);
}
const f87_1 = new DataFormula("f87_1", "d_3", "=", "\\frac{m_2 z_3}{\\cos(\\beta_{2}^{'})}", "mm");
const f87_2 = new DataFormula("f87_2", "d_4", "=", "\\frac{m_2 z_4}{\\cos(\\beta_{2}^{'})}", "mm");
const f88 = new DataFormula("f88", "b_{3}", "=", "\\phi_{d2} d_3", "mm");
const f89_11 = new DataMiddle("f89_11", "B_4", 0, "mm");
const f89_2 = new DataDisplay("f89_1",f89_11);
const f89_1 = new DataFormula("f89_2", "B_3", "=", "B_4 + 5", "mm");
f88.add_child(f89_11);
f88.after_update = function(){
	f89_11.value = Math.ceil(f88.value/5)*5;
}


const gearl_size = [
	["法向模数","$ m_n $",getdd("m_2")],
	["端面模数","$ m_t $",getdd("\\frac{m_2}{\\cos(\\beta_{2}^{'})}","mm")],
	["螺旋角","$ \\beta $",getdd(" \\beta_{2}^{'} ")],
	["法向压力角","$ \\alpha_n $",getdd("\\alpha_{n2}")],
	["端面压力角","$ \\alpha_t $",getdd("\\arctan(\\frac{\\tan(\\alpha_{n2})}{\\cos(\\beta_{2}^{'})})","°")],
	["分度圆直径","$ d_3、d_4 $",[getdd("d_3"),"、",getdd("d_4")]],
	["齿顶高","$ h_d $",getdd("m_2")],
	["齿根高","$ h_f $",getdd("1.25 m_2","mm")],
	["全齿高","$ h $",getdd("2.25 m_2","mm")],
	["顶隙","$ c $",getdd("0.25 m_2","mm")],
	["齿顶圆直径","$ d_{a3}、d_{a4} $",[getdd("d_3+2 m_2","mm"),"、",getdd("d_4+2 m_2","mm")]],
	["齿根圆直径","$ d_{f3}、d_{f4} $",[getdd("d_3-2.5 m_2","mm"),"、",getdd("d_4-2.5 m_2","mm")]],
	["中心距","$ a $",getdd("a_2")],
	["传动比","$ i $",getdd("i_2")],
	["压力角","$ \\alpha_n $",getdd("\\alpha_{n2}")],
	["齿数","$ z_3、z_4 $",[getdd("z_3"),"、",getdd("z_4")]],
	["齿宽","$ b_3、b_4 $",[getdd("B_3"),"、",getdd("B_4")]],
	["螺旋方向","","小齿轮左旋，大齿轮右旋"],
];
const t17 = new DataTable("t17","t_{低速级齿轮几何尺寸}");
t17.table_head = ["名称","代号","计算公式与结果"];
t17.set_rows(gearl_size);
t17.pre_update_flag = true;


//中间轴的设计
const d0 = new DataInput("d0","A_m");
const f90 = new DataFormula("f90","d_{ mmin }","\\ge","A_m \\sqrt[3]{\\frac{P_{Ⅱ}}{n_{Ⅱ}}}", "mm");
const f91_1 = new DataMiddle("f91_1","d_{mmin}", 0, "mm");
const f91 = new DataDisplay("f91",f91_1);
f90.add_child(f91_1);
f90.after_update = function(){
	f91_1.value = Math.ceil(f90.value/5)*5;
}

const d1 = new DataSelect("d1","d_{滚m}",0,"mm");
const f92 = new DataDisplay("f92",d1);
const d2 = new DataSelect("d2","zc_{圆锥滚子m}");
const f99_11 = new DataMiddle("f99_11","T_m^{'}",0,"mm");
const f99_21 = new DataMiddle("f99_21","B_m^{'}",0,"mm");
const f99_31 = new DataMiddle("f99_31","a_m^{'}",0,"mm");
const f99_41 = new DataMiddle("f99_41","D_m^{'}",0,"mm");
const f99_1 = new DataDisplay("f99_1",f99_11);
const f99_2 = new DataDisplay("f99_2",f99_21);
const f99_3 = new DataDisplay("f99_3",f99_31);
const f99_4 = new DataDisplay("f99_4",f99_41);
let fit_bearing = [];
const warning5 = document.getElementById("warning5");
f91_1.add_child(d1);
d1.add_child(d2);
d2.children = [f99_11,f99_21,f99_31,f99_41];
d1.before_update = function(){
	d1.options = [];
	d1.options.push(f91.value+5);
	d1.options.push(f91.value+10);
	d1.options.push(f91.value+15);
	d1.selected = 1;
	d1.options_change_flag = true;
}
d2.before_update = function(){
	if(d2.options.length!=0 && parseFloat(d2.options[0].slice(3,5))*5==f92.value){
		return;
	}
	d2.options = [];
	warning5.innerText = "";
	fit_bearing = T_zc.filter((num) => {return num[1] == f92.value && num[6]<1000;});
	d2.selected = 0;
	if(fit_bearing.length == 0){
		warning5.innerText = "警告，轴承内径不在标准范围内";
	}
	for(i in fit_bearing){
		d2.options.push(String(fit_bearing[i][0]));
		if("02" === String(fit_bearing[i][0]).slice(1,3)){
			d2.selected = i;
		}
	}
	d2.options_change_flag = true;
}
d2.after_update = function(){
	f99_11.value = fit_bearing[d2.ele.options[d2.selected].value][3];
	f99_21.value = fit_bearing[d2.ele.options[d2.selected].value][4];
	f99_31.value = fit_bearing[d2.ele.options[d2.selected].value][5];
	f99_41.value = fit_bearing[d2.ele.options[d2.selected].value][2];
}

const f93_1 = new DataDisplay("f93_1",f57_2);
const f93_2 = new DataDisplay("f93_2",f89_1);
const d3 = new DataInput("d3","\\Delta_m");
const d4 = new DataInput("d4","\\Delta_{1m}");
const d5 = new DataInput("d5","\\Delta_{2m}");
const f94 = new DataFormula("f94","b_{内}","=","B_2 + B_3 + \\Delta_m + 2\\Delta_{1m} + 2.5", "mm");
const f94_1 = new DataFormula("f94_1","b_{内实}","=","b_{内} + 4", "mm");
const f95 = new DataFormula("f95","l_m","=","b_{内} + 2\\Delta_{2m} + 2T_m^{'}", "mm");
const d_gearm = new DataMiddle("d_gearm","d_{齿轮m}",0,"mm");
d1.add_child(d_gearm);
d_gearm.before_update = function(){
	d_gearm.value = d1.value+5;
}
const l_gearm = new DataMiddle("l_gearm","l_{齿轮m}",0,"mm");
f57_11.add_child(l_gearm);
l_gearm.before_update = function(){
	l_gearm.value = f57_11.value-2;
}

function getdd(s,u=""){
	var temp = DesignData.all_ls[s];
	if(temp!==undefined){
		return temp;
	}else{
		return new DataFormula("","","=",s,u);
	}
}
const zhou_m = new DataIframe("zhou_m","/external/zhou.html",false);
f94.add_child(zhou_m);
f95.add_child(zhou_m);
zhou_m.send_data = [[
	{ len: getdd("T_m^{'}"), dia: getdd("d_{滚m}") },
	{ len: getdd("\\Delta_{2m}"), dia: getdd("d_{滚m}") }, 
	{ len: getdd("\\Delta_{1m}"), dia: getdd("d_{滚m}+10") },
	{ len: getdd("B_3"), dia: getdd("d_3 + 2 m_2") }, 
	{ len: getdd("\\Delta_m"), dia: getdd("d_{滚m}+10") }, 
	{ len: getdd("l_{齿轮m}"), dia: getdd("d_{齿轮m}") }, 
	{ len: getdd("\\Delta_{1m}+4.5"), dia: getdd("d_{滚m}") }, 
	{ len: getdd("\\Delta_{2m}"), dia: getdd("d_{滚m}") },
	{ len: getdd("T_m^{'}"), dia: getdd("d_{滚m}") } // 无台阶
],"middle"];

const d6 = new DataSelect("d6","d_{2m}",0,"mm");
const d6_1 = new DataInput("d6_1","t_m",0,"mm");
const f404_11 = new DataMiddle("f404_11","k_m",0,"mm");
const f404 = new DataDisplay("f404",f404_11);
d2.add_child(d6);
d6.add_child(f404_11);
d6.add_child(d6_1);
d6.before_update = function(){
	d6.options = [];
	let temp = 0;
	for(var item of T3_19){
		if(f99_41.value-item[0]<0){
			break;
		}
		temp = item[1];
	}
	for(var i in T11_3){
		d6.options.push(T11_3[i][0]);
		if(T11_3[i][0]==temp){
			d6.selected = i;
			f404_11.value = T11_3[i][1];
		}
	}
	d6.options_change_flag = true;
}
d6_1.before_update = function(){
	d6_1.value = Math.round(1.2*d6.value);
	d6_1.ele.value = Math.round(1.2*d6.value);
}

const c1 = new DataMiddle("c1","c_1",26,"mm");
const c2 = new DataMiddle("c2","c_2",21,"mm");
const D_0 = new DataMiddle("D_0","D_0",40,"mm");
const c11 = new DataMiddle("c11","c_1^{'}",30,"mm");
const c21 = new DataMiddle("c21","c_2^{'}",25,"mm");
const D_01 = new DataMiddle("D_01","D_0^{'}",48,"mm");
const stone_bolt_d = new DataMiddle("stone_bolt_d","d_{地}",20,"φ");
const stone_bolt_n = new DataMiddle("stone_bolt_n","n_{地}",6);
const bearing_base_d = new DataMiddle("bearing_base_d","d_{轴承座}",16,"φ");
f85.add_child(stone_bolt_d);
f85.add_child(bearing_base_d);
stone_bolt_d.before_update = function(){
	for(item of T3_18){
		if(f85.value <= item[0]){
			stone_bolt_d.value = item[1];
			stone_bolt_n.value = item[2];
			break;
		}
	}
	for(item of T3_17){
		if(item[0]>=stone_bolt_d.value){
			c11.value = item[1];
			c21.value = item[2];
			D_01.value = item[3];
			break;
		}
	}
}
bearing_base_d.before_update = function(){
	for(item of T3_16){
		if(item[0]>=stone_bolt_d.value*0.75){
			bearing_base_d.value = item[0];
			c1.value = item[1];
			c2.value = item[2];
			D_0.value = item[3];
			break;
		}
	}
}


const d7 = new DataInput("d7","\\delta_1");
const d8 = new DataInput("d8","d_{凸台}");
const f97 = new DataFormula("f97","h_1","=","c_1 + c_2 + \\delta_1 + d_{凸台}", "mm");
const f98 = new DataFormula("f98","b_{外}","=","b_{内实} + 2h_1", "mm");
f95.add_child(f97);



//高速轴的设计
const d9 = new DataInput("d9","A_h");
const f100 = new DataFormula("f100","d_{ hmin }","\\ge","A_h \\sqrt[3]{\\frac{P_{Ⅰ}}{n_{Ⅰ}}}", "mm");

const d10 = new DataSelect("d10","d_{带h}",0,"mm");
f100.add_child(d10);
d10.before_update = function(){
	var temp = Math.ceil(f100.value/5)*5;
	d10.options = [];
	d10.options.push(temp+5);
	d10.options.push(temp+10);
	d10.options.push(temp+15);
	d10.selected = 0;
	d10.options_change_flag = true;
}
const f101 = new DataFormula("f101","d_{密h}","=","d_{带h} + 5", "mm");
const f102 = new DataFormula("f102","d_{滚动h}","=","d_{密h} + 5", "mm");
const f103 = new DataDisplay("f103",f102);
const d11 = new DataSelect("d11","zc_{圆锥滚子h}");
const f104_11 = new DataMiddle("f104_11","T_h^{'}",0,"mm");
const f104_21 = new DataMiddle("f104_21","B_h^{'}",0,"mm");
const f104_31 = new DataMiddle("f104_31","a_h^{'}",0,"mm");
const f104_41 = new DataMiddle("f104_41","D_h^{'}",0,"mm");
const f104_51 = new DataMiddle("f104_51","d_{ah}^{'}",0,"mm");
const f104_1 = new DataDisplay("f104_1",f104_11);
const f104_2 = new DataDisplay("f104_2",f104_21);
const f104_3 = new DataDisplay("f104_3",f104_31);
const f104_4 = new DataDisplay("f104_4",f104_41);
const f104_5 = new DataDisplay("f104_5",f104_51);
let fit_bearing2 = [];
const warning6 = document.getElementById("warning6");
f102.add_child(d11);
d11.children = [f104_11,f104_21,f104_31,f104_41,f104_51];
d11.before_update = function(){
	if(d11.options.length!=0 && parseFloat(d11.options[0].slice(3,5))*5==f102.value){
		return;
	}
	d11.options = [];
	warning6.innerText = "";
	fit_bearing2 = T_zc.filter((num) => {return num[1] == f102.value && num[6]<1000;});
	d11.selected = 0;
	if(fit_bearing2.length == 0){
		warning6.innerText = "警告，轴承内径不在标准范围内";
	}
	for(i in fit_bearing2){
		d11.options.push(String(fit_bearing2[i][0]));
		if("02" === String(fit_bearing2[i][0]).slice(1,3)){
			d11.selected = i;
		}
	}
	d11.options_change_flag = true;
}

const f105_21 = new DataFormula("","","=","d_1 - 2.5 \\times m_1","mm");
const f105_1 = new DataDisplay("f105_1",f55_1);
const f105_2 = new DataDisplay("f105_2",f105_21);
const f106_11 = new DataMiddle("f106_11","d_{退}",0,"mm");
const f106 = new DataDisplay("f106",f106_11);
const f422 = document.getElementById("f422");
const f423 = document.getElementById("f423");
let high_withdrawal_flag = 0;
f55_1.add_child(f105_21);
f51.add_child(f105_21);
d11.after_update = function(){
	f104_11.value = fit_bearing2[d11.ele.options[d11.selected].value][3];
	f104_21.value = fit_bearing2[d11.ele.options[d11.selected].value][4];
	f104_31.value = fit_bearing2[d11.ele.options[d11.selected].value][5];
	f104_41.value = fit_bearing2[d11.ele.options[d11.selected].value][2];
	f104_51.value = fit_bearing2[d11.ele.options[d11.selected].value][6];
	f105_21.get_value();
	if(f105_21.value<f104_51.value){
		f106.value = Math.floor(f105.value/5)*5;
		high_withdrawal_flag = true;
		f422.textContent = `$ d_{f1} < d_a $ ，选带退刀槽结构的齿轮轴，退刀槽直径为(齿根圆直径向下圆整)`
		f423.textContent = `画出高速轴结构示意图(右边轴承挡板按5mm算，退刀槽宽度按"齿轮端面到箱内壁距离-5"算)如图：`
	}else{
		f106.value = 0;
		high_withdrawal_flag = false;
		f422.textContent = `$ d_{f1} >= d_a $ ，选不带退刀槽结构的齿轮轴`
		f423.textContent = `画出高速轴结构示意图如图：`
		f106.ele.textContent = ``;
	}
	window.MathJax.typesetPromise([f422]);
}

const d12 = new DataInput("d12","l_{3}",0,"mm");
const d13 = new DataSelect("d13","d_{2h}",0,"mm");
const d14 = new DataInput("d14","t_h",0,"mm");
const f107_11 = new DataMiddle("f107_11","k_h",0,"mm");
const f107 = new DataDisplay("f107",f107_11);

d11.add_child(d13);
d13.add_child(f107);
d13.add_child(d14);
d13.before_update = function(){
	d13.options = [];
	let temp = 0;
	for(var item of T3_19){
		if(f104_41.value-item[0]<0){
			break;
		}
		temp = item[1];
	}
	for(var i in T11_3){
		d13.options.push(T11_3[i][0]);
		if(T11_3[i][0]==temp){
			d13.selected = i;
			f107_11.value = T11_3[i][1];
		}
	}
	d13.options_change_flag = true;
}
d14.before_update = function(){
	d14.value = Math.round(1.2*d13.value);
	d14.ele.value = Math.round(1.2*d13.value);
}


const f110 = new DataFormula("f110","l_{ sh }","=","d_{带轮} + l_{3} + k_h + t_h + 1","mm");
const f111_11 = new DataMiddle("f111_11","l_{sh}",0,"mm");
const f112_11 = new DataMiddle("f112_11","l_3",0,"mm");
const f111 = new DataDisplay("f111",f111_11);
const f112 = new DataDisplay("f112",f112_11);
f110.add_child(f111_11);
f110.add_child(f112_11);
f110.after_update = function(){
	f111_11.value = Math.ceil(f110.value);
	f112_11.value = d12.value+f111_11.value-f110.value;
}

const d15 = new DataInput("d15","\\Delta_{2h}",0,"mm");
const f113 = new DataFormula("f113","l_4","=","T_h^{'} + \\Delta_{2h}", "mm");
const f114 = new DataFormula("f114","l_h","=","l_{sh} + h_1 + b_{内} + l_4", "mm");
const zhou_h = new DataIframe("zhou_h","/external/zhou.html",false);
f114.add_child(zhou_h);
zhou_h.before_update = function(){
	if(high_withdrawal_flag){
		zhou_h.send_data = [[
			{ len: getdd("l_4"), dia: getdd("d_{滚动h}") },
			{ len: getdd("\\Delta_{1m}"), dia: getdd("d_{ah}^{'}") }, 
			{ len: getdd("b_{内}-\\Delta_{1m}-B_1-\\Delta_{1m}"), dia: getdd("d_{滚动h}") },
			{ len: getdd("B_1"), dia: getdd("d_1 + 2 m_1") }, 
			{ len: getdd("\\Delta_{1m} - 5"), dia: getdd("d_{退}") }, 
			{ len: 5, dia: getdd("d_{ah}^{'}") }, 
			{ len: getdd("l_4"), dia: getdd("d_{滚动h}") }, 
			{ len: getdd("l_{sh}+h_1-d_{带轮}-l_4"), dia: getdd("d_{密h}") },
			{ len: getdd("d_{带轮}"), dia: getdd("d_{带h}") },
		],"high"];
	}else{
		zhou_h.send_data = [[
			{ len: getdd("l_4"), dia: getdd("d_{滚动h}") },
			{ len: getdd("\\Delta_{1m}"), dia: getdd("d_{ah}^{'}") }, 
			{ len: getdd("b_{内}-\\Delta_{1m}-B_1-\\Delta_{1m}"), dia: getdd("d_{滚动h}") },
			{ len: getdd("B_1"), dia: getdd("d_1 + 2 m_1") }, 
			{ len: getdd("\\Delta_{1m}"), dia: getdd("d_{ah}^{'}") }, 
			{ len: getdd("l_4"), dia: getdd("d_{滚动h}") }, 
			{ len: getdd("l_{sh}+h_1-d_{带轮}-l_4"), dia: getdd("d_{密h}") },
			{ len: getdd("d_{带轮}"), dia: getdd("d_{带h}") },
		],"high"];
	}
}


//低速轴的设计
const d16 = new DataInput("d16","A_l");
const f115 = new DataFormula("f115","d_{ lmin }","\\ge","A_l \\sqrt[3]{\\frac{P_{Ⅲ}}{n_{Ⅲ}}}", "mm");

const d17 = new DataSelect("d17","d_{联轴l}",0,"mm");
f115.add_child(d17);
d17.before_update = function(){
	var temp = Math.ceil(f115.value/5)*5;
	d17.options = [];
	d17.options.push(temp+5);
	d17.options.push(temp+10);
	d17.options.push(temp+15);
	d17.selected = 0;
	d17.options_change_flag = true;
}
const f116 = new DataFormula("f116","d_{密l}","=","d_{联轴l} + 5", "mm");
const f117 = new DataFormula("f117","d_{滚动l}","=","d_{密l} + 5", "mm");
const f118 = new DataDisplay("f118",f117);
const d18 = new DataSelect("d18","zc_{圆锥滚子l}");
const f119_11 = new DataMiddle("f119_11","T_l^{'}",0,"mm");
const f119_21 = new DataMiddle("f119_21","B_l^{'}",0,"mm");
const f119_31 = new DataMiddle("f119_31","a_l^{'}",0,"mm");
const f119_41 = new DataMiddle("f119_41","D_l^{'}",0,"mm");
const f119_51 = new DataMiddle("f119_51","d_{al}^{'}",0,"mm");
const f119_1 = new DataDisplay("f119_1",f119_11);
const f119_2 = new DataDisplay("f119_2",f119_21);
const f119_3 = new DataDisplay("f119_3",f119_31);
const f119_4 = new DataDisplay("f119_4",f119_41);
const f119_5 = new DataDisplay("f119_5",f119_51);
let fit_bearing3 = [];
const warning7 = document.getElementById("warning7");
f117.add_child(d18);
d18.children = [f119_11,f119_21,f119_31,f119_41,f119_51];
d18.before_update = function(){
	if(d18.options.length!=0 && parseFloat(d18.options[0].slice(3,5))*5==f117.value){
		return;
	}
	d18.options = [];
	warning7.innerText = "";
	fit_bearing3 = T_zc.filter((num) => {return num[1] == f117.value && num[6]<1000;});
	d18.selected = 0;
	if(fit_bearing3.length == 0){
		warning7.innerText = "警告，轴承内径不在标准范围内";
	}
	for(i in fit_bearing3){
		d18.options.push(String(fit_bearing3[i][0]));
		if("02" === String(fit_bearing3[i][0]).slice(1,3)){
			d18.selected = i;
		}
	}
	d18.options_change_flag = true;
}
d18.after_update = function(){
	f119_11.value = fit_bearing3[d18.ele.options[d18.selected].value][3];
	f119_21.value = fit_bearing3[d18.ele.options[d18.selected].value][4];
	f119_31.value = fit_bearing3[d18.ele.options[d18.selected].value][5];
	f119_41.value = fit_bearing3[d18.ele.options[d18.selected].value][2];
	f119_51.value = fit_bearing3[d18.ele.options[d18.selected].value][6];
}

const d19 = new DataInput("d19","l_{5}",0,"mm");
const d20 = new DataSelect("d20","d_{2l}",0,"mm");
const d21 = new DataInput("d21","t_l",0,"mm");
const f122_11 = new DataMiddle("f122_11","k_l",0,"mm");
const f122 = new DataDisplay("f122",f122_11);
d18.add_child(d20);
d20.add_child(f122_11);
d20.add_child(f21);
d20.before_update = function(){
	d20.options = [];
	let temp = 0;
	for(var item of T3_19){
		if(f119_41.value-item[0]<0){
			break;
		}
		temp = item[1];
	}
	for(var i in T11_3){
		d20.options.push(T11_3[i][0]);
		if(T11_3[i][0]==temp){
			d20.selected = i;
			f122_11.value = T11_3[i][1];
		}
	}
	d20.options_change_flag = true;
}
d21.before_update = function(){
	d21.value = Math.round(1.2*d20.value);
	d21.ele.value = Math.round(1.2*d20.value);
}

//联轴器的设计

const f330 = new DataDisplay("f330",K0);
const f331 = new DataFormula("f331","T_{ca}","=","K_A T_{Ⅲ}","N·m");
const f332 = new DataDisplay("f332",d17);
const f333 = document.getElementById("f333");
const f334 = new DataDisplay("f334",n4);
const g40 = new DataSelect("g40","coupling");
const t3 = new DataTable("t3","t_{联轴器}");
t3.table_head = ["联轴器型号","许用转矩","许用转速","配合轴径","配合长度"];
f331.add_child(g40);
d17.add_child(g40);
K0.add_child(g40);
n4.add_child(g40);
var fit_coupling = [];
g40.before_update = function(){
	g40.options = [];
	fit_coupling = T17_0.filter(i=>i[3]==f332.value);
	fit_coupling = fit_coupling.filter(i=>i[1]>=f331.value);
	fit_coupling = fit_coupling.filter(i=>i[2]>=f334.value);
	g40.options = fit_coupling.map(value => value[0]);
	g40.selected = 0;
	g40.options_change_flag = true;
}
g40.after_update = function(){
	if(fit_coupling[g40.ele.options[g40.selected].value][0].slice(0, 2)=="LX"){
		f333.textContent = `弹性柱销联轴器`;
	}else if(fit_coupling[g40.ele.options[g40.selected].value][0].slice(0, 2)=="SL"){
		f333.textContent = `十字滑块联轴器`;
	}else{
		f333.textContent = `联轴器`;
	}
	t3.set_rows([fit_coupling[g40.ele.options[g40.selected].value].slice(0, 5)]);
}
g40.add_child(t3);
//联轴器的设计

const d23 = new DataInput("d23","B_5",0,"mm");
t3.add_child(d23);
d23.before_update = function(){
	var temp = fit_coupling[g40.ele.options[g40.selected].value][4];
	d23.value = temp;
	d23.ele.value = temp;
}
const f125 = new DataFormula("f125","l_{ sl }","=","B_5 + l_{5} + k_l + t_l + 1", "mm");
const f126_11 = new DataMiddle("f126_11","l_{sl}",0,"mm");
const f127_11 = new DataMiddle("f127_11","l_5",0,"mm");
const f126 = new DataDisplay("f126",f126_11);
const f127 = new DataDisplay("f127",f127_11);
f125.add_child(f126_11);
f125.add_child(f127_11);
f125.after_update = function(){
	f126_11.value = Math.ceil(f125.value);
	f127_11.value = d19.value+f126_11.value-f125.value;
}

const d22 = new DataInput("d22","\\Delta_{2l}",0,"mm");
const f128 = new DataFormula("f128","l_6","=","T_l^{'} + \\Delta_{2l}", "mm");
const f129 = new DataFormula("f129","l_l","=","l_{sl} + h_1 + b_{内} + l_6", "mm");
const d_gearl = new DataMiddle("d_gearl","d_{齿轮l}",0,"mm");
f117.add_child(d_gearl);
d_gearl.before_update = function(){
	d_gearl.value = f117.value+5;
}
const l_gearl = new DataMiddle("l_gearl","l_{齿轮l}",0,"mm");
f89_11.add_child(l_gearl);
l_gearl.before_update = function(){
	l_gearl.value = f89_11.value-2;
}

const zhou_l = new DataIframe("zhou_l","/external/zhou.html",false);
f129.add_child(zhou_l);
zhou_l.before_update = function(){
	zhou_l.send_data = [[
		{ len: getdd("B_5"), dia: getdd("d_{联轴l}") },
		{ len: getdd("l_{sl} + h_1 - B_5 - l_6"), dia: getdd("d_{密l}") }, 
		{ len: getdd("\\Delta_{1m}+l_6+4.5"), dia: getdd("d_{滚动l}") },
		{ len: getdd("l_{齿轮l}"), dia: getdd("d_{齿轮l}") }, 
		{ len: getdd("\\Delta_m"), dia: getdd("d_{al}^{'}") }, 
		{ len: getdd("b_{内}-\\Delta_{1m}-2\\Delta_m-B_4-2.5"), dia: getdd("d_{滚动l}") }, 
		{ len: getdd("\\Delta_m"), dia: getdd("d_{al}^{'}") }, 
		{ len: getdd("l_6"), dia: getdd("d_{滚动l}") },
	],"low"];
}



//高速轴的强度校核
const f135_1 = new DataFormula("f135_1","l_{DAh}","=","l_{sh} + h_1 - l_4 + \\frac{T_h^{'}}{2}", "mm");
const f135_2 = new DataFormula("f135_2","l_{ACh}","=","l_4 + \\Delta_{1m} + \\frac{B_2}{2} - \\frac{T_h^{'}}{2}", "mm");
const f135_3 = new DataFormula("f135_3","l_{CBh}","=","\\Delta_{2h} + b_{内} - \\Delta_{1m} - \\frac{B_2}{2}", "mm");
const f135_4 = new DataFormula("f135_4","l_{ABh}","=","l_{ACh} + l_{CBh}", "mm");

const f130 = new DataDisplay("f130",T2);
const f131 = new DataFormula("f131","F_{t1}","=","2000\\frac{T_{Ⅰ}}{d_1}", "N");
const f132 = new DataFormula("f132","F_{r1}","=","\\frac{F_{t1} \\tan(\\alpha_{n1})}{\\cos(\\beta_{1}^{'})}", "N");
const f133 = new DataFormula("f133","F_{a1}","=","F_{t1} \\tan(\\beta_{1}^{'})", "N");
const f134 = new DataDisplay("f134", f25);
const f136_1 = new DataFormula("f136_1","R_{AHh}","=","-\\frac{F_{t1} \\times l_{CBh}}{l_{ABh}}", "N");
const f136_2 = new DataFormula("f136_2","R_{BHh}","=","-\\frac{F_{t1} \\times l_{ACh}}{l_{ABh}}", "N");
const f137 = new DataFormula("f137","R_{AVh}","=","-\\frac{F_{r1} l_{CBh} + F_{Qh} (l_{DAh}+l_{ABh}) + \\frac{F_{a1} d_1}{2}}{l_{ABh}}", "N");
const f138 = new DataFormula("f138","R_{BVh}","=","-(R_{AVh}+F_{Qh}+F_{r1})", "N");

const f139 = new DataFormula("f139","M_{CHh}","=","R_{BHh} l_{CBh}", "N·mm");
const f140 = new DataFormula("f140","M_{AVh}","=","-F_{Qh} l_{DAh}", "N·mm");
const f141 = new DataFormula("f141","M_{CV1h}","=","-(F_{Qh} (l_{DAh}+l_{ACh}) + R_{AVh} l_{ACh})", "N·mm");
const f142 = new DataFormula("f142","M_{CV2h}","=","-R_{BVh} l_{CBh}", "N·mm");
const f143 = new DataFormula("f143","M_{Ah}","=","\\sqrt{M_{AVh}^{2}}", "N·mm");
const f144 = new DataFormula("f144","M_{C1h}","=","\\sqrt{M_{CHh}^{2}+M_{CV1h}^{2}}", "N·mm");
const f145 = new DataFormula("f145","M_{C2h}","=","\\sqrt{M_{CHh}^{2}+M_{CV2h}^{2}}", "N·mm");
const f156 = new DataDisplay("f156", f25);
const d30 = new DataInput("d30","\\alpha_h");
const MDH = new DataConst("MDH","M_{Dh}",0,"N·mm");
const f146 = new DataFormula("f146","M_{CaDh}","=","\\sqrt{M_{Dh}^{2}+(1000 \\alpha_h T_{Ⅰ})^{2}}", "N·mm");
const f147 = new DataFormula("f147","M_{CaAh}","=","\\sqrt{M_{Ah}^{2}+(1000 \\alpha_h T_{Ⅰ})^{2}}", "N·mm");
const f148 = new DataFormula("f148","M_{CaC1h}","=","\\sqrt{M_{C1h}^{2}+(1000 \\alpha_h T_{Ⅰ})^{2}}", "N·mm");
const f149 = new DataFormula("f149","M_{CaC2h}","=","\\sqrt{M_{C2h}^{2}}", "N·mm");

const f151 = new DataDisplay("f151",f102);
const f152 = new DataFormula("f152","\\sigma_{caAh}","=","\\frac{M_{CaAh}}{0.1 d_{滚动h}^{3}}", "MPa", 0, ["< [σ_{-1}] = 60 MPa (安全)"]);
const f154 = new DataDisplay("f154",d10);
const f155 = new DataFormula("f155","\\sigma_{caDh}","=","\\frac{M_{CaDh}}{0.1 d_{带h}^{3}}", "MPa", 0, ["< [σ_{-1}] = 60 MPa (安全)"]);
const warning8_1 = new DataWarning("warning8_1",f152,">",60,"高速轴强度校核不合格哦");
const warning8_2 = new DataWarning("warning8_2",f155,">",60,"高速轴强度校核不合格哦");


const zhou_tu_h = new DataIframe("zhou_tu_h","/external/zhou_tu.html",false);
f131.add_child(zhou_tu_h);
f132.add_child(zhou_tu_h);
f133.add_child(zhou_tu_h);
f138.add_child(zhou_tu_h);
const points_h = [
	{ name: 'D', x_mm: 0 },
	{ name: 'A', x_mm: getdd("l_{DAh}") },
	{ name: 'C', x_mm: getdd("l_{DAh}+l_{ACh}") },
	{ name: 'B', x_mm: getdd("l_{DAh}+l_{ABh}") }
];
const forces_h = {
	'D': [
		{ value: getdd("F_{Qh}"), direction: 'down', plane: 'vertical', name: 'F_Q' }
	],
	'A': [
		{ value: getdd("R_{AHh}"), direction: 'up', plane: 'horizontal', name: 'R_AH' },
		{ value: getdd("R_{AVh}"), direction: 'down', plane: 'vertical', name: 'R_AV' } ,
		{ value: getdd("-F_{a1}"), direction: 'left', plane: 'vertical', name: 'R_AV2' } ,
	],
	'C': [
		{ value: getdd("F_{t1}"), direction: 'up', plane: 'horizontal', name: 'F_t1' },
		{ value: getdd("F_{r1}"), direction: 'down', plane: 'vertical', name: 'F_r1' } ,
		{ value: getdd("F_{a1}"), direction: 'left', plane: 'vertical', name: 'F_a1' } ,
		{ value: getdd("-\\frac{F_{a1} d_1}{2}"), direction: 'clockwise', plane: 'vertical', name: 'M_aC' } ,
	],
	'B': [
		{ value: getdd("R_{BHh}"), direction: 'up', plane: 'horizontal', name: 'R_BH' },
		{ value: getdd("R_{BVh}"), direction: 'down', plane: 'vertical', name: 'R_BV' }
	]
};
const values_h = {
	horizontalMoment: [ 
		{ x_mm: points_h[0].x_mm, value: 0 , name: "M_DH"},
		{ x_mm: points_h[1].x_mm, value: 0 , name: "M_AH"},
		{ x_mm: points_h[2].x_mm, value: getdd("M_{CHh}") , name: "M_CH"},
		{ x_mm: points_h[3].x_mm, value: 0 , name: "M_BH"}
	],
	verticalMoment: [ 
		{ x_mm: points_h[0].x_mm, value: 0 , name: "M_DV"},
		{ x_mm: points_h[1].x_mm, value: getdd("M_{AVh}") , name: "M_AV"},
		{ x_mm: points_h[2].x_mm, value: getdd("M_{CV1h}") , name: "M_CV1"},
		{ x_mm: points_h[2].x_mm, value: getdd("M_{CV2h}") , name: "M_CV2"},
		{ x_mm: points_h[3].x_mm, value: 0 , name: "M_BV"}
	],
	resultantMoment: [ 
		{ x_mm: points_h[0].x_mm, value: 0 , name: "M_D"},
		{ x_mm: points_h[1].x_mm, value: getdd("M_{Ah}") , name: "M_A"},
		{ x_mm: points_h[2].x_mm, value: getdd("M_{C1h}") , name: "M_C1"},
		{ x_mm: points_h[2].x_mm, value: getdd("M_{C2h}") , name: "M_C2"}, 
		{ x_mm: points_h[3].x_mm, value: 0 , name: "M_B"}
	],
	torque: [ 
		{ x_mm: points_h[0].x_mm, value: getdd("1000 T_{Ⅰ}") , name: "T_D"}, 
		{ x_mm: points_h[2].x_mm, value: getdd("1000 T_{Ⅰ}") , name: "T_C1"},
		{ x_mm: points_h[2].x_mm, value: 0 , name: "T_C2"},
		{ x_mm: points_h[3].x_mm, value: 0 , name: "T_B"}
	],
	equivalentMoment: [ 
		{ x_mm: points_h[0].x_mm, value: getdd("M_{CaDh}") , name: "M_CaD"},
		{ x_mm: points_h[1].x_mm, value: getdd("M_{CaAh}") , name: "M_CaA"},
		{ x_mm: points_h[2].x_mm, value: getdd("M_{CaC1h}") , name: "M_CaC1"},
		{ x_mm: points_h[2].x_mm, value: getdd("M_{CaC2h}") , name: "M_CaC2"},
		{ x_mm: points_h[3].x_mm, value: 0 , name: "M_CaB"} 
	]
};
zhou_tu_h.send_data = [points_h,forces_h,values_h,"high"];


//中间轴强度校核
const f160_1 = new DataFormula("f160_1","l_{ABm}","=","\\frac{T_m^{'}}{2} + \\Delta_{1m} + \\frac{B_3}{2}", "mm");
const f160_2 = new DataFormula("f160_2","l_{BCm}","=","\\frac{B_3}{2} + \\Delta_m + \\frac{B_1}{2}", "mm");
const f160_3 = new DataFormula("f160_3","l_{CDm}","=","\\frac{B_1}{2} + \\Delta_{1m} + \\Delta_{2m} + \\frac{T_m^{'}}{2}", "mm");
const f160_4 = new DataFormula("f160_4","l_{ADm}","=","l_{ABm} + l_{BCm} + l_{CDm}", "mm");
const f161 = new DataFormula("f161","F_{t2}","=","F_{t1}", "N");
const f162 = new DataFormula("f162","F_{r2}","=","F_{r1}", "N");
const f163 = new DataFormula("f163","F_{a2}","=","F_{a1}", "N");
const f164 = new DataFormula("f164","F_{t3}","=","2000\\frac{T_{Ⅱ}}{d_3}", "N");
const f165 = new DataFormula("f165","F_{r3}","=","-\\frac{F_{t3} \\tan(\\alpha_{n2})}{\\cos(\\beta_{2}^{'})}", "N");
const f166 = new DataFormula("f166","F_{a3}","=","-F_{t3} \\tan(\\beta_{2}^{'})", "N");

const f167_1 = new DataFormula("f167_1","R_{AHm}","=","-\\frac{F_{t2} \\times l_{CDm} + F_{t3} \\times (l_{BCm}+l_{CDm})}{l_{ADm}}", "N");
const f167_2 = new DataFormula("f167_2","R_{DHm}","=","-(R_{AHm} + F_{t2} + F_{t3})", "N");
const f168 = new DataFormula("f168","R_{AVm}","=","-\\frac{F_{r2} l_{CDm} + F_{a2} \\frac{d_2}{2} - F_{a3} \\frac{d_3}{2} + F_{r3} (l_{BCm}+l_{CDm}) }{l_{ADm}}", "N");
const f169 = new DataFormula("f169","R_{DVm}","=","-(R_{AVm}+F_{r3}+F_{r2})", "N");

const f170 = new DataFormula("f170","M_{BHm}","=","R_{AHm} l_{ABm}", "N·mm");
const f171 = new DataFormula("f171","M_{CHm}","=","R_{DHm} l_{CDm}", "N·mm");
const f172 = new DataFormula("f172","M_{BV1m}","=","- R_{AVm} l_{ABm}", "N·mm");
const f173 = new DataFormula("f173","M_{BV2m}","=","- R_{AVm} l_{ABm} + F_{a3} \\frac{d_3}{2}", "N·mm");
const f174 = new DataFormula("f174","M_{CV2m}","=","- R_{DVm} l_{CDm}", "N·mm");
const f175 = new DataFormula("f175","M_{CV1m}","=","- R_{DVm} l_{CDm} + F_{a2} \\frac{d_2}{2}", "N·mm");
const f176 = new DataFormula("f176","M_{B1m}","=","\\sqrt{M_{BHm}^{2}+M_{BV1m}^{2}}", "N·mm");
const f177 = new DataFormula("f177","M_{B2m}","=","\\sqrt{M_{BHm}^{2}+M_{BV2m}^{2}}", "N·mm");
const f178 = new DataFormula("f178","M_{C1m}","=","\\sqrt{M_{CHm}^{2}+M_{CV1m}^{2}}", "N·mm");
const f179 = new DataFormula("f179","M_{C2m}","=","\\sqrt{M_{CHm}^{2}+M_{CV2m}^{2}}", "N·mm");

const f180 = new DataDisplay("f180", T3);
const d40 = new DataInput("d40","\\alpha_m");
const MDM = new DataConst("MDM","M_{Dm}",0,"N·mm");
const f181 = new DataFormula("f181","M_{CaB1m}","=","\\sqrt{M_{B1m}^{2}+(1000 \\alpha_m T_{Ⅱ})^{2}}", "N·mm");
const f182 = new DataFormula("f182","M_{CaB2m}","=","\\sqrt{M_{B2m}^{2}+(1000 \\alpha_m T_{Ⅱ})^{2}}", "N·mm");
const f183 = new DataFormula("f183","M_{CaC1m}","=","\\sqrt{M_{C1m}^{2}+(1000 \\alpha_m T_{Ⅱ})^{2}}", "N·mm");
const f184 = new DataFormula("f184","M_{CaC2m}","=","\\sqrt{M_{C2m}^{2}+(1000 \\alpha_m T_{Ⅱ})^{2}}", "N·mm");

const f186 = new DataDisplay("f186",f87_1);
const f187 = new DataFormula("f187","\\sigma_{caBm}","=","\\frac{M_{CaB2m}}{0.1 d_3^{3}}", "MPa", 0, ["< [σ_{-1}] = 60 MPa (安全)"]);

const f189 = new DataDisplay("f189",d_gearm);
const f190 = new DataFormula("f190","\\sigma_{caCm}","=","\\frac{M_{CaC1m}}{0.1 d_{齿轮m}^{3}}", "MPa", 0, ["< [σ_{-1}] = 60 MPa (安全)"]);
const warning9_1 = new DataWarning("warning9_1",f187,">",60,"中间轴强度校核不合格哦");
const warning9_2 = new DataWarning("warning9_2",f190,">",60,"中间轴强度校核不合格哦");

const zhou_tu_m = new DataIframe("zhou_tu_m","/external/zhou_tu.html",false);
f181.add_child(zhou_tu_m);
f182.add_child(zhou_tu_m);
f183.add_child(zhou_tu_m);
f184.add_child(zhou_tu_m);
const points_m = [
	{ name: 'A', x_mm: 0 },
	{ name: 'B', x_mm: getdd("l_{ABm}") },
	{ name: 'C', x_mm: getdd("l_{ABm}+l_{BCm}") },
	{ name: 'D', x_mm: getdd("l_{ADm}") }
];
const forces_m = {
	'A': [
		{ value: getdd("R_{AHm}"), direction: 'up', plane: 'horizontal', name: 'R_AH' },
		{ value: getdd("R_{AVm}"), direction: 'down', plane: 'vertical', name: 'R_AV' } ,
		{ value: getdd("-F_{a3}"), direction: 'left', plane: 'vertical', name: 'F_a3A' } ,
	],
	'B': [
		{ value: getdd("F_{t3}"), direction: 'up', plane: 'horizontal', name: 'F_t3' },
		{ value: getdd("F_{r3}"), direction: 'down', plane: 'vertical', name: 'F_r3' } ,
		{ value: getdd("F_{a3}"), direction: 'left', plane: 'vertical', name: 'F_a3' } ,
		{ value: getdd("-F_{a3} \\frac{d_3}{2}"), direction: 'counterclockwise', plane: 'vertical', name: 'M_a3C' } ,
	],
	'C': [
		{ value: getdd("F_{t2}"), direction: 'up', plane: 'horizontal', name: 'F_t2' },
		{ value: getdd("F_{r2}"), direction: 'down', plane: 'vertical', name: 'F_r2' } ,
		{ value: getdd("F_{a2}"), direction: 'left', plane: 'vertical', name: 'F_a2' } ,
		{ value: getdd(" F_{a2} \\frac{d_2}{2}"), direction: 'counterclockwise', plane: 'vertical', name: 'M_a2C' } ,
	],
	'D': [
		{ value: getdd("R_{DHm}"), direction: 'up', plane: 'horizontal', name: 'R_DH' },
		{ value: getdd("R_{DVm}"), direction: 'down', plane: 'vertical', name: 'R_DV' },
		{ value: getdd("-F_{a2}"), direction: 'left', plane: 'vertical', name: 'F_a2D' } ,
	]
};
const values_m = {
	horizontalMoment: [ 
		{ x_mm: points_m[0].x_mm, value: 0 , name: "M_AH"},
		{ x_mm: points_m[1].x_mm, value: getdd("M_{BHm}") , name: "M_BH"}, 
		{ x_mm: points_m[2].x_mm, value: getdd("M_{CHm}") , name: "M_CH"},
		{ x_mm: points_m[3].x_mm, value: 0 , name: "M_DH"}
	],
	verticalMoment: [ 
		{ x_mm: points_m[0].x_mm, value: 0 , name: "M_AV"}, 
		{ x_mm: points_m[1].x_mm, value: getdd("M_{BV1m}") , name: "M_BV1"}, 
		{ x_mm: points_m[1].x_mm, value: getdd("M_{BV2m}") , name: "M_BV2"}, 
		{ x_mm: points_m[2].x_mm, value: getdd("M_{CV1m}") , name: "M_CV1"}, 
		{ x_mm: points_m[2].x_mm, value: getdd("M_{CV2m}"), name: "M_CV2"}, 
		{ x_mm: points_m[3].x_mm, value: 0 , name: "M_DV"}  
	],
	resultantMoment: [ 
		{ x_mm: points_m[0].x_mm, value: 0 , name: "M_A"}, 
		{ x_mm: points_m[1].x_mm, value: getdd("M_{B1m}") , name: "M_B1"}, 
		{ x_mm: points_m[1].x_mm, value: getdd("M_{B2m}") , name: "M_B2"}, 
		{ x_mm: points_m[2].x_mm, value: getdd("M_{C1m}") , name: "M_C1"}, 
		{ x_mm: points_m[2].x_mm, value: getdd("M_{C2m}") , name: "M_C2"}, 
		{ x_mm: points_m[3].x_mm, value: 0 , name: "M_D"} 
	],
	torque: [ 
		{ x_mm: points_m[1].x_mm, value: 0 , name: "T_B1"}, 
		{ x_mm: points_m[1].x_mm, value: getdd("1000 T_{Ⅱ}") , name: "T_B2"}, 
		{ x_mm: points_m[2].x_mm, value: getdd("1000 T_{Ⅱ}") , name: "T_C1"}, 
		{ x_mm: points_m[2].x_mm, value: 0 , name: "T_C2"},
	],
	equivalentMoment: [ 
		{ x_mm: points_m[0].x_mm, value: 0 , name: "M_A"}, 
		{ x_mm: points_m[1].x_mm, value: getdd("M_{CaB1m}") , name: "M_B1"}, 
		{ x_mm: points_m[1].x_mm, value: getdd("M_{CaB2m}") , name: "M_B2"}, 
		{ x_mm: points_m[2].x_mm, value: getdd("M_{CaC1m}") , name: "M_C1"}, 
		{ x_mm: points_m[2].x_mm, value: getdd("M_{CaC2m}") , name: "M_C2"}, 
		{ x_mm: points_m[3].x_mm, value: 0 , name: "M_D"} 
	]
};
zhou_tu_m.send_data = [points_m,forces_m,values_m,"middle"];


//低速轴的校核
const f199_1 = new DataFormula("f199_1","l_{DAl}","=","l_{sl} + h_1 - l_6 - \\Delta_{1m} + \\frac{T_l^{'}}{2}", "mm");
const f199_2 = new DataFormula("f199_2","l_{ACl}","=","l_6 + \\Delta_{1m} + \\frac{B_4}{2} - \\frac{T_l^{'}}{2}", "mm");
const f199_3 = new DataFormula("f199_3","l_{CBl}","=","\\Delta_{2l} + b_{内} + \\frac{T_l^{'}}{2} - \\Delta_{1m} - \\frac{B_4}{2}", "mm");
const f199_4 = new DataFormula("f199_4","l_{ABl}","=","l_{ACl} + l_{CBl}", "mm");
const f200 = new DataDisplay("f200", T4);
const f201 = new DataFormula("f201","F_{t4}","=","2000\\frac{T_{Ⅲ}}{d_4}", "N");
const f202 = new DataFormula("f202","F_{r4}","=","\\frac{F_{t4} \\tan(\\alpha_{n2})}{\\cos(\\beta_2)}", "N");
const f203 = new DataFormula("f203","F_{a4}","=","F_{t4}\\tan(\\beta_2)", "N");

const f206_1 = new DataFormula("f206_1","R_{AHl}","=","-\\frac{F_{t4} \\times l_{CBl}}{l_{ABl}}", "N");
const f206_2 = new DataFormula("f206_2","R_{BHl}","=","-\\frac{F_{t4} \\times l_{ACl}}{l_{ABl}}", "N");
const f207 = new DataFormula("f207","R_{AVl}","=","-\\frac{F_{r4} l_{CBl}+ \\frac{F_{a4} d_4}{2} }{l_{ABl}}", "N");
const f208 = new DataFormula("f208","R_{BVl}","=","-(R_{AVl}+F_{r4})", "N");

const f209 = new DataFormula("f209","M_{CHl}","=","R_{BHl} l_{CBl}", "N·mm");
const f210 = new DataFormula("f210","M_{AVl}","=","0", "N·mm");
f209.add_child(f210);
const f211 = new DataFormula("f211","M_{CV1l}","=","-R_{AVl} l_{ACl}", "N·mm");
const f212 = new DataFormula("f212","M_{CV2l}","=","-R_{BVl} l_{CBl}", "N·mm");
const f213 = new DataFormula("f213","M_{Al}","=","\\sqrt{M_{AVl}^{2}}", "N·mm");
const f214 = new DataFormula("f214","M_{C1l}","=","\\sqrt{M_{CHl}^{2}+M_{CV1l}^{2}}", "N·mm");
const f215 = new DataFormula("f215","M_{C2l}","=","\\sqrt{M_{CHl}^{2}+M_{CV2l}^{2}}", "N·mm");

const f226 = new DataDisplay("f226", T4);
const d50 = new DataInput("d50","\\alpha_l");
const MDL = new DataConst("MDL","M_{Dl}",0,"N·mm");
const f216 = new DataFormula("f216","M_{CaDl}","=","\\sqrt{M_{Dl}^{2}+(1000 \\alpha_l T_{Ⅲ})^{2}}", "N·mm");
const f217 = new DataFormula("f217","M_{CaAl}","=","\\sqrt{M_{Al}^{2}+(1000 \\alpha_l T_{Ⅲ})^{2}}", "N·mm");
const f218 = new DataFormula("f218","M_{CaC1l}","=","\\sqrt{M_{C1l}^{2}+(1000 \\alpha_l T_{Ⅲ})^{2}}", "N·mm");
const f219 = new DataFormula("f219","M_{CaC2l}","=","\\sqrt{M_{C2l}^{2}+(1000 \\alpha_l T_{Ⅲ})^{2}}", "N·mm");

const f221 = new DataDisplay("f221",d_gearl);
const f222 = new DataFormula("f222","\\sigma_{caCl}","=","\\frac{M_{CaC1l}}{0.1 d_{齿轮l}^{3}}", "MPa", 0, ["< [σ_{-1}] = 60 MPa (安全)"]);

const f224 = new DataDisplay("f224",d17);
const f225 = new DataFormula("f225","\\sigma_{caDl}","=","\\frac{M_{CaDl}}{0.1 d_{联轴l}^{3}}", "MPa", 0, ["< [σ_{-1}] = 60 MPa (安全)"]);
const warning10_1 = new DataWarning("warning10_1",f222,">",60,"低速轴强度校核不合格哦");
const warning10_2 = new DataWarning("warning10_2",f225,">",60,"低速轴强度校核不合格哦");

const zhou_tu_l = new DataIframe("zhou_tu_l","/external/zhou_tu.html",false);
f131.add_child(zhou_tu_l);
f132.add_child(zhou_tu_l);
f133.add_child(zhou_tu_l);
f138.add_child(zhou_tu_l);
const points_l = [
	{ name: 'D', x_mm: 0 },
	{ name: 'A', x_mm: getdd("l_{DAl}") },
	{ name: 'C', x_mm: getdd("l_{DAl}+l_{ACl}") },
	{ name: 'B', x_mm: getdd("l_{DAl}+l_{ABl}") }
];
const forces_l = {
	'D': [
	],
	'A': [
		{ value: getdd("R_{AHl}"), direction: 'up', plane: 'horizontal', name: 'R_AH' },
		{ value: getdd("R_{AVl}"), direction: 'down', plane: 'vertical', name: 'R_AV' } ,
		{ value: getdd("- F_{a4}"), direction: 'left', plane: 'vertical', name: 'R_AV2' } ,
	],
	'C': [
		{ value: getdd("F_{t4}"), direction: 'up', plane: 'horizontal', name: 'F_t4' },
		{ value: getdd("F_{r4}"), direction: 'down', plane: 'vertical', name: 'F_r4' } ,
		{ value: getdd("F_{a4}"), direction: 'left', plane: 'vertical', name: 'F_a4' } ,
		{ value: getdd("- \\frac{F_{a4} d_4}{2}"), direction: 'clockwise', plane: 'vertical', name: 'M_aC' } ,
	],
	'B': [
		{ value: getdd("R_{BHl}"), direction: 'up', plane: 'horizontal', name: 'R_BH' },
		{ value: getdd("R_{BVl}"), direction: 'down', plane: 'vertical', name: 'R_BV' }
	]
};
const values_l = {
	horizontalMoment: [ 
		{ x_mm: points_l[0].x_mm, value: 0 , name: "M_DH"},
		{ x_mm: points_l[1].x_mm, value: 0 , name: "M_AH"},
		{ x_mm: points_l[2].x_mm, value: getdd("M_{CHl}") , name: "M_CH"},
		{ x_mm: points_l[3].x_mm, value: 0 , name: "M_BH"}
	],
	verticalMoment: [ 
		{ x_mm: points_l[0].x_mm, value: 0 , name: "M_DV"},
		{ x_mm: points_l[1].x_mm, value: getdd("M_{AVl}") , name: "M_AV"},
		{ x_mm: points_l[2].x_mm, value: getdd("M_{CV1l}") , name: "M_CV1"},
		{ x_mm: points_l[2].x_mm, value: getdd("M_{CV2l}") , name: "M_CV2"},
		{ x_mm: points_l[3].x_mm, value: 0 , name: "M_BV"}
	],
	resultantMoment: [ 
		{ x_mm: points_l[0].x_mm, value: 0 , name: "M_D"},
		{ x_mm: points_l[1].x_mm, value: getdd("M_{Al}") , name: "M_A"},
		{ x_mm: points_l[2].x_mm, value: getdd("M_{C1l}") , name: "M_C1"},
		{ x_mm: points_l[2].x_mm, value: getdd("M_{C2l}") , name: "M_C2"}, 
		{ x_mm: points_l[3].x_mm, value: 0 , name: "M_B"}
	],
	torque: [ 
		{ x_mm: points_l[0].x_mm, value: getdd("1000 T_{Ⅲ}") , name: "T_D"}, 
		{ x_mm: points_l[2].x_mm, value: getdd("1000 T_{Ⅲ}") , name: "T_C1"},
		{ x_mm: points_l[2].x_mm, value: 0 , name: "T_C2"},
		{ x_mm: points_l[3].x_mm, value: 0 , name: "T_B"}
	],
	equivalentMoment: [ 
		{ x_mm: points_l[0].x_mm, value: getdd("M_{CaDl}") , name: "M_CaD"},
		{ x_mm: points_l[1].x_mm, value: getdd("M_{CaAl}") , name: "M_CaA"},
		{ x_mm: points_l[2].x_mm, value: getdd("M_{CaC1l}") , name: "M_CaC1"},
		{ x_mm: points_l[2].x_mm, value: getdd("M_{CaC2l}") , name: "M_CaC2"},
		{ x_mm: points_l[3].x_mm, value: 0 , name: "M_CaB"} 
	]
};
zhou_tu_l.send_data = [points_l,forces_l,values_l,"low"];


//高速轴滚动轴承设计
const f230 = new DataDisplay("f230",f133);
const f231_1 = new DataDisplay("f231_1",f136_1);
const f231_2 = new DataDisplay("f231_2",f137);
const f232 = new DataFormula("f232","R_{Ah}","=","\\sqrt{R_{AHh}^{2} + R_{AVh}^{2}}", "N");
const f233_1 = new DataDisplay("f233_1",f136_2);
const f233_2 = new DataDisplay("f233_2",f138);
const f234 = new DataFormula("f234","R_{Bh}","=","\\sqrt{R_{BHh}^{2} + R_{BVh}^{2}}", "N");
const f235 = new DataDisplay("f235",d11);
const f236_11 = new DataMiddle("f236_11","e_h");
const f236_21 = new DataMiddle("f236_21","Y_h");
const f236_31 = new DataMiddle("f236_31","C_{rh}",0,"kN");
const f236_1 = new DataDisplay("f236_1",f236_11);
const f236_2 = new DataDisplay("f236_2",f236_21);
const f236_3 = new DataDisplay("f236_3",f236_31);
d11.add_child(f236_11);
d11.add_child(f236_21);
d11.add_child(f236_31);
f236_11.before_update = function(){
	f236_11.value = fit_bearing2[d11.ele.options[d11.selected].value][7];
}
f236_21.before_update = function(){
	f236_21.value = fit_bearing2[d11.ele.options[d11.selected].value][8];
}
f236_31.before_update = function(){
	f236_31.value = fit_bearing2[d11.ele.options[d11.selected].value][10];
}
const f237 = new DataFormula("f237","S_{Ah}","=","\\frac{R_{Ah}}{2Y_h}", "N");
const f238 = new DataFormula("f238","S_{Bh}","=","\\frac{R_{Bh}}{2Y_h}", "N");


const f239 = new DataCompare("f239","axial_force_compare1","S_{Bh} + F_{a1}",">",f237);
const f240 = new DataFormulaSwitch("f240","A_{Ah}","N",f239,"S_{Bh} + F_{a1}","S_{Ah}");
const f241 = new DataFormulaSwitch("f241","A_{Bh}","N",f239,"S_{Bh}","S_{Ah} - F_{a1}");
const f241_1 = new DataDisplay("f241_1",f236_11);
const f242 = new DataFormula("f242","(A/R)_h","=","\\frac{A_{Ah}}{R_{Ah}}");
const f243 = new DataFormula("f243","(B/R)_h","=","\\frac{A_{Bh}}{R_{Bh}}");
const f244_11 = new DataMiddle("f244_11","X_{Ah}");
const f244_21 = new DataMiddle("f244_21","Y_{Ah}");
const f244_31 = new DataMiddle("f244_31","X_{Bh}");
const f244_41 = new DataMiddle("f244_41","Y_{Bh}");
const f244_1 = new DataDisplay("f244_1",f244_11);
const f244_2 = new DataDisplay("f244_2",f244_21);
const f244_3 = new DataDisplay("f244_3",f244_31);
const f244_4 = new DataDisplay("f244_4",f244_41);
f242.add_child(f244_11);
f242.add_child(f244_21);
f242.after_update = function(){
	if(f242.value>f236_11.value){
		f244_11.value = 0.40;
		f244_21.value = Math.round(0.40*1.5/f236_11.value*100)/100;
	}else{
		f244_11.value = 1;
		f244_21.value = 0;
	}
}
f243.add_child(f244_31);
f243.add_child(f244_41);
f243.after_update = function(){
	if(f243.value>f236_11.value){
		f244_31.value = 0.40;
		f244_41.value = Math.round(0.40*1.5/f236_11.value*100)/100;
	}else{
		f244_31.value = 1;
		f244_41.value = 0;
	}
}
const f245 = new DataFormula("f245","P_{Ah}","=","X_{Ah} R_{Ah} + Y_{Ah} A_{Ah}","N");
const f246 = new DataFormula("f246","P_{Bh}","=","X_{Bh} R_{Bh} + Y_{Bh} A_{Bh}","N");
const f247 = new DataCompare("f247","Ph_compare","P_{Ah}",">",f246);
const f248 = document.getElementById("f248");
const f248_1 = new DataMiddle("f248_1","Ph_result");
const f248_2 = new DataMiddle("f248_2","P_{h}");
f247.add_child(f248_1);
f248_1.before_update = function(){
	if(f247.value){
		f248_2.value = f245.value;
		f248.innerText = "A";
	}else{
		f248_2.value = f246.value;
		f248.innerText = "B";
	}
}
const TENDIVTHREE = new DataConst("TENDIVTHREE","\\varepsilon",10/3);
const f249 = new DataFormula("f249","L_{nh}","=","\\frac{1000000}{60 n_{Ⅰ}} (\\frac{1000C_{rh}}{P_{h}})^{\\varepsilon}","h",0,[" > 15000 h"]);
const warning12 = new DataWarning("warning12", f249, "<", 15000, "高速轴承寿命不合格");
const f250 = new DataDisplay("f250",d11);


//中间轴滚动轴承设计
const f260 = new DataDisplay("f260",f166);
const f261_1 = new DataDisplay("f261_1",f167_1);
const f261_2 = new DataDisplay("f261_2",f168);
const f262 = new DataFormula("f262","R_{Am}","=","\\sqrt{R_{AHm}^{2} + R_{AVm}^{2}}", "N");
const f263_1 = new DataDisplay("f263_1",f167_2);
const f263_2 = new DataDisplay("f263_2",f169);
const f264 = new DataFormula("f264","R_{Dm}","=","\\sqrt{R_{DHm}^{2} + R_{DVm}^{2}}", "N");
const f265 = new DataDisplay("f265",d2);
const f266_11 = new DataMiddle("f266_11","e_m");
const f266_21 = new DataMiddle("f266_21","Y_m");
const f266_31 = new DataMiddle("f266_31","C_{rm}",0,"kN");
const f266_1 = new DataDisplay("f266_1",f266_11);
const f266_2 = new DataDisplay("f266_2",f266_21);
const f266_3 = new DataDisplay("f266_3",f266_31);
d2.add_child(f266_11);
d2.add_child(f266_21);
d2.add_child(f266_31);
f266_11.before_update = function(){
	f266_11.value = fit_bearing[d2.ele.options[d2.selected].value][7];
}
f266_21.before_update = function(){
	f266_21.value = fit_bearing[d2.ele.options[d2.selected].value][8];
}
f266_31.before_update = function(){
	f266_31.value = fit_bearing[d2.ele.options[d2.selected].value][10];
}
const f267 = new DataFormula("f267","S_{Am}","=","\\frac{R_{Am}}{2Y_m}", "N");
const f268 = new DataFormula("f268","S_{Dm}","=","\\frac{R_{Dm}}{2Y_m}", "N");

const F_am = new DataMiddle("F_am","F_{am}",0,"N");
f163.add_child(F_am);
f166.add_child(F_am);
F_am.before_update = function(){
	F_am.value = -f166.value-f163.value;
}
const f269 = new DataCompare("f269","axial_force_compare2","S_{Am} + F_{am}",">",f268);
const f270 = new DataFormulaSwitch("f270","A_{Am}","N",f269,"S_{Am}","S_{Dm}-F_{am}");
const f271 = new DataFormulaSwitch("f271","A_{Dm}","N",f269,"S_{Am} + F_{am}","S_{Dm}");
const f271_1 = new DataDisplay("f271_1",f266_11);
const f272 = new DataFormula("f272","(A/R)_m","=","\\frac{A_{Am}}{R_{Am}}");
const f273 = new DataFormula("f273","(D/R)_m","=","\\frac{A_{Dm}}{R_{Dm}}");
const f274_11 = new DataMiddle("f274_11","X_{Am}");
const f274_21 = new DataMiddle("f274_21","Y_{Am}");
const f274_31 = new DataMiddle("f274_31","X_{Dm}");
const f274_41 = new DataMiddle("f274_41","Y_{Dm}");
const f274_1 = new DataDisplay("f274_1",f274_11);
const f274_2 = new DataDisplay("f274_2",f274_21);
const f274_3 = new DataDisplay("f274_3",f274_31);
const f274_4 = new DataDisplay("f274_4",f274_41);
f272.add_child(f274_11);
f272.add_child(f274_21);
f272.after_update = function(){
	if(f272.value>f266_11.value){
		f274_11.value = 0.40;
		f274_21.value = Math.round(0.40*1.5/f266_11.value*100)/100;
	}else{
		f274_11.value = 1;
		f274_21.value = 0;
	}
}
f273.add_child(f274_31);
f273.add_child(f274_41);
f273.after_update = function(){
	if(f273.value>f266_11.value){
		f274_31.value = 0.40;
		f274_41.value = Math.round(0.40*1.5/f266_11.value*100)/100;
	}else{
		f274_31.value = 1;
		f274_41.value = 0;
	}
}
const f275 = new DataFormula("f275","P_{Am}","=","X_{Am} R_{Am} + Y_{Am} A_{Am}","N");
const f276 = new DataFormula("f276","P_{Dm}","=","X_{Dm} R_{Dm} + Y_{Dm} A_{Dm}","N");
const f277 = new DataCompare("f277","Pm_compare","P_{Am}",">",f276);
const f278 = document.getElementById("f278");
const f278_1 = new DataMiddle("f278_1","Pm_result");
const f278_2 = new DataMiddle("f278_2","P_{m}");
f277.add_child(f278_1);
f278_1.before_update = function(){
	if(f277.value){
		f278_2.value = f275.value;
		f278.innerText = "A";
	}else{
		f278_2.value = f276.value;
		f278.innerText = "D";
	}
}
const f279 = new DataFormula("f279","L_{nm}","=","\\frac{1000000}{60 n_{Ⅱ}} (\\frac{1000 C_{rm}}{P_{m}})^{\\varepsilon}","h",0,[" > 15000 h"]);
const warning14 = new DataWarning("warning14", f279, "<", 15000, "中间轴轴承寿命不合格");
const f280 = new DataDisplay("f280",d2);

//低速轴滚动轴承设计
const f290 = new DataDisplay("f290",f203);
const f291_1 = new DataDisplay("f291_1",f206_1);
const f291_2 = new DataDisplay("f291_2",f207);
const f292 = new DataFormula("f292","R_{Al}","=","\\sqrt{R_{AHl}^{2} + R_{AVl}^{2}}", "N");
const f293_1 = new DataDisplay("f293_1",f206_2);
const f293_2 = new DataDisplay("f293_2",f208);
const f294 = new DataFormula("f294","R_{Bl}","=","\\sqrt{R_{BHl}^{2} + R_{BVl}^{2}}", "N");
const f295 = new DataDisplay("f295",d18);
const f296_11 = new DataMiddle("f296_11","e_l");
const f296_21 = new DataMiddle("f296_21","Y_l");
const f296_31 = new DataMiddle("f296_31","C_{rl}",0,"kN");
const f296_1 = new DataDisplay("f296_1",f296_11);
const f296_2 = new DataDisplay("f296_2",f296_21);
const f296_3 = new DataDisplay("f296_3",f296_31);
d18.add_child(f296_11);
d18.add_child(f296_21);
d18.add_child(f296_31);
f296_11.before_update = function(){
	f296_11.value = fit_bearing2[d18.ele.options[d18.selected].value][7];
}
f296_21.before_update = function(){
	f296_21.value = fit_bearing2[d18.ele.options[d18.selected].value][8];
}
f296_31.before_update = function(){
	f296_31.value = fit_bearing2[d18.ele.options[d18.selected].value][10];
}
const f297 = new DataFormula("f297","S_{Al}","=","\\frac{R_{Al}}{2Y_l}", "N");
const f298 = new DataFormula("f298","S_{Bl}","=","\\frac{R_{Bl}}{2Y_l}", "N");


const f299 = new DataCompare("f299","axial_force_compare3","S_{Bl} + F_{a4}",">",f297);
const f300 = new DataFormulaSwitch("f300","A_{Al}","N",f299,"S_{Bl} + F_{a4}","S_{Al}");
const f301 = new DataFormulaSwitch("f301","A_{Bl}","N",f299,"S_{Bl}","S_{Al} - F_{a4}");
const f301_1 = new DataDisplay("f301_1",f296_11);
const f302 = new DataFormula("f302","(A/R)_l","=","\\frac{A_{Al}}{R_{Al}}");
const f303 = new DataFormula("f303","(B/R)_l","=","\\frac{A_{Bl}}{R_{Bl}}");
const f304_11 = new DataMiddle("f304_11","X_{Al}");
const f304_21 = new DataMiddle("f304_21","Y_{Al}");
const f304_31 = new DataMiddle("f304_31","X_{Bl}");
const f304_41 = new DataMiddle("f304_41","Y_{Bl}");
const f304_1 = new DataDisplay("f304_1",f304_11);
const f304_2 = new DataDisplay("f304_2",f304_21);
const f304_3 = new DataDisplay("f304_3",f304_31);
const f304_4 = new DataDisplay("f304_4",f304_41);
f302.add_child(f304_11);
f302.add_child(f304_21);
f302.after_update = function(){
	if(f302.value>f296_11.value){
		f304_11.value = 0.40;
		f304_21.value = Math.round(0.40*1.5/f296_11.value*100)/100;
	}else{
		f304_11.value = 1;
		f304_21.value = 0;
	}
}
f303.add_child(f304_31);
f303.add_child(f304_41);
f303.after_update = function(){
	if(f303.value>f296_11.value){
		f304_31.value = 0.40;
		f304_41.value = Math.round(0.40*1.5/f296_11.value*100)/100;
	}else{
		f304_31.value = 1;
		f304_41.value = 0;
	}
}
const f305 = new DataFormula("f305","P_{Al}","=","X_{Al} R_{Al} + Y_{Al} A_{Al}","N");
const f306 = new DataFormula("f306","P_{Bl}","=","X_{Bl} R_{Bl} + Y_{Bl} A_{Bl}","N");
const f307 = new DataCompare("f307","Pl_compare","P_{Al}",">",f306);
const f308 = document.getElementById("f308");
const f308_1 = new DataMiddle("f308_1","Pl_result");
const f308_2 = new DataMiddle("f308_2","P_{l}");
f307.add_child(f308_1);
f308_1.before_update = function(){
	if(f307.value){
		f308_2.value = f305.value;
		f308.innerText = "A";
	}else{
		f308_2.value = f306.value;
		f308.innerText = "B";
	}
}
const f309 = new DataFormula("f309","L_{nl}","=","\\frac{1000000}{60 n_{Ⅲ}} (\\frac{1000 C_{rl}}{P_{l}})^{\\varepsilon}","h",0,[" > 15000 h"]);
const warning16 = new DataWarning("warning16", f309, "<", 15000, "低速轴承寿命不合格");
const f310 = new DataDisplay("f310",d18);

const bearing_config = [
	["高速轴轴承",d11,f236_31],
	["中间轴轴承",d2,f266_31],
	["低速轴轴承",d18,f296_31],
];
const t18 = new DataTable("t18","t_{滚动轴承参数}");
t18.table_head = ["参数","轴承型号","基本额定动载荷"];
t18.set_rows(bearing_config);
t18.pre_update_flag = true;


//铸造减速器箱体的主要结构尺寸
const f320 = new DataDisplay("f320",f85);
const f321_1 = new DataDisplay("f321_1",f104_41);
const f321_2 = new DataDisplay("f321_2",f99_41);
const f321_3 = new DataDisplay("f321_3",f119_41);
const f322_11 = new DataMiddle("f322_11","d_{a4}",0,"mm");
const f322 = new DataDisplay("f322",f322_11);
f83.add_child(f322_11);
f87_2.add_child(f322_11);
f322_11.before_update = function(){
	f322_11.value = f87_2.value+2*f83.value;
}
const base_thick = new DataMiddle("base_thick","\\delta_0",8,"mm");
// const top_thick = new DataMiddle("top_thick","\\delta_1",8,"mm");
f85.add_child(base_thick);
// f85.add_child(top_thick);
base_thick.before_update = function(){
	if((f85.value*0.025+3) > 10){
		base_thick.value = Math.round(f85.value*0.025+3);
	}else{
		base_thick.value = 10;
	}
}
// top_thick.before_update = function(){
// 	if((f85.value*0.02+3) > 8){
// 		top_thick.value = Math.round(f85.value*0.02+3);
// 	}else{
// 		top_thick.value = 8;
// 	}
// }

const bearing_ed = new DataMiddle("bearing_ed","bearing_ed","");
f99_41.add_child(bearing_ed);
f104_41.add_child(bearing_ed);
f119_41.add_child(bearing_ed);
bearing_ed.before_update = function(){
	bearing_ed.value = "".concat("φ",f104_41.value+2.5*d13.value,"|φ",f99_41.value+2.5*d6.value,"|φ",f119_41.value+2.5*d20.value);
}

const bhf_d1 = new DataMiddle("bhf_d1","bhf_d1");
f85.add_child(bhf_d1);
bhf_d1.before_update = function(){
	bhf_d1.value = "".concat(c1.value,"|",c2.value,"|",D_0.value);
}
const bhf_d2 = new DataMiddle("bhf_d2","bhf_d2");
f85.add_child(bhf_d2);
bhf_d2.before_update = function(){
	bhf_d2.value = "".concat(c11.value,"|",c21.value,"|",D_01.value);
}

const H_0 = new DataMiddle("H_0","H_0");
const H_2 = new DataMiddle("H_2","H_2");
f322_11.add_child(H_0);
H_0.before_update = function(){
	H_0.value = Math.round(f322_11.value/2+40);
	H_2.value = Math.round(f322_11.value/2+1.2*base_thick.value+d7.value);
}

const H_1 = new DataMiddle("H_1","H_1");
f85.add_child(H_1);
H_1.before_update = function(){
	if(H_0.value+24>f85.value){
		H_1.value = Math.round(H_0.value+24);
	}else{
		H_1.value = Math.round(f85.value);
	}
}

const box_size = [
	["底座壁厚","$ δ $","$ 0.025a+3≥8 $",getdd("\\delta_0")],
	["箱盖壁厚","$ δ_1 $","$ 0.02a+3≥8 $",getdd("\\delta_1")],
	["底座上部凸缘厚度","$ h_0 $","$ 1.5δ $",getdd("1.5 \\delta_0")],
	["底座下部凸缘厚度","$ h_2 $","$ 1.5δ_1 $",getdd("1.5\\delta_1")],
	["滚动轴承座连接螺栓凸缘厚度","$ h_5 $","$ 2.5δ $",getdd("2.5 \\delta_0")],
	["底座加强肋厚度","$ e $","$ (0.8～1) δ $",getdd("\\delta_0")],
	["箱底加强肋厚度","$ e_1 $","$ (0.8～0.85) δ_1 $",getdd("0.8 \\delta_1")],
	["地脚螺栓的直径","$ d $","$ 表 3.18 $",getdd("d_{地}","φ")],
	["地脚螺栓的数目","$ n $","$ 表 3.18 $",getdd("n_{地}")],
	["滚动轴承座连接螺栓直径","$ d_2 $","$ 0.75d $",getdd("d_{轴承座}","φ")],
	["底座与箱盖连接螺栓直径","$ d_3 $","$ (0.5～0.6)d $",getdd("0.6 d_{地}","φ")],
	["滚动轴承盖固定螺钉直径","$ d_4 $","$ (0.4～0.5)d $",getdd("0.4 d_{地}","φ")],
	["视孔盖固定螺钉直径","$ d_5 $","$ (0.3～0.4)d $",getdd("0.3 d_{地}","φ")],
	["滚动轴承盖螺钉分布直径","$ D_1 $","$ D+2.5d_4 $",getdd("bearing_ed")],
	["高速滚动轴承座凸缘端面直径","$ D_2\' $","$ D_1+2.5d_4 $",getdd("D_h^{'} + 5 d_{2h}","φ")],
	["中间滚动轴承座凸缘端面直径","$ D_2\'\' $","$ D_1+2.5d_4 $",getdd("D_m^{'} + 5 d_{2m}","φ")],
	["低速滚动轴承座凸缘端面直径","$ D_2\'\'\' $","$ D_1+2.5d_4 $",getdd("D_l^{'} + 5 d_{2l}","φ")],
	["螺栓孔凸缘的配置尺寸","$ c_1,c_2,D_0 $","$ 表 3.16 $",getdd("bhf_d1")],
	["地脚螺栓孔凸缘的配置尺寸","$ c_1\',c_2\',D_0\' $","$ 表 3.17 $",getdd("bhf_d2")],
	["箱体内壁与齿顶圆的距离","$ \\Delta $","$ \\ge 1.2\\delta $",getdd("1.4 \\delta_0")],
	["箱体内壁与齿轮端面的距离","$ \\Delta_1 $","$ \\ge \\delta $",getdd("\\Delta_{1m}")],
	["底座深度","$ H $","$ 0.5d_a+(30～50) $",getdd("H_0")],
	["底座高度","$ H_1 $","$ \\approx a $",getdd("H_1")],
	["箱盖高度","$ H_2 $","$ 0.5d_a+\\Delta+δ_1 $",getdd("H_2")],
	["外箱壁至滚动轴承座端面距离","$ l_1 $","$ c_1+c_2+(5～10) $",getdd("c_1+c_2+8")],
	["箱底内壁横向宽度","$ L_1 $","$ = b_{内}+4 $",getdd("b_{内实}")],
	["其他圆角","$ R_0,r_1,r_2 $","$ R_0=c_2,r_1=_0.25h_3,r_2=h_3 $",getdd("c_2")]
];
const t2 = new DataTable("t2","t_{减速箱箱体尺寸}",false);
t2.table_head = ["名称","代号","公式","尺寸"];
t2.set_rows(box_size);
t2.pre_update_flag = true;


//高速轴V带轮用键连接
const f341 = new DataDisplay("f341",d10);
const f342 = new DataDisplay("f342",f109_11);
const keyBelt_w = new DataMiddle("keyBelt_w","keyBelt_w");
const keyBelt_l = new DataMiddle("keyBelt_l","keyBelt_l");
const keyBelt_h = new DataMiddle("keyBelt_h","keyBelt_h");
const f343 = new DataMiddle("f343_1","key_h");
const f343_1 = new DataDisplay("f343",f343);
const f347 = document.getElementById("f347");
const f348 = document.getElementById("f348");
const f349 = document.getElementById("f349");
const f350 = document.getElementById("f350");
const warning20 = document.getElementById("warning20");
T2.add_child(f343);
d10.add_child(f343);
f109_11.add_child(f343);
f343.before_update = function(){
	for(i in T12_21){
		if(f342.value<=T12_21[i]){
			keyBelt_l.value = T12_21[i-1];
			break;
		}
	}
	for(i in T12_20){
		if(f341.value<=T12_20[i][0]){
			keyBelt_w.value = T12_20[i][1];
			keyBelt_h.value = T12_20[i][2];
			break;
		}
	}
	
	f343.value = `键${keyBelt_w.value}×${keyBelt_l.value} GB/T 1096-2003`;

	f347.value = keyBelt_l.value - keyBelt_w.value;
	f347.textContent = `$ l'=l-b= ${keyBelt_l.value} - ${keyBelt_w.value} = ${f347.value} mm $`;

	f348.value = 4000*T2.value/keyBelt_h.value/f347.value/f341.value;
	f348.textContent = `$$ \\sigma_p = \\frac{4000 T_{Ⅰ}}{hl'd} = \\frac{4000 \\times ${T2.value}}{${keyBelt_h.value} \\times ${f347.value} \\times ${f341.value}} = ${f348.value} MPa < [\\sigma_p] $$`;

	if(f348.value>f346.value){
		f348.textContent = `$$ \\sigma_p = \\frac{4000 T_{Ⅰ}}{hl'd} = \\frac{4000 \\times ${T2.value}}{${keyBelt_h.value} \\times ${f347.value} \\times ${f341.value}} = ${f348.value} MPa \\ge [\\sigma_p] $$`;
		f349.textContent = `强度不满足要求，故采用双键布置`;
	}else{
		f349.textContent = ``;
	}

	f350.value = f348.value/1.5;
	warning20.innerText = "";
	if(f348.value>f346.value){
		f350.textContent = `$$ \\sigma_p'=\\frac{\\sigma_p}{1.5} = \\frac{${f348.value}}{1.5} = ${f350.value} MPa < [\\sigma_p] $$`;
	}else{
		f350.textContent = ``;
	}
	if(f350.value>f346.value){
		warning20.innerText = "双键也不满足，请尝试找出错误或联系作者";
	}
	window.MathJax.typesetPromise([f347,f348,f349,f350]);
}

//中间轴齿轮用键连接
const f361 = new DataDisplay("f361",d_gearm);
const f362 = new DataDisplay("f362",l_gearm);
const keyGearm_w = new DataMiddle("keyGearm_w","keyGearm_w");
const keyGearm_l = new DataMiddle("keyGearm_l","keyGearm_l");
const keyGearm_h = new DataMiddle("keyGearm_h","keyGearm_h");
const f363 = new DataMiddle("f363_1","key_m");
const f363_1 = new DataDisplay("f363",f363);
const f367 = document.getElementById("f367");
const f368 = document.getElementById("f368");
const f369 = document.getElementById("f369");
const f370 = document.getElementById("f370");
const warning21 = document.getElementById("warning21");
T3.add_child(f363);
d_gearm.add_child(f363);
l_gearm.add_child(f363);
f363.before_update = function(){
	for(i in T12_21){
		if(f362.value<=T12_21[i]){
			keyGearm_l.value = T12_21[i-1];
			break;
		}
	}
	for(i in T12_20){
		if(f361.value<=T12_20[i][0]){
			keyGearm_w.value = T12_20[i][1];
			keyGearm_h.value = T12_20[i][2];
			break;
		}
	}
	
	f363.value = `键${keyGearm_w.value}×${keyGearm_l.value} GB/T 1096-2003`;

	f367.value = keyGearm_l.value - keyGearm_w.value;
	f367.textContent = `$ l'=l-b= ${keyGearm_l.value} - ${keyGearm_w.value} = ${f367.value} mm $`;

	f368.value = 4000*T3.value/keyGearm_h.value/f367.value/f361.value;
	f368.textContent = `$$ \\sigma_p = \\frac{4000 T}{hl'd} = \\frac{4000 \\times ${T3.value}}{${keyGearm_h.value} \\times ${f367.value} \\times ${f361.value}} = ${f368.value} MPa < [\\sigma_p] $$`;

	if(f368.value>f366.value){
		f368.textContent = `$$ \\sigma_p = \\frac{4000 T_{Ⅱ}}{hl'd} = \\frac{4000 \\times ${T3.value}}{${keyGearm_h.value} \\times ${f367.value} \\times ${f361.value}} = ${f368.value} MPa \\ge [\\sigma_p] $$`;
		f369.textContent = `强度不满足要求，故采用双键布置`;
	}else{
		f369.textContent = ``;
	}

	f370.value = f368.value/1.5;
	warning21.innerText = "";
	if(f368.value>f366.value){
		f370.textContent = `$$ \\sigma_p'=\\frac{\\sigma_p}{1.5} = \\frac{${f368.value}}{1.5} = ${f370.value} MPa < [\\sigma_p] $$`;
	}else{
		f370.textContent = ``;
	}
	if(f370.value>f366.value){
		warning21.innerText = "双键也不满足，请尝试找出错误或联系作者";
	}
	window.MathJax.typesetPromise([f367,f368,f369,f370]);
}


//低速轴齿轮用键连接
const f381 = new DataDisplay("f381",d_gearl);
const f382 = new DataDisplay("f382",l_gearl);
const keyGearl_w = new DataMiddle("keyGearl_w","keyGearl_w");
const keyGearl_l = new DataMiddle("keyGearl_l","keyGearl_l");
const keyGearl_h = new DataMiddle("keyGearl_h","keyGearl_h");
const f383 = new DataMiddle("f383_1","key_{l1}");
const f383_1 = new DataDisplay("f383",f383);
const f387 = document.getElementById("f387");
const f388 = document.getElementById("f388");
const f389 = document.getElementById("f389");
const f390 = document.getElementById("f390");
const warning22 = document.getElementById("warning22");
T4.add_child(f383);
l_gearm.add_child(f383);
l_gearl.add_child(f383);
f383.before_update = function(){
	for(i in T12_21){
		if(f382.value<=T12_21[i]){
			keyGearl_l.value = T12_21[i-1];
			break;
		}
	}
	for(i in T12_20){
		if(f381.value<=T12_20[i][0]){
			keyGearl_w.value = T12_20[i][1];
			keyGearl_h.value = T12_20[i][2];
			break;
		}
	}
	
	f383.value = `键${keyGearl_w.value}×${keyGearl_l.value} GB/T 1096-2003`;

	f387.value = keyGearl_l.value - keyGearl_w.value;
	f387.textContent = `$ l'=l-b= ${keyGearl_l.value} - ${keyGearl_w.value} = ${f387.value} mm $`;

	f388.value = 4000*T4.value/keyGearl_h.value/f387.value/f381.value;
	f388.textContent = `$$ \\sigma_p = \\frac{4000 T_{Ⅲ}}{hl'd} = \\frac{4000 \\times ${T4.value}}{${keyGearl_h.value} \\times ${f387.value} \\times ${f381.value}} = ${f388.value} MPa < [\\sigma_p] $$`;

	if(f388.value>f386.value){
		f388.textContent = `$$ \\sigma_p = \\frac{4000 T_{Ⅲ}}{hl'd} = \\frac{4000 \\times ${T4.value}}{${keyGearl_h.value} \\times ${f387.value} \\times ${f381.value}} = ${f388.value} MPa \\ge [\\sigma_p] $$`;
		f389.textContent = `强度不满足要求，故采用双键布置`;
	}else{
		f389.textContent = ``;
	}

	f390.value = f388.value/1.5;
	warning22.innerText = "";
	if(f388.value>f386.value){
		f390.textContent = `$$ \\sigma_p'=\\frac{\\sigma_p}{1.5} = \\frac{${f388.value}}{1.5} = ${f390.value} MPa < [\\sigma_p] $$`;
	}else{
		f390.textContent = ``;
	}
	if(f390.value>f386.value){
		warning22.innerText = "双键也不满足，请尝试找出错误或联系作者";
	}
	window.MathJax.typesetPromise([f387,f388,f389,f390]);
}


//低速轴联轴器用键连接
const f401 = new DataDisplay("f401",d17);
const f402 = new DataDisplay("f402",d23);
const keyCoup_w = new DataMiddle("keyCoup_w","keyCoup_w");
const keyCoup_l = new DataMiddle("keyCoup_l","keyCoup_l");
const keyCoup_h = new DataMiddle("keyCoup_h","keyCoup_h");
const f403 = new DataMiddle("f403_1","key_{l2}");
const f403_1 = new DataDisplay("f403",f403);
const f407 = document.getElementById("f407");
const f408 = document.getElementById("f408");
const f409 = document.getElementById("f409");
const f410 = document.getElementById("f410");
const warning23 = document.getElementById("warning23");
T4.add_child(f403);
d17.add_child(f403);
d23.add_child(f403);
f403.before_update = function(){
	for(i in T12_21){
		if(f402.value<=T12_21[i]){
			keyCoup_l.value = T12_21[i-1];
			break;
		}
	}
	for(i in T12_20){
		if(f401.value<=T12_20[i][0]){
			keyCoup_w.value = T12_20[i][1];
			keyCoup_h.value = T12_20[i][2];
			break;
		}
	}
	
	f403.value = `键${keyCoup_w.value}×${keyCoup_l.value} GB/T 1096-2003`;

	f407.value = keyCoup_l.value - keyCoup_w.value;
	f407.textContent = `$ l'=l-b= ${keyCoup_l.value} - ${keyCoup_w.value} = ${f407.value} mm $`;

	f408.value = 4000*T4.value/keyCoup_h.value/f407.value/f401.value;
	f408.textContent = `$$ \\sigma_p = \\frac{4000 T_{Ⅲ}}{hl'd} = \\frac{4000 \\times ${T4.value}}{${keyCoup_h.value} \\times ${f407.value} \\times ${f401.value}} = ${f408.value} MPa < [\\sigma_p] $$`;

	if(f408.value>f406.value){
		f408.textContent = `$$ \\sigma_p = \\frac{4000 T_{Ⅲ}}{hl'd} = \\frac{4000 \\times ${T4.value}}{${keyCoup_h.value} \\times ${f407.value} \\times ${f401.value}} = ${f408.value} MPa \\ge [\\sigma_p] $$`;
		f409.textContent = `强度不满足要求，故采用双键布置`;
	}else{
		f409.textContent = ``;
	}

	f410.value = f408.value/1.5;
	warning23.innerText = "";
	if(f408.value>f406.value){
		f410.textContent = `$$ \\sigma_p'=\\frac{\\sigma_p}{1.5} = \\frac{${f408.value}}{1.5} = ${f410.value} MPa < [\\sigma_p] $$`;
	}else{
		f410.textContent = ``;
	}
	if(f410.value>f406.value){
		warning23.innerText = "双键也不满足，请尝试找出错误或联系作者";
	}
	window.MathJax.typesetPromise([f407,f408,f409,f410]);
}


const key_config = [
	["高速轴V带轮键","A",keyBelt_l,keyBelt_h,keyBelt_w],
	["中间轴大齿轮键","A",keyGearm_l,keyGearm_h,keyGearm_w],
	["低速轴齿轮键","A",keyGearl_l,keyGearl_h,keyGearl_w],
	["低速轴联轴器键","C",keyCoup_l,keyCoup_h,keyCoup_w],
];
const t21 = new DataTable("t21","t_{各键参数}");
t21.table_head = ["参数","型号","键长/l","键高/h","键宽/d"];
t21.set_rows(key_config);
t21.pre_update_flag = true;

//减速器的润滑
const f420 = new DataFormula("f420","v_1","=","\\frac{\\pi d_1 n_{Ⅰ}}{60 \\times 1000}", "m/s", 0, ["< 2m/s"]);


//机械设计网站
function jxsj_web(){

	f421.innerHTML = `1.输送带拉力$ F = ${F0.value} $N<br>
2.滚筒直径$ D = ${D0.value/1000} $m<br>
3.滚筒速度$ v = ${v0.value} $m/s<br>
4.工作机功率$ P_w = ${f1.value} $kW<br>
5.总效率$ \\eta = ${f2.value} $<br>
6.计算功率$ P_c = ${f3.value} $kW<br>
7.电机工况系数$ K_A = ${K0.value} $<br>
8.电机额定功率$ P_{ed} = ${t1_power.value} $kW<br>
9.电动机转速$ n_d = ${n1.value} $rpm<br>
10.带传动比$ i_{带} = ${i0.value} $<br>
11.高速级齿轮传动比$ i_{齿轮} = ${i1.value} $<br>
12.低速级齿轮传动比$ i_{齿轮} = ${i2.value} $<br>
13.小带轮轴功率$ P_{带} = ${P1.value} $kW<br>
14.齿轮轴Ⅰ功率$ P_{Ⅰ} = ${P2.value} $kW<br>
15.齿轮轴Ⅱ功率$ P_{Ⅱ} = ${P3.value} $kW<br>
16.齿轮轴Ⅲ功率$ P_{Ⅲ} = ${P4.value} $kW<br>
17.小带轮轴转速$ n_d = ${n1.value} $rpm<br>
18.轴Ⅰ转速$ n_{Ⅰ} = ${n2.value} $rpm<br>
19.轴Ⅱ转速$ n_{Ⅱ} = ${n3.value} $rpm<br>
20.轴Ⅲ转速$ n_{Ⅲ} = ${n4.value} $rpm<br>
21.小带轮轴转矩$ T_d = ${T1.value} $Nm<br>
22.齿轮轴Ⅰ转矩$ T_{Ⅰ} = ${T2.value} $Nm<br>
23.齿轮轴Ⅱ转矩$ T_{Ⅱ} = ${T3.value} $Nm<br>
24.齿轮轴Ⅲ转矩$ T_{Ⅲ} = ${T4.value} $Nm<br>
<br>
25.V带工况系数$ K_A = ${K0.value} $<br>
26.带型(普通V带)为$ ${f9.value.slice(0,1)} $<br>
27.小带轮基准直径$ D_1 = ${f10.value} $mm<br>
28.大带轮基准直径$ D_2 = ${f12.value} $mm<br>
29.基准带长$ L_d = ${f16.value} $mm<br>
30.中心距$ a = ${Math.round(f17.value)} $mm<br>
31.小带轮包角$ \\alpha_1 = ${f18.value} $°<br>
32.单根带基本功率$ P_0 = ${P50.value} $kW<br>
33.单根带功率增量$ \\Delta P = ${P51.value} $kW<br>
34.带长修正系数$ K_L = ${K3.value} $<br>
35.包角修正系数$ K_{\\alpha} = ${K2.value} $<br>
36.带根数$ z = ${f22.value} $根<br>
37.带轮宽$ b = ${f109.value} $mm<br>
38.带速$ v = ${f13.value} $m/s<br>
39.单位带质量$ q = ${f23.value} $kg/m<br>
40.预紧力$ F_0 = ${f24.value} $N<br>
41.压轴力$ F_Q = ${f25.value} $N<br>
<br>
42.高速小齿轮材料许用接触应力$ [\\sigma_{H}]_1 = ${f30_1.value} $MPa<br>
43.高速大齿轮材料许用接触应力$ [\\sigma_{H}]_2 = ${f30_2.value} $MPa<br>
44.高速小齿轮材料许用弯曲应力$ [\\sigma_{F}]_1 = ${f47_1.value} $MPa<br>
45.高速小齿轮材料许用弯曲应力$ [\\sigma_{F}]_2 = ${f47_2.value} $MPa<br>
46.高速级小齿轮齿数$ z_1 = ${g0.value} $<br>
47.高速级大齿轮齿数$ z_2 = ${f27.value} $<br>
48.高速级螺旋角$ \\beta_{齿轮} = ${f54_1.value} $°<br>
49.高速级小齿轮齿形系数$ Y_{Fa1}Y_{sa1}Y_{\\beta} = ${f43_1.value*f43_2.value*f46.value} $<br>
50.高速级大齿轮齿形系数$ Y_{Fa2}Y_{sa2}Y_{\\beta} = ${f43_3.value*f43_4.value*f46.value} $<br>
51.高速级法向模数$ m_n = ${f51.value} $mm<br>
52.高速级齿轮接触工况系数$ K_H = ${g11.value} $<br>
53.高速级齿轮弯曲工况系数$ K_F = ${g12.value} $<br>
54.高速级宽径比$ \\phi_d = ${g2.value} $<br>
55.高速级重合度$ \\varepsilon_{\\alpha} = ${f40_3.value} $(这里取端面重合度)<br>
56.高速级弹性系数$ Z_E = ${g3.value} $<br>
57.高速级螺旋角系数$ Z_H = ${f39_3.value} $<br>
58.高速级小齿轮分度圆直径$ d_1 = ${f55_1.value} $mm<br>
59.高速级大齿轮分度圆直径$ d_2 = ${f55_2.value} $mm<br>
60.高速级中心距$ a = ${f53.value} $mm<br>
61.高速级大齿轮齿宽$ b_2 = ${f57_11.value} $mm<br>
62.高速级小齿轮齿宽$ b_1 = ${f57_1.value} $mm<br>
<br>
63.低速小齿轮材料许用接触应力$ [\\sigma_{H}]_3 = ${f62_1.value} $MPa<br>
64.低速大齿轮材料许用接触应力$ [\\sigma_{H}]_4 = ${f62_2.value} $MPa<br>
65.低速小齿轮材料许用弯曲应力$ [\\sigma_{F}]_3 = ${f79_1.value} $MPa<br>
66.低速小齿轮材料许用弯曲应力$ [\\sigma_{F}]_4 = ${f79_2.value} $MPa<br>
67.低速级小齿轮齿数$ z_3 = ${g18.value} $<br>
68.低速级大齿轮齿数$ z_4 = ${f59.value} $<br>
69.低速级螺旋角$ \\beta_{齿轮} = ${f86_1.value} $°<br>
70.低速级小齿轮齿形系数$ Y_{Fa3}Y_{sa3}Y_{\\beta} = ${f75_1.value*f75_2.value*f78.value} $<br>
71.低速级大齿轮齿形系数$ Y_{Fa4}Y_{sa4}Y_{\\beta} = ${f75_3.value*f75_4.value*f78.value} $<br>
72.低速级法向模数$ m_n = ${f83.value} $mm<br>
73.低速级齿轮接触工况系数$ K_H = ${g29.value} $<br>
74.低速级齿轮弯曲工况系数$ K_F = ${g30.value} $<br>
75.低速级宽径比$ \\phi_d = ${g20.value} $<br>
76.低速级重合度$ \\varepsilon_{\\alpha} = ${f72_3.value} $(这里取端面重合度)<br>
77.低速级弹性系数$ Z_E = ${g21.value} $<br>
78.低速级螺旋角系数$ Z_H = ${f71_3.value} $<br>
79.低速级小齿轮分度圆直径$ d_3 = ${f87_1.value} $mm<br>
80.低速级大齿轮分度圆直径$ d_4 = ${f87_2.value} $mm<br>
81.低速级中心距$ a = ${f85.value} $mm<br>
82.低速级大齿轮齿宽$ b_4 = ${f89_11.value} $mm<br>
83.低速级小齿轮齿宽$ b_3 = ${f89_1.value} $mm<br>
<br>
84.轴承端盖形式:螺钉固定式<br>
85.高速轴材料系数$ A_{高速} = ${d9.value} $<br>
86.高速轴最小直径$ d_{高速} = ${d10.value} $mm<br>
87.高速轴总长$ L_{高速} = ${f114.value} $mm<br>
88.中间轴材料系数$ A_{中间} = ${d0.value} $<br>
89.中间轴最小直径$ d_{中间} = ${d1.value} $mm<br>
90.中间轴总长$ L_{中间} = ${f95.value} $mm<br>
91.低速轴材料系数$ A_{低速} = ${d16.value} $<br>
92.低速轴最小直径$ d_{低速} = ${d17.value} $mm<br>
93.低速轴总长$ L_{低速} = ${f129.value} $mm<br>
94.高速轴带轮键型号$ A $<br>
95.高速轴带轮键（宽x长）$ ${keyBelt_w.value} x ${keyBelt_l.value} $mmxmm <br>
96.高速轴轴承型号$ ${f235.value} $<br>
97.高速轴轴承内径$ d_{高速轴滚动轴承} = ${f102.value} $mm<br>
98.高速轴轴承宽度$ B_{高速轴滚动轴承} = ${f104_2.value} $mm<br>
99.中间轴轴承型号$ ${f265.value} $<br>
100.中间轴轴承内径$ d_{中间轴滚动轴承} = ${f92.value} $mm<br>
101.中间轴轴承宽度$ B_{中间轴滚动轴承} = ${f99_21.value} $mm<br>
102.中间轴高速级键型号$ A $<br>
103.中间轴高速级键（宽x长）$ ${keyGearm_w.value} x ${keyGearm_l.value} $mmxmm <br>
104.中间轴低速级键型号$ A $(这里设计的是没有键的，于是采用和低速轴齿轮一样的参数)<br>
105.中间轴低速级键（宽x长）$ ${keyGearl_w.value} x ${keyGearl_l.value} $mmxmm <br>
106.低速轴轴承型号$ ${f295.value} $<br>
107.低速轴轴承内径$ d_{低速轴滚动轴承} = ${f117.value} $mm<br>
108.低速轴轴承宽度$ B_{低速轴滚动轴承} = ${f119_11.value} $mm<br>
109.低速轴齿轮键型号$ A $<br>
110.低速轴齿轮键（宽x长）$ ${keyGearl_w.value} x ${keyGearl_l.value} $mmxmm <br>
<br>
111.联轴器型号$ ${fit_coupling[g40.ele.options[g40.selected].value][0]} $<br>
112.联轴器孔径$ d_{联轴器}= ${fit_coupling[g40.ele.options[g40.selected].value][3]} $mm<br>
113.联轴器宽$ B_{联轴器}= ${d23.value} $mm(用的是预留联轴器配合长度)<br>
114.低速轴联轴器键型号$ C $<br>
115.低速轴联轴器键（宽x长）$ ${keyCoup_w.value} x ${keyCoup_l.value} $mmxmm <br>
116.减速箱内总长$ l_{内总} = ${Math.round(0.5*f322.value+f53.value+f55_1.value+2*f51.value+f85.value+2*1.4*base_thick.value)} $mm<br>
117.减速箱内总宽$ b_{内总} = ${f94_1.value} $mm<br>
118.减速箱整体长$ L_{总} = ${Math.round(0.5*f322.value+f53.value+f55_1.value+2*f51.value+f85.value+2*1.4*base_thick.value+c11.value*2+c21.value*2)} $mm<br>
119.减速箱整体宽$ B_{总} = ${f98.value+f111.value+f126.value} $mm<br>
120.减速箱整体高$ H_{总} = ${H_0.value+H_1.value} $mm<br>
`;
	window.MathJax.typesetPromise([f421]);
};

</script>  







<script>
function input_update(e){
	if(defense_dog){
		return;
	}
	const expires = new Date();
	expires.setDate(expires.getDate() + 365);
	try{
		if(e.tagName=="INPUT"){
			setCookie(e.getAttribute("id")+"_value",parseFloat(e.value),expires);
		}else if(e.tagName=="SELECT"){
			setCookie(e.getAttribute("id")+"_value",e.options[e.selectedIndex].text,expires);
		}else{
			throw new Error("遇到未预设cookies设置方案的标签"+e.tagName);
		}
	}catch(error){
		console.log(e.getAttribute("id"),'添加cookies失败：', error.message);
	}
	
	
	const data = DesignData.all_id[e.getAttribute("id")];
	data.pre_update_flag = true;
	data.user_update_flag = true;
	data.set_children_update_flag();
	if(INITARRAY.indexOf(e.getAttribute("id")) !== -1 ){
		return;
	}
	DesignData.latex_update_all();
}

function update_all_force(){
	var flag = (getCookie("F0_value")!=F0.value.toString() ||
			    getCookie("v0_value")!=v0.value.toString() ||
			    getCookie("D0_value")!=D0.value.toString() ||
			    getCookie("e4_value")!=e4.value.toString());
	//console.log(flag);
	if(flag){
		clearAllCookiesExcept();
		DesignData.latex_update_all(true);
	}
}


window.onload = function() {
	window.addEventListener('message',function(e){
    	dealMessage(e.data);
    });

	check_new_logger(0);
	if(defense_dog){
		return;
	}
	DesignData.latex_update_all(true);
};


</script> 

<!-- 今日幸运图片生成 -->
<!-- 日志更新提醒 -->
<!-- 按钮信息处理 -->
<script id="my_sundries" async src="/js/my_sundries.js">  </script>

<!-- word导出前置要求 -->
<script id="ToWord" async src="/js/docx.js">  </script>
<script id="file_saver" async src="/js/FileSaver.js">  </script>
<script id="mathml2omml" async src="/js/mathml2omml.js">  </script>
<!-- 自定义生成word文档格式的逻辑 -->
<script id="my_html2word" async src="/js/my_html2word.js">  </script>
<!-- 查表时的表格数据 -->
<script id="my_table_const" async src="/js/my_table_const.js">  </script> 












                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Design</div>
      <div>https://qpmhhh.github.io/2025/05/03/Design/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>qpm</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年5月3日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments">
      
    <div id="giscus" class="giscus"></div>
    <script type="text/javascript">
      Fluid.utils.loadComments('#giscus', function() {
        var options = {"repo":"qpmhhh/qpmhhh.github.io","repo-id":"R_kgDOIQezUw","category":"Announcements","category-id":"DIC_kwDOIQezU84CqYkP","theme-light":"light","theme-dark":"dark","mapping":"pathname","reactions-enabled":1,"emit-metadata":0,"input-position":"top","lang":"zh-CN"};
        var attributes = {};
        for (let option in options) {
          if (!option.startsWith('theme-')) {
            var key = option.startsWith('data-') ? option : 'data-' + option;
            attributes[key] = options[option];
          }
        }
        var light = 'light';
        var dark = 'dark';
        window.GiscusThemeLight = light;
        window.GiscusThemeDark = dark;
        attributes['data-theme'] = document.documentElement.getAttribute('data-user-color-scheme') === 'dark' ? dark : light;
        for (let attribute in attributes) {
          var value = attributes[attribute];
          if (value === undefined || value === null || value === '') {
            delete attributes[attribute];
          }
        }
        var s = document.createElement('script');
        s.setAttribute('src', 'https://giscus.app/client.js');
        s.setAttribute('crossorigin', 'anonymous');
        for (let attribute in attributes) {
          s.setAttribute(attribute, attributes[attribute]);
        }
        var ss = document.getElementsByTagName('script');
        var e = ss.length > 0 ? ss[ss.length - 1] : document.head || document.documentElement;
        e.parentNode.insertBefore(s, e.nextSibling);
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>







  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
